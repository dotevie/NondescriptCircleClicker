// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <lime/net/_HTTPRequest_Bytes.h>
void lime_net__HTTPRequest_AbstractHTTPRequest_new(lime__net___HTTPRequest__AbstractHTTPRequest,String);
lime__app__Promise lime_app_Promise_complete(lime__app__Promise,vdynamic*);
#include <lime/app/Future.h>
extern hl_type t$lime_app_Promise;
void lime_app_Promise_new(lime__app__Promise);
lime__app__Future lime__internal_backend_native_NativeHTTPRequest_loadData(lime___internal__backend__native__NativeHTTPRequest,String,bool*);
lime__app__Promise lime_app_Promise_progress(lime__app__Promise,int,int);
extern hl_type t$fun_a4fdf42;
void wrapt$fun_354f561(vclosure*,int,int);
extern hl_type t$fun_354f561;
lime__app__Future lime_app_Future_onProgress(lime__app__Future,vclosure*);
lime__app__Promise lime_app_Promise_error(lime__app__Promise,vdynamic*);
extern hl_type t$fun_2b2a2eb;
void wrapt$fun_e2ed85b(vclosure*,vdynamic*);
extern hl_type t$fun_e2ed85b;
lime__app__Future lime_app_Future_onError(lime__app__Future,vclosure*);
extern hl_type t$ctx_9b7cc5a;
extern hl_type t$fun_3607aa8;
void wrapt$fun_b3252e9(vclosure*,vdynamic*);
extern hl_type t$fun_b3252e9;
lime__app__Future lime_app_Future_onComplete(lime__app__Future,vclosure*);

void lime_net__HTTPRequest_Bytes_new(lime__net___HTTPRequest_Bytes r0,String r1) {
	lime_net__HTTPRequest_AbstractHTTPRequest_new(((lime__net___HTTPRequest__AbstractHTTPRequest)r0),r1);
	return;
}

vdynamic* lime_net__HTTPRequest_Bytes_fromBytes(lime__net___HTTPRequest_Bytes r0,haxe__io__Bytes r1) {
	return ((vdynamic*)r1);
}

void lime_net__HTTPRequest_Bytes_load__$1(venum* r0,haxe__io__Bytes r1) {
	lime__net___HTTPRequest_Bytes r2, r4;
	lime__app__Promise r5;
	vdynamic *r3;
	r2 = ((Enumt$ctx_9b7cc5a*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r4 = ((Enumt$ctx_9b7cc5a*)r0)->p1;
	if( r4 == NULL ) hl_null_access();
	r3 = ((vdynamic* (*)(lime__net___HTTPRequest_Bytes,haxe__io__Bytes))r4->$type->vobj_proto[1])(r4,r1);
	r2->responseData = r3;
	r5 = ((Enumt$ctx_9b7cc5a*)r0)->p0;
	if( r5 == NULL ) hl_null_access();
	r2 = ((Enumt$ctx_9b7cc5a*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r3 = r2->responseData;
	r5 = lime_app_Promise_complete(r5,r3);
	return;
}

lime__app__Future lime_net__HTTPRequest_Bytes_load(lime__net___HTTPRequest_Bytes r0,String r1) {
	bool *r7;
	String r3;
	venum *r14;
	lime__app__Future r5, r8;
	lime___internal__backend__native__NativeHTTPRequest r6;
	lime__app__Promise r4;
	vclosure *r9, *r10, *r11, *r12, *r13;
	if( !r1 ) goto label$ed4a532_4_2;
	r0->uri = r1;
	label$ed4a532_4_2:
	r4 = (lime__app__Promise)hl_alloc_obj(&t$lime_app_Promise);
	lime_app_Promise_new(r4);
	r6 = r0->__backend;
	if( r6 == NULL ) hl_null_access();
	r3 = r0->uri;
	r7 = NULL;
	r5 = lime__internal_backend_native_NativeHTTPRequest_loadData(r6,r3,r7);
	if( r5 == NULL ) hl_null_access();
	r9 = hl_alloc_closure_ptr(&t$fun_a4fdf42,lime_app_Promise_progress,r4);
	if( r9 ) goto label$ed4a532_4_14;
	r10 = NULL;
	goto label$ed4a532_4_15;
	label$ed4a532_4_14:
	r10 = hl_alloc_closure_ptr(&t$fun_354f561,wrapt$fun_354f561,r9);
	label$ed4a532_4_15:
	r8 = lime_app_Future_onProgress(r5,r10);
	r11 = hl_alloc_closure_ptr(&t$fun_2b2a2eb,lime_app_Promise_error,r4);
	if( r11 ) goto label$ed4a532_4_20;
	r12 = NULL;
	goto label$ed4a532_4_21;
	label$ed4a532_4_20:
	r12 = hl_alloc_closure_ptr(&t$fun_e2ed85b,wrapt$fun_e2ed85b,r11);
	label$ed4a532_4_21:
	r8 = lime_app_Future_onError(r5,r12);
	r14 = hl_alloc_enum(&t$ctx_9b7cc5a,0);
	((Enumt$ctx_9b7cc5a*)r14)->p0 = (lime__app__Promise)r4;
	((Enumt$ctx_9b7cc5a*)r14)->p1 = (lime__net___HTTPRequest_Bytes)r0;
	r13 = hl_alloc_closure_ptr(&t$fun_3607aa8,lime_net__HTTPRequest_Bytes_load__$1,r14);
	if( r13 ) goto label$ed4a532_4_29;
	r12 = NULL;
	goto label$ed4a532_4_30;
	label$ed4a532_4_29:
	r12 = hl_alloc_closure_ptr(&t$fun_b3252e9,wrapt$fun_b3252e9,r13);
	label$ed4a532_4_30:
	r8 = lime_app_Future_onComplete(r5,r12);
	r8 = r4->future;
	return r8;
}

