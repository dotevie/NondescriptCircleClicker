// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <lime/graphics/ImageBuffer.h>
#include <haxe/io/Bytes.h>
#include <hl/types/ArrayDyn.h>
#include <openfl/_Vector/IntVector.h>
#include <lime/utils/TAError.h>
extern hl_type t$lime_graphics_ImageBuffer;
haxe__io__Bytes haxe_io_Bytes_alloc(int);
void haxe_io_Bytes_blit(haxe__io__Bytes,int,haxe__io__Bytes,int,int);
extern hl_type t$lime_utils_ArrayBufferView;
void lime_utils_ArrayBufferView_new(lime__utils__ArrayBufferView,vdynamic*,int);
extern hl_type t$_i32;
int hl_types_ArrayDyn_get_length(hl__types__ArrayDyn);
void lime_utils_ArrayBufferView_copyFromArray(lime__utils__ArrayBufferView,hl__types__ArrayDyn,int*);
extern hl_type t$_dyn;
extern hl_type t$hl_types_ArrayDyn;
extern String s$unimplemented;
extern venum* g$lime_utils_TAError_RangeError;
extern String s$ac96fc9;

void lime_graphics_ImageBuffer_new(lime__graphics__ImageBuffer r0,lime__utils__ArrayBufferView r1,int* r2,int* r3,int* r4,vdynamic* r5) {
	bool r10;
	int r6, r7, r8, r9;
	if( r2 ) goto label$45d4078_1_3;
	r6 = 0;
	goto label$45d4078_1_4;
	label$45d4078_1_3:
	r6 = *r2;
	label$45d4078_1_4:
	if( r3 ) goto label$45d4078_1_7;
	r7 = 0;
	goto label$45d4078_1_8;
	label$45d4078_1_7:
	r7 = *r3;
	label$45d4078_1_8:
	if( r4 ) goto label$45d4078_1_11;
	r8 = 32;
	goto label$45d4078_1_12;
	label$45d4078_1_11:
	r8 = *r4;
	label$45d4078_1_12:
	r0->data = r1;
	r0->width = r6;
	r0->height = r7;
	r0->bitsPerPixel = r8;
	if( r5 ) goto label$45d4078_1_19;
	r9 = 0;
	goto label$45d4078_1_20;
	label$45d4078_1_19:
	r9 = r5 ? r5->v.i : 0;
	label$45d4078_1_20:
	r0->format = r9;
	r10 = false;
	r0->premultiplied = r10;
	r10 = true;
	r0->transparent = r10;
	return;
}

lime__graphics__ImageBuffer lime_graphics_ImageBuffer_clone(lime__graphics__ImageBuffer r0) {
	String r28;
	openfl___Vector__IntVector r18;
	venum *r29;
	bool r32;
	haxe__io__Bytes r11, r13, r14;
	lime__graphics__ImageBuffer r1;
	double r30, r31;
	hl__types__ArrayDyn r17, r22;
	lime__utils__ArrayBufferView r2, r21;
	vdynamic *r9, *r19, *r20, *r23;
	int *r4, *r6, *r8;
	int r3, r5, r7, r12, r15, r16, r24, r25, r26, r27;
	r1 = (lime__graphics__ImageBuffer)hl_alloc_obj(&t$lime_graphics_ImageBuffer);
	r2 = r0->data;
	r3 = r0->width;
	r4 = &r3;
	r5 = r0->height;
	r6 = &r5;
	r7 = r0->bitsPerPixel;
	r8 = &r7;
	r9 = NULL;
	lime_graphics_ImageBuffer_new(r1,r2,r4,r6,r8,r9);
	r2 = r0->data;
	if( !r2 ) goto label$45d4078_2_169;
	r2 = r0->data;
	if( r2 == NULL ) hl_null_access();
	r12 = r2->byteLength;
	r11 = haxe_io_Bytes_alloc(r12);
	if( r11 == NULL ) hl_null_access();
	r12 = 0;
	r2 = r1->data;
	if( r2 == NULL ) hl_null_access();
	r14 = r2->buffer;
	r15 = 0;
	r2 = r0->data;
	if( r2 == NULL ) hl_null_access();
	r16 = r2->byteLength;
	haxe_io_Bytes_blit(r11,r12,r14,r15,r16);
	r9 = NULL;
	r17 = NULL;
	r18 = NULL;
	r2 = NULL;
	r19 = NULL;
	if( !r9 ) goto label$45d4078_2_36;
	r21 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r12 = 4;
	lime_utils_ArrayBufferView_new(r21,r9,r12);
	goto label$45d4078_2_168;
	label$45d4078_2_36:
	if( !r17 ) goto label$45d4078_2_57;
	r21 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r12 = 0;
	r20 = hl_alloc_dynamic(&t$_i32);
	r20->v.i = r12;
	r12 = 4;
	lime_utils_ArrayBufferView_new(r21,r20,r12);
	r12 = 0;
	r21->byteOffset = r12;
	if( r17 == NULL ) hl_null_access();
	r12 = hl_types_ArrayDyn_get_length(r17);
	r21->length = r12;
	r12 = r21->length;
	r15 = r21->bytesPerElement;
	r12 = r12 * r15;
	r21->byteLength = r12;
	r12 = r21->byteLength;
	r13 = haxe_io_Bytes_alloc(r12);
	r21->buffer = r13;
	r4 = NULL;
	lime_utils_ArrayBufferView_copyFromArray(r21,r17,r4);
	goto label$45d4078_2_168;
	label$45d4078_2_57:
	if( !r18 ) goto label$45d4078_2_81;
	r21 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r12 = 0;
	r20 = hl_alloc_dynamic(&t$_i32);
	r20->v.i = r12;
	r12 = 4;
	lime_utils_ArrayBufferView_new(r21,r20,r12);
	if( r18 == NULL ) hl_null_access();
	r23 = (vdynamic*)hl_dyn_getp((vdynamic*)r18,-269630230/*__array*/,&t$_dyn);
	r22 = (hl__types__ArrayDyn)hl_dyn_castp(&r23,&t$_dyn,&t$hl_types_ArrayDyn);
	r12 = 0;
	r21->byteOffset = r12;
	if( r22 == NULL ) hl_null_access();
	r12 = hl_types_ArrayDyn_get_length(r22);
	r21->length = r12;
	r12 = r21->length;
	r15 = r21->bytesPerElement;
	r12 = r12 * r15;
	r21->byteLength = r12;
	r12 = r21->byteLength;
	r13 = haxe_io_Bytes_alloc(r12);
	r21->buffer = r13;
	r4 = NULL;
	lime_utils_ArrayBufferView_copyFromArray(r21,r22,r4);
	goto label$45d4078_2_168;
	label$45d4078_2_81:
	if( !r2 ) goto label$45d4078_2_115;
	r21 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r12 = 0;
	r20 = hl_alloc_dynamic(&t$_i32);
	r20->v.i = r12;
	r12 = 4;
	lime_utils_ArrayBufferView_new(r21,r20,r12);
	if( r2 == NULL ) hl_null_access();
	r13 = r2->buffer;
	r12 = r2->length;
	r15 = r2->byteOffset;
	r16 = r2->bytesPerElement;
	r24 = r21->bytesPerElement;
	r25 = r2->type;
	r26 = r21->type;
	if( r25 != r26 ) goto label$45d4078_2_106;
	if( r13 == NULL ) hl_null_access();
	r25 = r13->length;
	r26 = r25 - r15;
	r14 = haxe_io_Bytes_alloc(r26);
	r21->buffer = r14;
	r14 = r21->buffer;
	if( r14 == NULL ) hl_null_access();
	r27 = 0;
	haxe_io_Bytes_blit(r14,r27,r13,r15,r26);
	goto label$45d4078_2_108;
	label$45d4078_2_106:
	r28 = (String)s$unimplemented;
	hl_throw((vdynamic*)r28);
	label$45d4078_2_108:
	r25 = r21->bytesPerElement;
	r25 = r25 * r12;
	r21->byteLength = r25;
	r25 = 0;
	r21->byteOffset = r25;
	r21->length = r12;
	goto label$45d4078_2_168;
	label$45d4078_2_115:
	if( !r11 ) goto label$45d4078_2_166;
	r21 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r12 = 0;
	r20 = hl_alloc_dynamic(&t$_i32);
	r20->v.i = r12;
	r12 = 4;
	lime_utils_ArrayBufferView_new(r21,r20,r12);
	r12 = 0;
	r16 = 0;
	if( r12 >= r16 ) goto label$45d4078_2_126;
	r29 = (venum*)g$lime_utils_TAError_RangeError;
	hl_throw((vdynamic*)r29);
	label$45d4078_2_126:
	r16 = r21->bytesPerElement;
	r15 = r16 == 0 ? 0 : r12 % r16;
	r16 = 0;
	if( r15 == r16 ) goto label$45d4078_2_132;
	r29 = (venum*)g$lime_utils_TAError_RangeError;
	hl_throw((vdynamic*)r29);
	label$45d4078_2_132:
	r15 = r11->length;
	r16 = r21->bytesPerElement;
	if( r19 ) goto label$45d4078_2_148;
	r25 = r15 - r12;
	r24 = r25;
	r26 = r21->bytesPerElement;
	r25 = r26 == 0 ? 0 : r15 % r26;
	r26 = 0;
	if( r25 == r26 ) goto label$45d4078_2_143;
	r29 = (venum*)g$lime_utils_TAError_RangeError;
	hl_throw((vdynamic*)r29);
	label$45d4078_2_143:
	r26 = 0;
	if( r24 >= r26 ) goto label$45d4078_2_147;
	r29 = (venum*)g$lime_utils_TAError_RangeError;
	hl_throw((vdynamic*)r29);
	label$45d4078_2_147:
	goto label$45d4078_2_156;
	label$45d4078_2_148:
	r25 = r19 ? r19->v.i : 0;
	r26 = r21->bytesPerElement;
	r25 = r25 * r26;
	r24 = r25;
	r25 = r12 + r24;
	if( r15 >= r25 ) goto label$45d4078_2_156;
	r29 = (venum*)g$lime_utils_TAError_RangeError;
	hl_throw((vdynamic*)r29);
	label$45d4078_2_156:
	r21->buffer = r11;
	r21->byteOffset = r12;
	r21->byteLength = r24;
	r30 = (double)r24;
	r25 = r21->bytesPerElement;
	r31 = (double)r25;
	r30 = r30 / r31;
	r25 = (int)r30;
	r21->length = r25;
	goto label$45d4078_2_168;
	label$45d4078_2_166:
	r28 = (String)s$ac96fc9;
	hl_throw((vdynamic*)r28);
	label$45d4078_2_168:
	r1->data = r21;
	label$45d4078_2_169:
	r12 = r0->bitsPerPixel;
	r1->bitsPerPixel = r12;
	r12 = r0->format;
	r1->format = r12;
	r32 = r0->premultiplied;
	r1->premultiplied = r32;
	r32 = r0->transparent;
	r1->transparent = r32;
	return r1;
}

vdynamic* lime_graphics_ImageBuffer_get_src(lime__graphics__ImageBuffer r0) {
	vdynamic *r1;
	r1 = r0->__srcCustom;
	return r1;
}

vdynamic* lime_graphics_ImageBuffer_set_src(lime__graphics__ImageBuffer r0,vdynamic* r1) {
	r0->__srcCustom = r1;
	return r1;
}

int lime_graphics_ImageBuffer_get_stride(lime__graphics__ImageBuffer r0) {
	double r1, r3;
	int r2, r4;
	r2 = r0->bitsPerPixel;
	r1 = (double)r2;
	r3 = 8.;
	r1 = r1 / r3;
	r2 = r0->width;
	r4 = (int)r1;
	r2 = r2 * r4;
	return r2;
}

