// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <lime/utils/Preloader.h>
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
int hl_types_ArrayObj_indexOf(hl__types__ArrayObj,vdynamic*,vdynamic*);
bool haxe_ds_ObjectMap_exists(haxe__ds__ObjectMap,vdynamic*);
vdynamic* haxe_ds_ObjectMap_get(haxe__ds__ObjectMap,vdynamic*);
extern hl_type t$_i32;
void haxe_ds_ObjectMap_set(haxe__ds__ObjectMap,vdynamic*,vdynamic*);
void lime_app__Event_Int_Int_Void_dispatch(lime__app___Event_Int_Int_Void,int,int);
void lime_utils_Preloader_loadedAssetLibrary(lime__utils__Preloader,String);
#include <hl/types/ArrayDyn.h>
extern hl_type t$vrt_329ffa8;
extern String s$lime_utils_Preloader_hx;
extern hl_type t$String;
extern String s$lime_utils_Preloader;
extern String s$load;
extern hl_type t$vrt_eaa6a3b;
void lime_utils_Log_error(vdynamic*,vvirtual*);
#include <lime/app/Future.h>
extern hl_type t$fun_0ecc9bc;
extern String s$Preloading_asset_library;
void lime_utils_Log_verbose(vdynamic*,vvirtual*);
extern hl_type t$ctx_58a1c0e;
extern hl_type t$fun_8663a92;
lime__app__Future lime_app_Future_onProgress(lime__app__Future,vclosure*);
extern hl_type t$fun_0cc31ea;
void wrapt$fun_b8b6878(vclosure*,vdynamic*);
extern hl_type t$fun_b8b6878;
lime__app__Future lime_app_Future_onComplete(lime__app__Future,vclosure*);
lime__app__Future lime_app_Future_onError(lime__app__Future,vclosure*);
void lime_utils_Preloader_updateProgress(lime__utils__Preloader);
extern String s$d89a9a1;
String String___add__(String,String);
extern String s$18782ee;
#include <hl/natives.h>
String String___alloc__(vbyte*,int);
extern String s$6666cd7;
extern String s$0fbd177;
extern String s$loadedAssetLibrary;
extern String s$be570c1;
void lime_app__Event_Void_Void_dispatch(lime__app___Event_Void_Void);
bool haxe_ds_StringMap_exists(haxe__ds__StringMap,String);
void haxe_ds_StringMap_set(haxe__ds__StringMap,String,vdynamic*);
vdynamic* haxe_ds_StringMap_get(haxe__ds__StringMap,String);
extern String s$updateProgress;
extern String s$Preloading_asset_library_;
lime__app__Future lime_utils_Assets_loadLibrary(String);
extern hl_type t$ctx_9e7478e;
extern hl_type t$fun_2ee3168;
extern hl_type t$fun_e02cfa2;
extern String s$Preload_complete;
extern hl_type t$haxe_ds_StringMap;
void haxe_ds_StringMap_new(haxe__ds__StringMap);
extern hl_type t$haxe_ds_ObjectMap;
void haxe_ds_ObjectMap_new(haxe__ds__ObjectMap);
extern hl_type t$lime_app__Event_Int_Int_Void;
void lime_app__Event_Int_Int_Void_new(lime__app___Event_Int_Int_Void);
extern hl_type t$lime_app__Event_Void_Void;
void lime_app__Event_Void_Void_new(lime__app___Event_Void_Void);
extern hl_type t$hl_types_ArrayObj;
void hl_types_ArrayObj_new(hl__types__ArrayObj);
extern hl_type t$fun_9b9e45a;
void lime_app__Event_Int_Int_Void_add(lime__app___Event_Int_Int_Void,vdynamic*,bool*,int*);

void lime_utils_Preloader_addLibrary(lime__utils__Preloader r0,lime__utils__AssetLibrary r1) {
	hl__types__ArrayObj r3;
	int r2;
	r3 = r0->libraries;
	if( r3 == NULL ) hl_null_access();
	r2 = hl_types_ArrayObj_push(r3,((vdynamic*)r1));
	return;
}

void lime_utils_Preloader_addLibraryName(lime__utils__Preloader r0,String r1) {
	hl__types__ArrayObj r4;
	vdynamic *r5;
	int r3, r6;
	r4 = r0->libraryNames;
	if( r4 == NULL ) hl_null_access();
	r5 = NULL;
	r3 = hl_types_ArrayObj_indexOf(r4,((vdynamic*)r1),r5);
	r6 = -1;
	if( r3 != r6 ) goto label$e6204dd_2_9;
	r4 = r0->libraryNames;
	if( r4 == NULL ) hl_null_access();
	r3 = hl_types_ArrayObj_push(r4,((vdynamic*)r1));
	label$e6204dd_2_9:
	return;
}

void lime_utils_Preloader_load__$1(venum* r0,int r1,int r2) {
	haxe__ds__ObjectMap r5;
	bool r4;
	lime__app___Event_Int_Int_Void r14;
	lime__utils__Preloader r6, r11;
	lime__utils__AssetLibrary r7;
	vdynamic *r10, *r12;
	int r8, r9, r13;
	r6 = ((Enumt$ctx_58a1c0e*)r0)->p1;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->bytesLoadedCache;
	if( r5 == NULL ) hl_null_access();
	r7 = ((Enumt$ctx_58a1c0e*)r0)->p0;
	r4 = haxe_ds_ObjectMap_exists(r5,((vdynamic*)r7));
	if( r4 ) goto label$e6204dd_3_13;
	r6 = ((Enumt$ctx_58a1c0e*)r0)->p1;
	if( r6 == NULL ) hl_null_access();
	r8 = r6->bytesLoaded;
	r8 = r8 + r1;
	r6->bytesLoaded = r8;
	goto label$e6204dd_3_27;
	label$e6204dd_3_13:
	r6 = ((Enumt$ctx_58a1c0e*)r0)->p1;
	if( r6 == NULL ) hl_null_access();
	r8 = r6->bytesLoaded;
	r11 = ((Enumt$ctx_58a1c0e*)r0)->p1;
	if( r11 == NULL ) hl_null_access();
	r5 = r11->bytesLoadedCache;
	if( r5 == NULL ) hl_null_access();
	r7 = ((Enumt$ctx_58a1c0e*)r0)->p0;
	r10 = haxe_ds_ObjectMap_get(r5,((vdynamic*)r7));
	r12 = (vdynamic*)r10;
	r13 = r12 ? r12->v.i : 0;
	r9 = r1 - r13;
	r8 = r8 + r9;
	r6->bytesLoaded = r8;
	label$e6204dd_3_27:
	r6 = ((Enumt$ctx_58a1c0e*)r0)->p1;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->bytesLoadedCache;
	if( r5 == NULL ) hl_null_access();
	r7 = ((Enumt$ctx_58a1c0e*)r0)->p0;
	r12 = hl_alloc_dynamic(&t$_i32);
	r12->v.i = r1;
	haxe_ds_ObjectMap_set(r5,((vdynamic*)r7),((vdynamic*)r12));
	r6 = ((Enumt$ctx_58a1c0e*)r0)->p1;
	if( r6 == NULL ) hl_null_access();
	r4 = r6->simulateProgress;
	if( r4 ) goto label$e6204dd_3_49;
	r6 = ((Enumt$ctx_58a1c0e*)r0)->p1;
	if( r6 == NULL ) hl_null_access();
	r14 = r6->onProgress;
	if( r14 == NULL ) hl_null_access();
	r6 = ((Enumt$ctx_58a1c0e*)r0)->p1;
	if( r6 == NULL ) hl_null_access();
	r8 = r6->bytesLoaded;
	r6 = ((Enumt$ctx_58a1c0e*)r0)->p1;
	if( r6 == NULL ) hl_null_access();
	r9 = r6->bytesTotal;
	lime_app__Event_Int_Int_Void_dispatch(r14,r8,r9);
	label$e6204dd_3_49:
	return;
}

void lime_utils_Preloader_load__$2(venum* r0,lime__utils__AssetLibrary r1) {
	String r14;
	haxe__ds__ObjectMap r4;
	bool r3;
	lime__utils__Preloader r5, r11;
	double r9;
	lime__utils__AssetLibrary r6;
	vdynamic *r10, *r12;
	int r7, r8, r13;
	r5 = ((Enumt$ctx_58a1c0e*)r0)->p1;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->bytesLoadedCache;
	if( r4 == NULL ) hl_null_access();
	r6 = ((Enumt$ctx_58a1c0e*)r0)->p0;
	r3 = haxe_ds_ObjectMap_exists(r4,((vdynamic*)r6));
	if( r3 ) goto label$e6204dd_4_16;
	r5 = ((Enumt$ctx_58a1c0e*)r0)->p1;
	if( r5 == NULL ) hl_null_access();
	r7 = r5->bytesLoaded;
	r6 = ((Enumt$ctx_58a1c0e*)r0)->p0;
	if( r6 == NULL ) hl_null_access();
	r8 = r6->bytesTotal;
	r7 = r7 + r8;
	r5->bytesLoaded = r7;
	goto label$e6204dd_4_35;
	label$e6204dd_4_16:
	r6 = ((Enumt$ctx_58a1c0e*)r0)->p0;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->bytesTotal;
	r9 = (double)r7;
	r5 = ((Enumt$ctx_58a1c0e*)r0)->p1;
	if( r5 == NULL ) hl_null_access();
	r7 = r5->bytesLoaded;
	r8 = (int)r9;
	r11 = ((Enumt$ctx_58a1c0e*)r0)->p1;
	if( r11 == NULL ) hl_null_access();
	r4 = r11->bytesLoadedCache;
	if( r4 == NULL ) hl_null_access();
	r6 = ((Enumt$ctx_58a1c0e*)r0)->p0;
	r10 = haxe_ds_ObjectMap_get(r4,((vdynamic*)r6));
	r12 = (vdynamic*)r10;
	r13 = r12 ? r12->v.i : 0;
	r8 = r8 - r13;
	r7 = r7 + r8;
	r5->bytesLoaded = r7;
	label$e6204dd_4_35:
	r5 = ((Enumt$ctx_58a1c0e*)r0)->p1;
	if( r5 == NULL ) hl_null_access();
	r14 = NULL;
	lime_utils_Preloader_loadedAssetLibrary(r5,r14);
	return;
}

void lime_utils_Preloader_load__$3(vdynamic* r0) {
	String r3;
	vvirtual *r2, *r5;
	int r4;
	r2 = hl_alloc_virtual(&t$vrt_329ffa8);
	r3 = (String)s$lime_utils_Preloader_hx;
	if( hl_vfields(r2)[1] ) *(String*)(hl_vfields(r2)[1]) = (String)r3; else hl_dyn_setp(r2->value,37969014/*fileName*/,&t$String,r3);
	r4 = 170;
	if( hl_vfields(r2)[2] ) *(int*)(hl_vfields(r2)[2]) = (int)r4; else hl_dyn_seti(r2->value,371360620/*lineNumber*/,&t$_i32,r4);
	r3 = (String)s$lime_utils_Preloader;
	if( hl_vfields(r2)[0] ) *(String*)(hl_vfields(r2)[0]) = (String)r3; else hl_dyn_setp(r2->value,-63073762/*className*/,&t$String,r3);
	r3 = (String)s$load;
	if( hl_vfields(r2)[3] ) *(String*)(hl_vfields(r2)[3]) = (String)r3; else hl_dyn_setp(r2->value,302979532/*methodName*/,&t$String,r3);
	r5 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r2);
	lime_utils_Log_error(r0,r5);
	return;
}

void lime_utils_Preloader_load(lime__utils__Preloader r0) {
	String r11, r13;
	vvirtual *r12, *r14;
	hl__types__ArrayObj r4;
	venum *r17;
	bool r10;
	lime__app__Future r15;
	lime__utils__Preloader r1;
	vclosure *r16, *r18, *r19;
	lime__utils__AssetLibrary r7;
	vdynamic *r8;
	varray *r9;
	int r3, r5, r6;
	static vclosure cl$0 = { &t$fun_0ecc9bc, lime_utils_Preloader_load__$3, 0 };
	r1 = r0;
	r3 = 0;
	r4 = r0->libraries;
	label$e6204dd_6_3:
	if( r4 == NULL ) hl_null_access();
	r6 = r4->length;
	if( r3 >= r6 ) goto label$e6204dd_6_21;
	r6 = r4->length;
	if( ((unsigned)r3) < ((unsigned)r6) ) goto label$e6204dd_6_11;
	r7 = NULL;
	goto label$e6204dd_6_14;
	label$e6204dd_6_11:
	r9 = r4->array;
	r8 = ((vdynamic**)(r9 + 1))[r3];
	r7 = (lime__utils__AssetLibrary)r8;
	label$e6204dd_6_14:
	++r3;
	r5 = r0->bytesTotal;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->bytesTotal;
	r5 = r5 + r6;
	r0->bytesTotal = r5;
	goto label$e6204dd_6_3;
	label$e6204dd_6_21:
	r3 = -1;
	r0->loadedLibraries = r3;
	r10 = false;
	r0->preloadStarted = r10;
	r3 = 0;
	r4 = r0->libraries;
	label$e6204dd_6_27:
	if( r4 == NULL ) hl_null_access();
	r6 = r4->length;
	if( r3 >= r6 ) goto label$e6204dd_6_73;
	r6 = r4->length;
	if( ((unsigned)r3) < ((unsigned)r6) ) goto label$e6204dd_6_35;
	r7 = NULL;
	goto label$e6204dd_6_38;
	label$e6204dd_6_35:
	r9 = r4->array;
	r8 = ((vdynamic**)(r9 + 1))[r3];
	r7 = (lime__utils__AssetLibrary)r8;
	label$e6204dd_6_38:
	++r3;
	r11 = (String)s$Preloading_asset_library;
	r12 = hl_alloc_virtual(&t$vrt_329ffa8);
	r13 = (String)s$lime_utils_Preloader_hx;
	if( hl_vfields(r12)[1] ) *(String*)(hl_vfields(r12)[1]) = (String)r13; else hl_dyn_setp(r12->value,37969014/*fileName*/,&t$String,r13);
	r5 = 134;
	if( hl_vfields(r12)[2] ) *(int*)(hl_vfields(r12)[2]) = (int)r5; else hl_dyn_seti(r12->value,371360620/*lineNumber*/,&t$_i32,r5);
	r13 = (String)s$lime_utils_Preloader;
	if( hl_vfields(r12)[0] ) *(String*)(hl_vfields(r12)[0]) = (String)r13; else hl_dyn_setp(r12->value,-63073762/*className*/,&t$String,r13);
	r13 = (String)s$load;
	if( hl_vfields(r12)[3] ) *(String*)(hl_vfields(r12)[3]) = (String)r13; else hl_dyn_setp(r12->value,302979532/*methodName*/,&t$String,r13);
	r14 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r12);
	lime_utils_Log_verbose(((vdynamic*)r11),r14);
	if( r7 == NULL ) hl_null_access();
	r15 = ((lime__app__Future (*)(lime__utils__AssetLibrary))r7->$type->vobj_proto[11])(r7);
	if( r15 == NULL ) hl_null_access();
	r17 = hl_alloc_enum(&t$ctx_58a1c0e,0);
	((Enumt$ctx_58a1c0e*)r17)->p0 = (lime__utils__AssetLibrary)r7;
	((Enumt$ctx_58a1c0e*)r17)->p1 = (lime__utils__Preloader)r1;
	r16 = hl_alloc_closure_ptr(&t$fun_8663a92,lime_utils_Preloader_load__$1,r17);
	r15 = lime_app_Future_onProgress(r15,r16);
	if( r15 == NULL ) hl_null_access();
	r17 = hl_alloc_enum(&t$ctx_58a1c0e,0);
	((Enumt$ctx_58a1c0e*)r17)->p0 = (lime__utils__AssetLibrary)r7;
	((Enumt$ctx_58a1c0e*)r17)->p1 = (lime__utils__Preloader)r1;
	r18 = hl_alloc_closure_ptr(&t$fun_0cc31ea,lime_utils_Preloader_load__$2,r17);
	if( r18 ) goto label$e6204dd_6_67;
	r19 = NULL;
	goto label$e6204dd_6_68;
	label$e6204dd_6_67:
	r19 = hl_alloc_closure_ptr(&t$fun_b8b6878,wrapt$fun_b8b6878,r18);
	label$e6204dd_6_68:
	r15 = lime_app_Future_onComplete(r15,r19);
	if( r15 == NULL ) hl_null_access();
	r19 = &cl$0;
	r15 = lime_app_Future_onError(r15,r19);
	goto label$e6204dd_6_27;
	label$e6204dd_6_73:
	r3 = 0;
	r4 = r0->libraryNames;
	label$e6204dd_6_75:
	if( r4 == NULL ) hl_null_access();
	r6 = r4->length;
	if( r3 >= r6 ) goto label$e6204dd_6_92;
	r6 = r4->length;
	if( ((unsigned)r3) < ((unsigned)r6) ) goto label$e6204dd_6_83;
	r11 = NULL;
	goto label$e6204dd_6_86;
	label$e6204dd_6_83:
	r9 = r4->array;
	r8 = ((vdynamic**)(r9 + 1))[r3];
	r11 = (String)r8;
	label$e6204dd_6_86:
	++r3;
	r5 = r0->bytesTotal;
	r6 = 200;
	r5 = r5 + r6;
	r0->bytesTotal = r5;
	goto label$e6204dd_6_75;
	label$e6204dd_6_92:
	r3 = r0->loadedLibraries;
	++r3;
	r0->loadedLibraries = r3;
	r10 = true;
	r0->preloadStarted = r10;
	lime_utils_Preloader_updateProgress(r0);
	return;
}

void lime_utils_Preloader_loadedAssetLibrary(lime__utils__Preloader r0,String r1) {
	String r8, r9;
	vvirtual *r12, *r13;
	hl__types__ArrayObj r6;
	bool r5;
	int *r10;
	vbyte *r11;
	int r2, r3, r7;
	r2 = r0->loadedLibraries;
	++r2;
	r0->loadedLibraries = r2;
	r2 = r0->loadedLibraries;
	r5 = r0->preloadStarted;
	if( r5 ) goto label$e6204dd_7_7;
	++r2;
	label$e6204dd_7_7:
	r6 = r0->libraries;
	if( r6 == NULL ) hl_null_access();
	r3 = r6->length;
	r6 = r0->libraryNames;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->length;
	r3 = r3 + r7;
	if( !r1 ) goto label$e6204dd_7_45;
	r8 = (String)s$d89a9a1;
	r8 = String___add__(r8,r1);
	r9 = (String)s$18782ee;
	r8 = String___add__(r8,r9);
	r7 = r2;
	r10 = &r7;
	r11 = hl_itos(r7,r10);
	r9 = String___alloc__(r11,r7);
	r8 = String___add__(r8,r9);
	r9 = (String)s$6666cd7;
	r8 = String___add__(r8,r9);
	r7 = r3;
	r10 = &r7;
	r11 = hl_itos(r7,r10);
	r9 = String___alloc__(r11,r7);
	r8 = String___add__(r8,r9);
	r9 = (String)s$0fbd177;
	r8 = String___add__(r8,r9);
	r12 = hl_alloc_virtual(&t$vrt_329ffa8);
	r9 = (String)s$lime_utils_Preloader_hx;
	if( hl_vfields(r12)[1] ) *(String*)(hl_vfields(r12)[1]) = (String)r9; else hl_dyn_setp(r12->value,37969014/*fileName*/,&t$String,r9);
	r7 = 197;
	if( hl_vfields(r12)[2] ) *(int*)(hl_vfields(r12)[2]) = (int)r7; else hl_dyn_seti(r12->value,371360620/*lineNumber*/,&t$_i32,r7);
	r9 = (String)s$lime_utils_Preloader;
	if( hl_vfields(r12)[0] ) *(String*)(hl_vfields(r12)[0]) = (String)r9; else hl_dyn_setp(r12->value,-63073762/*className*/,&t$String,r9);
	r9 = (String)s$loadedAssetLibrary;
	if( hl_vfields(r12)[3] ) *(String*)(hl_vfields(r12)[3]) = (String)r9; else hl_dyn_setp(r12->value,302979532/*methodName*/,&t$String,r9);
	r13 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r12);
	lime_utils_Log_verbose(((vdynamic*)r8),r13);
	goto label$e6204dd_7_71;
	label$e6204dd_7_45:
	r8 = (String)s$be570c1;
	r7 = r2;
	r10 = &r7;
	r11 = hl_itos(r7,r10);
	r9 = String___alloc__(r11,r7);
	r8 = String___add__(r8,r9);
	r9 = (String)s$6666cd7;
	r8 = String___add__(r8,r9);
	r7 = r3;
	r10 = &r7;
	r11 = hl_itos(r7,r10);
	r9 = String___alloc__(r11,r7);
	r8 = String___add__(r8,r9);
	r9 = (String)s$0fbd177;
	r8 = String___add__(r8,r9);
	r12 = hl_alloc_virtual(&t$vrt_329ffa8);
	r9 = (String)s$lime_utils_Preloader_hx;
	if( hl_vfields(r12)[1] ) *(String*)(hl_vfields(r12)[1]) = (String)r9; else hl_dyn_setp(r12->value,37969014/*fileName*/,&t$String,r9);
	r7 = 201;
	if( hl_vfields(r12)[2] ) *(int*)(hl_vfields(r12)[2]) = (int)r7; else hl_dyn_seti(r12->value,371360620/*lineNumber*/,&t$_i32,r7);
	r9 = (String)s$lime_utils_Preloader;
	if( hl_vfields(r12)[0] ) *(String*)(hl_vfields(r12)[0]) = (String)r9; else hl_dyn_setp(r12->value,-63073762/*className*/,&t$String,r9);
	r9 = (String)s$loadedAssetLibrary;
	if( hl_vfields(r12)[3] ) *(String*)(hl_vfields(r12)[3]) = (String)r9; else hl_dyn_setp(r12->value,302979532/*methodName*/,&t$String,r9);
	r13 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r12);
	lime_utils_Log_verbose(((vdynamic*)r8),r13);
	label$e6204dd_7_71:
	lime_utils_Preloader_updateProgress(r0);
	return;
}

void lime_utils_Preloader_start(lime__utils__Preloader r0) {
	lime__app___Event_Void_Void r3;
	bool r2;
	r2 = r0->complete;
	if( r2 ) goto label$e6204dd_8_6;
	r2 = r0->simulateProgress;
	if( r2 ) goto label$e6204dd_8_6;
	r2 = r0->preloadComplete;
	if( r2 ) goto label$e6204dd_8_7;
	label$e6204dd_8_6:
	return;
	label$e6204dd_8_7:
	r2 = true;
	r0->complete = r2;
	r3 = r0->onComplete;
	if( r3 == NULL ) hl_null_access();
	lime_app__Event_Void_Void_dispatch(r3);
	return;
}

void lime_utils_Preloader_update(lime__utils__Preloader r0,int r1,int r2) {
	return;
}

void lime_utils_Preloader_updateProgress__$1(venum* r0,int r1,int r2) {
	String r9;
	haxe__ds__StringMap r7;
	bool r6;
	lime__app___Event_Int_Int_Void r14;
	lime__utils__Preloader r8, r13;
	vdynamic *r10, *r12;
	int r4, r5, r11;
	r5 = 0;
	if( r5 >= r2 ) goto label$e6204dd_10_74;
	r8 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r8 == NULL ) hl_null_access();
	r7 = r8->bytesTotalCache;
	if( r7 == NULL ) hl_null_access();
	r9 = ((Enumt$ctx_9e7478e*)r0)->p0;
	r6 = haxe_ds_StringMap_exists(r7,r9);
	if( r6 ) goto label$e6204dd_10_23;
	r8 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r8 == NULL ) hl_null_access();
	r7 = r8->bytesTotalCache;
	if( r7 == NULL ) hl_null_access();
	r9 = ((Enumt$ctx_9e7478e*)r0)->p0;
	r10 = hl_alloc_dynamic(&t$_i32);
	r10->v.i = r2;
	haxe_ds_StringMap_set(r7,r9,((vdynamic*)r10));
	r8 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r8 == NULL ) hl_null_access();
	r4 = r8->bytesTotal;
	r11 = 200;
	r5 = r2 - r11;
	r4 = r4 + r5;
	r8->bytesTotal = r4;
	label$e6204dd_10_23:
	if( r2 >= r1 ) goto label$e6204dd_10_25;
	r1 = r2;
	label$e6204dd_10_25:
	r8 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r8 == NULL ) hl_null_access();
	r7 = r8->bytesLoadedCache2;
	if( r7 == NULL ) hl_null_access();
	r9 = ((Enumt$ctx_9e7478e*)r0)->p0;
	r6 = haxe_ds_StringMap_exists(r7,r9);
	if( r6 ) goto label$e6204dd_10_38;
	r8 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r8 == NULL ) hl_null_access();
	r4 = r8->bytesLoaded;
	r4 = r4 + r1;
	r8->bytesLoaded = r4;
	goto label$e6204dd_10_52;
	label$e6204dd_10_38:
	r8 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r8 == NULL ) hl_null_access();
	r4 = r8->bytesLoaded;
	r13 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r13 == NULL ) hl_null_access();
	r7 = r13->bytesLoadedCache2;
	if( r7 == NULL ) hl_null_access();
	r9 = ((Enumt$ctx_9e7478e*)r0)->p0;
	r12 = haxe_ds_StringMap_get(r7,r9);
	r10 = (vdynamic*)r12;
	r11 = r10 ? r10->v.i : 0;
	r5 = r1 - r11;
	r4 = r4 + r5;
	r8->bytesLoaded = r4;
	label$e6204dd_10_52:
	r8 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r8 == NULL ) hl_null_access();
	r7 = r8->bytesLoadedCache2;
	if( r7 == NULL ) hl_null_access();
	r9 = ((Enumt$ctx_9e7478e*)r0)->p0;
	r10 = hl_alloc_dynamic(&t$_i32);
	r10->v.i = r1;
	haxe_ds_StringMap_set(r7,r9,((vdynamic*)r10));
	r8 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r8 == NULL ) hl_null_access();
	r6 = r8->simulateProgress;
	if( r6 ) goto label$e6204dd_10_74;
	r8 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r8 == NULL ) hl_null_access();
	r14 = r8->onProgress;
	if( r14 == NULL ) hl_null_access();
	r8 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r8 == NULL ) hl_null_access();
	r4 = r8->bytesLoaded;
	r8 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r8 == NULL ) hl_null_access();
	r5 = r8->bytesTotal;
	lime_app__Event_Int_Int_Void_dispatch(r14,r4,r5);
	label$e6204dd_10_74:
	return;
}

void lime_utils_Preloader_updateProgress__$2(venum* r0,lime__utils__AssetLibrary r1) {
	String r7;
	haxe__ds__StringMap r5;
	bool r4;
	lime__utils__Preloader r6, r12;
	vdynamic *r8, *r9;
	int r2, r10, r11, r13;
	r2 = 200;
	r6 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->bytesTotalCache;
	if( r5 == NULL ) hl_null_access();
	r7 = ((Enumt$ctx_9e7478e*)r0)->p0;
	r4 = haxe_ds_StringMap_exists(r5,r7);
	if( !r4 ) goto label$e6204dd_11_17;
	r6 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->bytesTotalCache;
	if( r5 == NULL ) hl_null_access();
	r7 = ((Enumt$ctx_9e7478e*)r0)->p0;
	r8 = haxe_ds_StringMap_get(r5,r7);
	r9 = (vdynamic*)r8;
	r10 = r9 ? r9->v.i : 0;
	r2 = r10;
	label$e6204dd_11_17:
	r6 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->bytesLoadedCache2;
	if( r5 == NULL ) hl_null_access();
	r7 = ((Enumt$ctx_9e7478e*)r0)->p0;
	r4 = haxe_ds_StringMap_exists(r5,r7);
	if( r4 ) goto label$e6204dd_11_30;
	r6 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r6 == NULL ) hl_null_access();
	r10 = r6->bytesLoaded;
	r10 = r10 + r2;
	r6->bytesLoaded = r10;
	goto label$e6204dd_11_44;
	label$e6204dd_11_30:
	r6 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r6 == NULL ) hl_null_access();
	r10 = r6->bytesLoaded;
	r12 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r12 == NULL ) hl_null_access();
	r5 = r12->bytesLoadedCache2;
	if( r5 == NULL ) hl_null_access();
	r7 = ((Enumt$ctx_9e7478e*)r0)->p0;
	r8 = haxe_ds_StringMap_get(r5,r7);
	r9 = (vdynamic*)r8;
	r13 = r9 ? r9->v.i : 0;
	r11 = r2 - r13;
	r10 = r10 + r11;
	r6->bytesLoaded = r10;
	label$e6204dd_11_44:
	r6 = ((Enumt$ctx_9e7478e*)r0)->p1;
	if( r6 == NULL ) hl_null_access();
	r7 = ((Enumt$ctx_9e7478e*)r0)->p0;
	lime_utils_Preloader_loadedAssetLibrary(r6,r7);
	return;
}

void lime_utils_Preloader_updateProgress__$3(vdynamic* r0) {
	String r3;
	vvirtual *r2, *r5;
	int r4;
	r2 = hl_alloc_virtual(&t$vrt_329ffa8);
	r3 = (String)s$lime_utils_Preloader_hx;
	if( hl_vfields(r2)[1] ) *(String*)(hl_vfields(r2)[1]) = (String)r3; else hl_dyn_setp(r2->value,37969014/*fileName*/,&t$String,r3);
	r4 = 293;
	if( hl_vfields(r2)[2] ) *(int*)(hl_vfields(r2)[2]) = (int)r4; else hl_dyn_seti(r2->value,371360620/*lineNumber*/,&t$_i32,r4);
	r3 = (String)s$lime_utils_Preloader;
	if( hl_vfields(r2)[0] ) *(String*)(hl_vfields(r2)[0]) = (String)r3; else hl_dyn_setp(r2->value,-63073762/*className*/,&t$String,r3);
	r3 = (String)s$updateProgress;
	if( hl_vfields(r2)[3] ) *(String*)(hl_vfields(r2)[3]) = (String)r3; else hl_dyn_setp(r2->value,302979532/*methodName*/,&t$String,r3);
	r5 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r2);
	lime_utils_Log_error(r0,r5);
	return;
}

void lime_utils_Preloader_updateProgress(lime__utils__Preloader r0) {
	String r9, r12, r13;
	vvirtual *r14, *r15;
	hl__types__ArrayObj r7;
	venum *r18;
	bool r3;
	lime__app__Future r16;
	lime__app___Event_Int_Int_Void r4;
	lime__utils__Preloader r1;
	vclosure *r17, *r19, *r20;
	vdynamic *r10;
	varray *r11;
	int r5, r6, r8;
	static vclosure cl$0 = { &t$fun_0ecc9bc, lime_utils_Preloader_updateProgress__$3, 0 };
	r1 = r0;
	r3 = r0->simulateProgress;
	if( r3 ) goto label$e6204dd_13_8;
	r4 = r0->onProgress;
	if( r4 == NULL ) hl_null_access();
	r5 = r0->bytesLoaded;
	r6 = r0->bytesTotal;
	lime_app__Event_Int_Int_Void_dispatch(r4,r5,r6);
	label$e6204dd_13_8:
	r5 = r0->loadedLibraries;
	r7 = r0->libraries;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->length;
	if( r5 != r6 ) goto label$e6204dd_13_65;
	r3 = r0->initLibraryNames;
	if( r3 ) goto label$e6204dd_13_65;
	r3 = true;
	r0->initLibraryNames = r3;
	r5 = 0;
	r7 = r0->libraryNames;
	label$e6204dd_13_19:
	if( r7 == NULL ) hl_null_access();
	r8 = r7->length;
	if( r5 >= r8 ) goto label$e6204dd_13_65;
	r8 = r7->length;
	if( ((unsigned)r5) < ((unsigned)r8) ) goto label$e6204dd_13_27;
	r9 = NULL;
	goto label$e6204dd_13_30;
	label$e6204dd_13_27:
	r11 = r7->array;
	r10 = ((vdynamic**)(r11 + 1))[r5];
	r9 = (String)r10;
	label$e6204dd_13_30:
	++r5;
	r12 = (String)s$Preloading_asset_library_;
	r12 = String___add__(r12,r9);
	r14 = hl_alloc_virtual(&t$vrt_329ffa8);
	r13 = (String)s$lime_utils_Preloader_hx;
	if( hl_vfields(r14)[1] ) *(String*)(hl_vfields(r14)[1]) = (String)r13; else hl_dyn_setp(r14->value,37969014/*fileName*/,&t$String,r13);
	r6 = 239;
	if( hl_vfields(r14)[2] ) *(int*)(hl_vfields(r14)[2]) = (int)r6; else hl_dyn_seti(r14->value,371360620/*lineNumber*/,&t$_i32,r6);
	r13 = (String)s$lime_utils_Preloader;
	if( hl_vfields(r14)[0] ) *(String*)(hl_vfields(r14)[0]) = (String)r13; else hl_dyn_setp(r14->value,-63073762/*className*/,&t$String,r13);
	r13 = (String)s$updateProgress;
	if( hl_vfields(r14)[3] ) *(String*)(hl_vfields(r14)[3]) = (String)r13; else hl_dyn_setp(r14->value,302979532/*methodName*/,&t$String,r13);
	r15 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r14);
	lime_utils_Log_verbose(((vdynamic*)r12),r15);
	r16 = lime_utils_Assets_loadLibrary(r9);
	if( r16 == NULL ) hl_null_access();
	r18 = hl_alloc_enum(&t$ctx_9e7478e,0);
	((Enumt$ctx_9e7478e*)r18)->p0 = (String)r9;
	((Enumt$ctx_9e7478e*)r18)->p1 = (lime__utils__Preloader)r1;
	r17 = hl_alloc_closure_ptr(&t$fun_2ee3168,lime_utils_Preloader_updateProgress__$1,r18);
	r16 = lime_app_Future_onProgress(r16,r17);
	if( r16 == NULL ) hl_null_access();
	r18 = hl_alloc_enum(&t$ctx_9e7478e,0);
	((Enumt$ctx_9e7478e*)r18)->p0 = (String)r9;
	((Enumt$ctx_9e7478e*)r18)->p1 = (lime__utils__Preloader)r1;
	r19 = hl_alloc_closure_ptr(&t$fun_e02cfa2,lime_utils_Preloader_updateProgress__$2,r18);
	if( r19 ) goto label$e6204dd_13_59;
	r20 = NULL;
	goto label$e6204dd_13_60;
	label$e6204dd_13_59:
	r20 = hl_alloc_closure_ptr(&t$fun_b8b6878,wrapt$fun_b8b6878,r19);
	label$e6204dd_13_60:
	r16 = lime_app_Future_onComplete(r16,r20);
	if( r16 == NULL ) hl_null_access();
	r20 = &cl$0;
	r16 = lime_app_Future_onError(r16,r20);
	goto label$e6204dd_13_19;
	label$e6204dd_13_65:
	r3 = r0->simulateProgress;
	if( r3 ) goto label$e6204dd_13_93;
	r5 = r0->loadedLibraries;
	r7 = r0->libraries;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->length;
	r7 = r0->libraryNames;
	if( r7 == NULL ) hl_null_access();
	r8 = r7->length;
	r6 = r6 + r8;
	if( r5 != r6 ) goto label$e6204dd_13_93;
	r3 = r0->preloadComplete;
	if( r3 ) goto label$e6204dd_13_92;
	r3 = true;
	r0->preloadComplete = r3;
	r9 = (String)s$Preload_complete;
	r14 = hl_alloc_virtual(&t$vrt_329ffa8);
	r12 = (String)s$lime_utils_Preloader_hx;
	if( hl_vfields(r14)[1] ) *(String*)(hl_vfields(r14)[1]) = (String)r12; else hl_dyn_setp(r14->value,37969014/*fileName*/,&t$String,r12);
	r5 = 306;
	if( hl_vfields(r14)[2] ) *(int*)(hl_vfields(r14)[2]) = (int)r5; else hl_dyn_seti(r14->value,371360620/*lineNumber*/,&t$_i32,r5);
	r12 = (String)s$lime_utils_Preloader;
	if( hl_vfields(r14)[0] ) *(String*)(hl_vfields(r14)[0]) = (String)r12; else hl_dyn_setp(r14->value,-63073762/*className*/,&t$String,r12);
	r12 = (String)s$updateProgress;
	if( hl_vfields(r14)[3] ) *(String*)(hl_vfields(r14)[3]) = (String)r12; else hl_dyn_setp(r14->value,302979532/*methodName*/,&t$String,r12);
	r15 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r14);
	lime_utils_Log_verbose(((vdynamic*)r9),r15);
	label$e6204dd_13_92:
	lime_utils_Preloader_start(r0);
	label$e6204dd_13_93:
	return;
}

void lime_utils_Preloader_new(lime__utils__Preloader r0) {
	bool *r9;
	haxe__ds__ObjectMap r3;
	hl__types__ArrayObj r7;
	haxe__ds__StringMap r1;
	lime__app___Event_Void_Void r5;
	lime__app___Event_Int_Int_Void r4;
	vclosure *r8;
	int *r10;
	int r6;
	r1 = (haxe__ds__StringMap)hl_alloc_obj(&t$haxe_ds_StringMap);
	haxe_ds_StringMap_new(r1);
	r0->bytesTotalCache = r1;
	r1 = (haxe__ds__StringMap)hl_alloc_obj(&t$haxe_ds_StringMap);
	haxe_ds_StringMap_new(r1);
	r0->bytesLoadedCache2 = r1;
	r3 = (haxe__ds__ObjectMap)hl_alloc_obj(&t$haxe_ds_ObjectMap);
	haxe_ds_ObjectMap_new(r3);
	r0->bytesLoadedCache = r3;
	r4 = (lime__app___Event_Int_Int_Void)hl_alloc_obj(&t$lime_app__Event_Int_Int_Void);
	lime_app__Event_Int_Int_Void_new(r4);
	r0->onProgress = r4;
	r5 = (lime__app___Event_Void_Void)hl_alloc_obj(&t$lime_app__Event_Void_Void);
	lime_app__Event_Void_Void_new(r5);
	r0->onComplete = r5;
	r6 = 0;
	r0->bytesLoaded = r6;
	r6 = 0;
	r0->bytesTotal = r6;
	r7 = (hl__types__ArrayObj)hl_alloc_obj(&t$hl_types_ArrayObj);
	hl_types_ArrayObj_new(r7);
	r0->libraries = r7;
	r7 = (hl__types__ArrayObj)hl_alloc_obj(&t$hl_types_ArrayObj);
	hl_types_ArrayObj_new(r7);
	r0->libraryNames = r7;
	r4 = r0->onProgress;
	if( r4 == NULL ) hl_null_access();
	r8 = hl_alloc_closure_ptr(&t$fun_9b9e45a,lime_utils_Preloader_update,r0);
	r9 = NULL;
	r10 = NULL;
	lime_app__Event_Int_Int_Void_add(r4,((vdynamic*)r8),r9,r10);
	return;
}

