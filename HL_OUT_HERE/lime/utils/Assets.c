// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <lime/utils/Assets.h>
#include <lime/utils/AssetManifest.h>
extern hl_type t$lime_utils_AssetManifest;
extern hl_type t$_dyn;
#include <lime/utils/AssetBundle.h>
extern hl_type t$lime_utils_AssetBundle;
extern String s$BINARY;
extern String s$853ae90;
int String_indexOf(String,String,vdynamic*);
extern hl_type t$_i32;
String String_substring(String,int,vdynamic*);
lime__utils__AssetLibrary lime_utils_Assets_getLibrary(String);
#include <hl/types/ArrayDyn.h>
extern lime__utils__$Assets g$_lime_utils_Assets;
#include <hl/natives.h>
vdynamic* haxe_ds_StringMap_get(haxe__ds__StringMap,String);
bool lime_utils_Assets_isValidImage(lime__graphics__Image);
bool lime_utils_Assets_isValidAudio(lime__media__AudioBuffer);
extern String s$Not_sure_how_to_get_template_;
String String___add__(String,String);
void lime_utils_AssetCache_set(lime__utils__AssetCache,String,String,vdynamic*);
extern String s$_asset_;
extern String s$4bd8b68;
extern hl_type t$vrt_329ffa8;
extern String s$lime_utils_Assets_hx;
extern hl_type t$String;
extern String s$lime_utils_Assets;
extern String s$getAsset;
extern hl_type t$vrt_eaa6a3b;
void lime_utils_Log_error(vdynamic*,vvirtual*);
extern String s$There_is_no_;
extern String s$_asset_with_an_ID_of_;
extern String s$b15835f;
String lime_utils_Assets___libraryNotFound(String);
extern String s$SOUND;
extern hl_type t$lime_media_AudioBuffer;
extern hl_type t$haxe_io_Bytes;
extern String s$FONT;
extern hl_type t$lime_text_Font;
extern String s$IMAGE;
extern hl_type t$lime_graphics_Image;
extern String s$;
int String___compare(String,vdynamic*);
extern String s$default;
extern String s$cc274fe;
extern String s$getPath;
extern String s$TEXT;
bool haxe_ds_StringMap_exists(haxe__ds__StringMap,String);
bool lime_utils_AssetCache_exists(lime__utils__AssetCache,String,String);
#include <lime/graphics/ImageBuffer.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
vvirtual* haxe_ds_StringMap_iterator(haxe__ds__StringMap);
extern hl_type t$vrt_bd3367f;
extern hl_type t$fun_bf7849e;
extern hl_type t$fun_488e867;
hl__types__ArrayObj hl_types_ArrayObj_concat(hl__types__ArrayObj,hl__types__ArrayObj);
lime__app__Future lime_app_Future_withValue(vdynamic*);
extern hl_type t$ctx_9633d1d;
extern hl_type t$fun_63afcb6;
lime__app__Future lime_app_Future_onComplete(lime__app__Future,vclosure*);
lime__app__Future lime_app_Future_withError(vdynamic*);
extern String s$Cannot_load_bundle_for_library_;
lime__app__Promise lime_app_Promise_error(lime__app__Promise,vdynamic*);
lime__utils__AssetLibrary lime_utils_AssetLibrary_fromBundle(lime__utils__AssetBundle);
extern String s$Cannot_open_library_;
void haxe_ds_StringMap_set(haxe__ds__StringMap,String,vdynamic*);
void lime_app__Event_Void_Void_dispatch(lime__app___Event_Void_Void);
extern hl_type t$fun_f8007d4;
void lime_app__Event_Void_Void_add(lime__app___Event_Void_Void,vdynamic*,bool*,int*);
lime__app__Promise lime_app_Promise_completeWith(lime__app__Promise,lime__app__Future);
extern String s$49c9327;
extern String s$55de694;
lime__utils__AssetLibrary lime_utils_AssetLibrary_fromManifest(lime__utils__AssetManifest);
extern hl_type t$lime_app_Promise;
void lime_app_Promise_new(lime__app__Promise);
lime__app__Future lime_utils_AssetBundle_loadFromFile(String);
extern hl_type t$ctx_74b34e0;
extern hl_type t$fun_addfd8d;
extern hl_type t$fun_20dec9c;
extern hl_type t$fun_53ea95b;
lime__app__Future lime_app_Future_onError(lime__app__Future,vclosure*);
String haxe_io_Path_directory(String);
extern String s$_bundle;
bool StringTools_endsWith(String,String);
extern String s$_library_json;
String lime_utils_Assets___cacheBreak(String);
lime__app__Future lime_utils_AssetManifest_loadFromFile(String,String);
extern hl_type t$fun_e4bb8c6;
extern hl_type t$fun_50508d5;
void lime_utils_Assets_library_onChange(void);
extern hl_type t$fun_7b48b4f;
void lime_utils_Assets_unloadLibrary(String);
void lime_utils_AssetCache_clear(lime__utils__AssetCache,String);
void lime_app__Event_Void_Void_remove(lime__app___Event_Void_Void,vdynamic*);
bool haxe_ds_StringMap_remove(haxe__ds__StringMap,String);
#include <lime/app/Application.h>
#include <lime/utils/Preloader.h>
extern lime__app__$Application g$_lime_app_Application;
extern String s$04f6032;
extern String s$_or_it_is_not_yet_preloaded;

void lime_utils_Assets_loadLibrary__$5(vclosure* r0,vdynamic* r1) {
	lime__utils__AssetManifest r2;
	r2 = (lime__utils__AssetManifest)hl_dyn_castp(&r1,&t$_dyn,&t$lime_utils_AssetManifest);
	r0->hasValue ? ((void (*)(vdynamic*,lime__utils__AssetManifest))r0->fun)((vdynamic*)r0->value,r2) : ((void (*)(lime__utils__AssetManifest))r0->fun)(r2);
	return;
}

void lime_utils_Assets_loadLibrary__$2(vclosure* r0,vdynamic* r1) {
	lime__utils__AssetBundle r2;
	r2 = (lime__utils__AssetBundle)hl_dyn_castp(&r1,&t$_dyn,&t$lime_utils_AssetBundle);
	r0->hasValue ? ((void (*)(vdynamic*,lime__utils__AssetBundle))r0->fun)((vdynamic*)r0->value,r2) : ((void (*)(lime__utils__AssetBundle))r0->fun)(r2);
	return;
}

bool lime_utils_Assets_exists(String r0,String r1) {
	String r2, r4, r5;
	bool r10;
	lime__utils__AssetLibrary r9;
	vdynamic *r6;
	int r3, r7, r8;
	if( r1 ) goto label$9452283_3_3;
	r2 = (String)s$BINARY;
	r1 = r2;
	label$9452283_3_3:
	if( r0 == NULL ) hl_null_access();
	r5 = (String)s$853ae90;
	r6 = NULL;
	r3 = String_indexOf(r0,r5,r6);
	r7 = 0;
	r6 = hl_alloc_dynamic(&t$_i32);
	r6->v.i = r3;
	r4 = String_substring(r0,r7,r6);
	r8 = 1;
	r7 = r3 + r8;
	r6 = NULL;
	r5 = String_substring(r0,r7,r6);
	r9 = lime_utils_Assets_getLibrary(r4);
	if( !r9 ) goto label$9452283_3_19;
	if( r9 == NULL ) hl_null_access();
	r10 = ((bool (*)(lime__utils__AssetLibrary,String,String))r9->$type->vobj_proto[0])(r9,r5,r1);
	return r10;
	label$9452283_3_19:
	r10 = false;
	return r10;
}

vdynamic* lime_utils_Assets_getAsset(String r0,String r1,bool r2) {
	lime__graphics__Image r14;
	String r7, r16, r17, r21, r22;
	lime__media__AudioBuffer r15;
	vvirtual *r23, *r24;
	haxe__ds__StringMap r13;
	bool r4;
	lime__utils__$Assets r6;
	lime__utils__AssetLibrary r20;
	lime__utils__AssetCache r5;
	vdynamic *r12, *r18;
	vbyte *r10, *r11;
	int r8, r9, r19;
	if( !r2 ) goto label$9452283_4_107;
	r6 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r5 = r6->cache;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->enabled;
	if( !r4 ) goto label$9452283_4_107;
	if( !r1 ) goto label$9452283_4_15;
	r8 = r1->length;
	r9 = 4;
	if( r8 != r9 ) goto label$9452283_4_15;
	r10 = r1->bytes;
	r11 = (vbyte*)USTR("FONT");
	r8 = hl_string_compare(r10,r11,r8);
	r9 = 0;
	if( r8 == r9 ) goto label$9452283_4_71;
	label$9452283_4_15:
	if( !r1 ) goto label$9452283_4_24;
	r8 = r1->length;
	r9 = 5;
	if( r8 != r9 ) goto label$9452283_4_24;
	r10 = r1->bytes;
	r11 = (vbyte*)USTR("IMAGE");
	r8 = hl_string_compare(r10,r11,r8);
	r9 = 0;
	if( r8 == r9 ) goto label$9452283_4_80;
	label$9452283_4_24:
	if( !r1 ) goto label$9452283_4_33;
	r8 = r1->length;
	r9 = 5;
	if( r8 != r9 ) goto label$9452283_4_33;
	r10 = r1->bytes;
	r11 = (vbyte*)USTR("MUSIC");
	r8 = hl_string_compare(r10,r11,r8);
	r9 = 0;
	if( r8 == r9 ) goto label$9452283_4_91;
	label$9452283_4_33:
	if( !r1 ) goto label$9452283_4_42;
	r8 = r1->length;
	r9 = 5;
	if( r8 != r9 ) goto label$9452283_4_42;
	r10 = r1->bytes;
	r11 = (vbyte*)USTR("SOUND");
	r8 = hl_string_compare(r10,r11,r8);
	r9 = 0;
	if( r8 == r9 ) goto label$9452283_4_91;
	label$9452283_4_42:
	if( !r1 ) goto label$9452283_4_51;
	r8 = r1->length;
	r9 = 8;
	if( r8 != r9 ) goto label$9452283_4_51;
	r10 = r1->bytes;
	r11 = (vbyte*)USTR("TEMPLATE");
	r8 = hl_string_compare(r10,r11,r8);
	r9 = 0;
	if( r8 == r9 ) goto label$9452283_4_102;
	label$9452283_4_51:
	if( !r1 ) goto label$9452283_4_60;
	r8 = r1->length;
	r9 = 6;
	if( r8 != r9 ) goto label$9452283_4_60;
	r10 = r1->bytes;
	r11 = (vbyte*)USTR("BINARY");
	r8 = hl_string_compare(r10,r11,r8);
	r9 = 0;
	if( r8 == r9 ) goto label$9452283_4_105;
	label$9452283_4_60:
	if( !r1 ) goto label$9452283_4_69;
	r8 = r1->length;
	r9 = 4;
	if( r8 != r9 ) goto label$9452283_4_69;
	r10 = r1->bytes;
	r11 = (vbyte*)USTR("TEXT");
	r8 = hl_string_compare(r10,r11,r8);
	r9 = 0;
	if( r8 == r9 ) goto label$9452283_4_105;
	label$9452283_4_69:
	r12 = NULL;
	return r12;
	label$9452283_4_71:
	r6 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r5 = r6->cache;
	if( r5 == NULL ) hl_null_access();
	r13 = r5->font;
	if( r13 == NULL ) hl_null_access();
	r12 = haxe_ds_StringMap_get(r13,r0);
	if( !r12 ) goto label$9452283_4_79;
	return r12;
	label$9452283_4_79:
	goto label$9452283_4_107;
	label$9452283_4_80:
	r6 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r5 = r6->cache;
	if( r5 == NULL ) hl_null_access();
	r13 = r5->image;
	if( r13 == NULL ) hl_null_access();
	r12 = haxe_ds_StringMap_get(r13,r0);
	r14 = (lime__graphics__Image)r12;
	r4 = lime_utils_Assets_isValidImage(r14);
	if( !r4 ) goto label$9452283_4_90;
	return ((vdynamic*)r14);
	label$9452283_4_90:
	goto label$9452283_4_107;
	label$9452283_4_91:
	r6 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r5 = r6->cache;
	if( r5 == NULL ) hl_null_access();
	r13 = r5->audio;
	if( r13 == NULL ) hl_null_access();
	r12 = haxe_ds_StringMap_get(r13,r0);
	r15 = (lime__media__AudioBuffer)r12;
	r4 = lime_utils_Assets_isValidAudio(r15);
	if( !r4 ) goto label$9452283_4_101;
	return ((vdynamic*)r15);
	label$9452283_4_101:
	goto label$9452283_4_107;
	label$9452283_4_102:
	r7 = (String)s$Not_sure_how_to_get_template_;
	r7 = String___add__(r7,r0);
	hl_throw((vdynamic*)r7);
	label$9452283_4_105:
	r4 = false;
	r2 = r4;
	label$9452283_4_107:
	if( r0 == NULL ) hl_null_access();
	r17 = (String)s$853ae90;
	r18 = NULL;
	r8 = String_indexOf(r0,r17,r18);
	r9 = 0;
	r18 = hl_alloc_dynamic(&t$_i32);
	r18->v.i = r8;
	r16 = String_substring(r0,r9,r18);
	r19 = 1;
	r9 = r8 + r19;
	r18 = NULL;
	r17 = String_substring(r0,r9,r18);
	r20 = lime_utils_Assets_getLibrary(r16);
	if( !r20 ) goto label$9452283_4_173;
	if( r20 == NULL ) hl_null_access();
	r4 = ((bool (*)(lime__utils__AssetLibrary,String,String))r20->$type->vobj_proto[0])(r20,r17,r1);
	if( !r4 ) goto label$9452283_4_154;
	r4 = ((bool (*)(lime__utils__AssetLibrary,String,String))r20->$type->vobj_proto[8])(r20,r17,r1);
	if( !r4 ) goto label$9452283_4_137;
	r12 = ((vdynamic* (*)(lime__utils__AssetLibrary,String,String))r20->$type->vobj_proto[1])(r20,r17,r1);
	if( !r2 ) goto label$9452283_4_136;
	r6 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r5 = r6->cache;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->enabled;
	if( !r4 ) goto label$9452283_4_136;
	r6 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r5 = r6->cache;
	if( r5 == NULL ) hl_null_access();
	lime_utils_AssetCache_set(r5,r0,r1,r12);
	label$9452283_4_136:
	return r12;
	label$9452283_4_137:
	r22 = (String)s$_asset_;
	r21 = String___add__(r1,r22);
	r21 = String___add__(r21,r0);
	r22 = (String)s$4bd8b68;
	r21 = String___add__(r21,r22);
	r23 = hl_alloc_virtual(&t$vrt_329ffa8);
	r22 = (String)s$lime_utils_Assets_hx;
	if( hl_vfields(r23)[1] ) *(String*)(hl_vfields(r23)[1]) = (String)r22; else hl_dyn_setp(r23->value,37969014/*fileName*/,&t$String,r22);
	r9 = 133;
	if( hl_vfields(r23)[2] ) *(int*)(hl_vfields(r23)[2]) = (int)r9; else hl_dyn_seti(r23->value,371360620/*lineNumber*/,&t$_i32,r9);
	r22 = (String)s$lime_utils_Assets;
	if( hl_vfields(r23)[0] ) *(String*)(hl_vfields(r23)[0]) = (String)r22; else hl_dyn_setp(r23->value,-63073762/*className*/,&t$String,r22);
	r22 = (String)s$getAsset;
	if( hl_vfields(r23)[3] ) *(String*)(hl_vfields(r23)[3]) = (String)r22; else hl_dyn_setp(r23->value,302979532/*methodName*/,&t$String,r22);
	r24 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r23);
	lime_utils_Log_error(((vdynamic*)r21),r24);
	goto label$9452283_4_172;
	label$9452283_4_154:
	r21 = (String)s$There_is_no_;
	r21 = String___add__(r21,r1);
	r22 = (String)s$_asset_with_an_ID_of_;
	r21 = String___add__(r21,r22);
	r21 = String___add__(r21,r0);
	r22 = (String)s$b15835f;
	r21 = String___add__(r21,r22);
	r23 = hl_alloc_virtual(&t$vrt_329ffa8);
	r22 = (String)s$lime_utils_Assets_hx;
	if( hl_vfields(r23)[1] ) *(String*)(hl_vfields(r23)[1]) = (String)r22; else hl_dyn_setp(r23->value,37969014/*fileName*/,&t$String,r22);
	r9 = 138;
	if( hl_vfields(r23)[2] ) *(int*)(hl_vfields(r23)[2]) = (int)r9; else hl_dyn_seti(r23->value,371360620/*lineNumber*/,&t$_i32,r9);
	r22 = (String)s$lime_utils_Assets;
	if( hl_vfields(r23)[0] ) *(String*)(hl_vfields(r23)[0]) = (String)r22; else hl_dyn_setp(r23->value,-63073762/*className*/,&t$String,r22);
	r22 = (String)s$getAsset;
	if( hl_vfields(r23)[3] ) *(String*)(hl_vfields(r23)[3]) = (String)r22; else hl_dyn_setp(r23->value,302979532/*methodName*/,&t$String,r22);
	r24 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r23);
	lime_utils_Log_error(((vdynamic*)r21),r24);
	label$9452283_4_172:
	goto label$9452283_4_185;
	label$9452283_4_173:
	r21 = lime_utils_Assets___libraryNotFound(r16);
	r23 = hl_alloc_virtual(&t$vrt_329ffa8);
	r22 = (String)s$lime_utils_Assets_hx;
	if( hl_vfields(r23)[1] ) *(String*)(hl_vfields(r23)[1]) = (String)r22; else hl_dyn_setp(r23->value,37969014/*fileName*/,&t$String,r22);
	r9 = 143;
	if( hl_vfields(r23)[2] ) *(int*)(hl_vfields(r23)[2]) = (int)r9; else hl_dyn_seti(r23->value,371360620/*lineNumber*/,&t$_i32,r9);
	r22 = (String)s$lime_utils_Assets;
	if( hl_vfields(r23)[0] ) *(String*)(hl_vfields(r23)[0]) = (String)r22; else hl_dyn_setp(r23->value,-63073762/*className*/,&t$String,r22);
	r22 = (String)s$getAsset;
	if( hl_vfields(r23)[3] ) *(String*)(hl_vfields(r23)[3]) = (String)r22; else hl_dyn_setp(r23->value,302979532/*methodName*/,&t$String,r22);
	r24 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r23);
	lime_utils_Log_error(((vdynamic*)r21),r24);
	label$9452283_4_185:
	r12 = NULL;
	return r12;
}

lime__media__AudioBuffer lime_utils_Assets_getAudioBuffer(String r0,bool* r1) {
	String r4;
	lime__media__AudioBuffer r5;
	bool r2;
	vdynamic *r3;
	if( r1 ) goto label$9452283_5_3;
	r2 = true;
	goto label$9452283_5_4;
	label$9452283_5_3:
	r2 = *r1;
	label$9452283_5_4:
	r4 = (String)s$SOUND;
	r3 = lime_utils_Assets_getAsset(r0,r4,r2);
	r5 = (lime__media__AudioBuffer)hl_dyn_castp(&r3,&t$_dyn,&t$lime_media_AudioBuffer);
	return r5;
}

haxe__io__Bytes lime_utils_Assets_getBytes(String r0) {
	String r2;
	haxe__io__Bytes r4;
	bool r3;
	vdynamic *r1;
	r2 = (String)s$BINARY;
	r3 = false;
	r1 = lime_utils_Assets_getAsset(r0,r2,r3);
	r4 = (haxe__io__Bytes)hl_dyn_castp(&r1,&t$_dyn,&t$haxe_io_Bytes);
	return r4;
}

lime__text__Font lime_utils_Assets_getFont(String r0,bool* r1) {
	lime__text__Font r5;
	String r4;
	bool r2;
	vdynamic *r3;
	if( r1 ) goto label$9452283_7_3;
	r2 = true;
	goto label$9452283_7_4;
	label$9452283_7_3:
	r2 = *r1;
	label$9452283_7_4:
	r4 = (String)s$FONT;
	r3 = lime_utils_Assets_getAsset(r0,r4,r2);
	r5 = (lime__text__Font)hl_dyn_castp(&r3,&t$_dyn,&t$lime_text_Font);
	return r5;
}

lime__graphics__Image lime_utils_Assets_getImage(String r0,bool* r1) {
	lime__graphics__Image r5;
	String r4;
	bool r2;
	vdynamic *r3;
	if( r1 ) goto label$9452283_8_3;
	r2 = true;
	goto label$9452283_8_4;
	label$9452283_8_3:
	r2 = *r1;
	label$9452283_8_4:
	r4 = (String)s$IMAGE;
	r3 = lime_utils_Assets_getAsset(r0,r4,r2);
	r5 = (lime__graphics__Image)hl_dyn_castp(&r3,&t$_dyn,&t$lime_graphics_Image);
	return r5;
}

lime__utils__AssetLibrary lime_utils_Assets_getLibrary(String r0) {
	String r1, r2;
	haxe__ds__StringMap r4;
	lime__utils__$Assets r5;
	lime__utils__AssetLibrary r6;
	vdynamic *r3;
	if( !r0 ) goto label$9452283_9_3;
	r2 = (String)s$;
	if( r0 != r2 && (!r0 || !r2 || String___compare(r0,(vdynamic*)r2) != 0) ) goto label$9452283_9_5;
	label$9452283_9_3:
	r1 = (String)s$default;
	r0 = r1;
	label$9452283_9_5:
	r5 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r4 = r5->libraries;
	if( r4 == NULL ) hl_null_access();
	r3 = haxe_ds_StringMap_get(r4,r0);
	r6 = (lime__utils__AssetLibrary)r3;
	return r6;
}

String lime_utils_Assets_getPath(String r0) {
	String r3, r4, r9, r11;
	vvirtual *r12, *r13;
	bool r10;
	lime__utils__AssetLibrary r8;
	vdynamic *r5;
	int r2, r6, r7;
	if( r0 == NULL ) hl_null_access();
	r4 = (String)s$853ae90;
	r5 = NULL;
	r2 = String_indexOf(r0,r4,r5);
	r6 = 0;
	r5 = hl_alloc_dynamic(&t$_i32);
	r5->v.i = r2;
	r3 = String_substring(r0,r6,r5);
	r7 = 1;
	r6 = r2 + r7;
	r5 = NULL;
	r4 = String_substring(r0,r6,r5);
	r8 = lime_utils_Assets_getLibrary(r3);
	if( !r8 ) goto label$9452283_10_35;
	if( r8 == NULL ) hl_null_access();
	r11 = NULL;
	r10 = ((bool (*)(lime__utils__AssetLibrary,String,String))r8->$type->vobj_proto[0])(r8,r4,r11);
	if( !r10 ) goto label$9452283_10_19;
	r9 = ((String (*)(lime__utils__AssetLibrary,String))r8->$type->vobj_proto[6])(r8,r4);
	return r9;
	label$9452283_10_19:
	r9 = (String)s$cc274fe;
	r9 = String___add__(r9,r0);
	r11 = (String)s$b15835f;
	r9 = String___add__(r9,r11);
	r12 = hl_alloc_virtual(&t$vrt_329ffa8);
	r11 = (String)s$lime_utils_Assets_hx;
	if( hl_vfields(r12)[1] ) *(String*)(hl_vfields(r12)[1]) = (String)r11; else hl_dyn_setp(r12->value,37969014/*fileName*/,&t$String,r11);
	r6 = 224;
	if( hl_vfields(r12)[2] ) *(int*)(hl_vfields(r12)[2]) = (int)r6; else hl_dyn_seti(r12->value,371360620/*lineNumber*/,&t$_i32,r6);
	r11 = (String)s$lime_utils_Assets;
	if( hl_vfields(r12)[0] ) *(String*)(hl_vfields(r12)[0]) = (String)r11; else hl_dyn_setp(r12->value,-63073762/*className*/,&t$String,r11);
	r11 = (String)s$getPath;
	if( hl_vfields(r12)[3] ) *(String*)(hl_vfields(r12)[3]) = (String)r11; else hl_dyn_setp(r12->value,302979532/*methodName*/,&t$String,r11);
	r13 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r12);
	lime_utils_Log_error(((vdynamic*)r9),r13);
	goto label$9452283_10_47;
	label$9452283_10_35:
	r9 = lime_utils_Assets___libraryNotFound(r3);
	r12 = hl_alloc_virtual(&t$vrt_329ffa8);
	r11 = (String)s$lime_utils_Assets_hx;
	if( hl_vfields(r12)[1] ) *(String*)(hl_vfields(r12)[1]) = (String)r11; else hl_dyn_setp(r12->value,37969014/*fileName*/,&t$String,r11);
	r6 = 229;
	if( hl_vfields(r12)[2] ) *(int*)(hl_vfields(r12)[2]) = (int)r6; else hl_dyn_seti(r12->value,371360620/*lineNumber*/,&t$_i32,r6);
	r11 = (String)s$lime_utils_Assets;
	if( hl_vfields(r12)[0] ) *(String*)(hl_vfields(r12)[0]) = (String)r11; else hl_dyn_setp(r12->value,-63073762/*className*/,&t$String,r11);
	r11 = (String)s$getPath;
	if( hl_vfields(r12)[3] ) *(String*)(hl_vfields(r12)[3]) = (String)r11; else hl_dyn_setp(r12->value,302979532/*methodName*/,&t$String,r11);
	r13 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r12);
	lime_utils_Log_error(((vdynamic*)r9),r13);
	label$9452283_10_47:
	r9 = NULL;
	return r9;
}

String lime_utils_Assets_getText(String r0) {
	String r2, r3;
	bool r4;
	vdynamic *r1;
	r3 = (String)s$TEXT;
	r4 = false;
	r1 = lime_utils_Assets_getAsset(r0,r3,r4);
	r2 = (String)hl_dyn_castp(&r1,&t$_dyn,&t$String);
	return r2;
}

bool lime_utils_Assets_hasLibrary(String r0) {
	String r1, r2;
	haxe__ds__StringMap r4;
	bool r3;
	lime__utils__$Assets r5;
	if( !r0 ) goto label$9452283_12_3;
	r2 = (String)s$;
	if( r0 != r2 && (!r0 || !r2 || String___compare(r0,(vdynamic*)r2) != 0) ) goto label$9452283_12_5;
	label$9452283_12_3:
	r1 = (String)s$default;
	r0 = r1;
	label$9452283_12_5:
	r5 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r4 = r5->libraries;
	if( r4 == NULL ) hl_null_access();
	r3 = haxe_ds_StringMap_exists(r4,r0);
	return r3;
}

bool lime_utils_Assets_isLocal(String r0,String r1,bool* r2) {
	String r7, r9;
	bool r3, r4;
	lime__utils__$Assets r6;
	lime__utils__AssetLibrary r13;
	lime__utils__AssetCache r5;
	vdynamic *r10;
	int r8, r11, r12;
	if( r2 ) goto label$9452283_13_3;
	r3 = true;
	goto label$9452283_13_4;
	label$9452283_13_3:
	r3 = *r2;
	label$9452283_13_4:
	if( !r3 ) goto label$9452283_13_17;
	r6 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r5 = r6->cache;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->enabled;
	if( !r4 ) goto label$9452283_13_17;
	r6 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r5 = r6->cache;
	if( r5 == NULL ) hl_null_access();
	r4 = lime_utils_AssetCache_exists(r5,r0,r1);
	if( !r4 ) goto label$9452283_13_17;
	r4 = true;
	return r4;
	label$9452283_13_17:
	if( r0 == NULL ) hl_null_access();
	r9 = (String)s$853ae90;
	r10 = NULL;
	r8 = String_indexOf(r0,r9,r10);
	r11 = 0;
	r10 = hl_alloc_dynamic(&t$_i32);
	r10->v.i = r8;
	r7 = String_substring(r0,r11,r10);
	r12 = 1;
	r11 = r8 + r12;
	r10 = NULL;
	r9 = String_substring(r0,r11,r10);
	r13 = lime_utils_Assets_getLibrary(r7);
	if( !r13 ) goto label$9452283_13_33;
	if( r13 == NULL ) hl_null_access();
	r4 = ((bool (*)(lime__utils__AssetLibrary,String,String))r13->$type->vobj_proto[8])(r13,r9,r1);
	return r4;
	label$9452283_13_33:
	r4 = false;
	return r4;
}

bool lime_utils_Assets_isValidAudio(lime__media__AudioBuffer r0) {
	lime__media__AudioBuffer r2;
	bool r1;
	r2 = NULL;
	if( r0 != r2 ) goto label$9452283_14_4;
	r1 = false;
	goto label$9452283_14_5;
	label$9452283_14_4:
	r1 = true;
	label$9452283_14_5:
	return r1;
}

bool lime_utils_Assets_isValidImage(lime__graphics__Image r0) {
	bool r1;
	lime__graphics__ImageBuffer r2, r3;
	if( !r0 ) goto label$9452283_15_9;
	if( r0 == NULL ) hl_null_access();
	r2 = r0->buffer;
	r3 = NULL;
	if( r2 != r3 ) goto label$9452283_15_7;
	r1 = false;
	goto label$9452283_15_8;
	label$9452283_15_7:
	r1 = true;
	label$9452283_15_8:
	return r1;
	label$9452283_15_9:
	r1 = false;
	return r1;
}

hl__types__ArrayObj lime_utils_Assets_list(String r0) {
	haxe__ds__StringMap r6;
	vvirtual *r5, *r8;
	hl__types__ArrayObj r1, r11, r12;
	hl_type *r3;
	bool r9;
	lime__utils__$Assets r7;
	lime__utils__AssetLibrary r10;
	int r4;
	varray *r2;
	r3 = &t$String;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r7 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r6 = r7->libraries;
	if( r6 == NULL ) hl_null_access();
	r5 = haxe_ds_StringMap_iterator(r6);
	r8 = hl_to_virtual(&t$vrt_bd3367f,(vdynamic*)r5);
	label$9452283_16_9:
	if( r8 == NULL ) hl_null_access();
	if( hl_vfields(r8)[0] ) r9 = ((bool (*)(vdynamic*))hl_vfields(r8)[0])(r8->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r8->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r9 = (bool)ret.v.i;
	}
	if( !r9 ) goto label$9452283_16_21;
	if( hl_vfields(r8)[1] ) r10 = ((lime__utils__AssetLibrary (*)(vdynamic*))hl_vfields(r8)[1])(r8->value); else {
		r10 = (lime__utils__AssetLibrary)hl_dyn_call_obj(r8->value,&t$fun_488e867,151160317/*next*/,NULL,NULL);
	}
	if( r10 == NULL ) hl_null_access();
	r11 = ((hl__types__ArrayObj (*)(lime__utils__AssetLibrary,String))r10->$type->vobj_proto[9])(r10,r0);
	if( !r11 ) goto label$9452283_16_20;
	if( r1 == NULL ) hl_null_access();
	r12 = hl_types_ArrayObj_concat(r1,r11);
	r1 = r12;
	label$9452283_16_20:
	goto label$9452283_16_9;
	label$9452283_16_21:
	return r1;
}

void lime_utils_Assets_loadAsset__$1(venum* r0,vdynamic* r1) {
	String r5, r6;
	lime__utils__$Assets r4;
	lime__utils__AssetCache r3;
	r4 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r3 = r4->cache;
	if( r3 == NULL ) hl_null_access();
	r5 = ((Enumt$ctx_9633d1d*)r0)->p0;
	r6 = ((Enumt$ctx_9633d1d*)r0)->p1;
	lime_utils_AssetCache_set(r3,r5,r6,r1);
	return;
}

lime__app__Future lime_utils_Assets_loadAsset(String r0,String r1,bool r2) {
	lime__graphics__Image r14;
	String r6, r16, r17, r21, r22;
	lime__media__AudioBuffer r15;
	haxe__ds__StringMap r13;
	venum *r25;
	bool r3;
	lime__app__Future r11, r23;
	lime__utils__$Assets r5;
	vclosure *r24;
	lime__utils__AssetLibrary r20;
	lime__utils__AssetCache r4;
	vdynamic *r12, *r18;
	vbyte *r9, *r10;
	int r7, r8, r19;
	if( !r2 ) goto label$9452283_18_110;
	r5 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r4 = r5->cache;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->enabled;
	if( !r3 ) goto label$9452283_18_110;
	if( !r1 ) goto label$9452283_18_15;
	r7 = r1->length;
	r8 = 4;
	if( r7 != r8 ) goto label$9452283_18_15;
	r9 = r1->bytes;
	r10 = (vbyte*)USTR("FONT");
	r7 = hl_string_compare(r9,r10,r7);
	r8 = 0;
	if( r7 == r8 ) goto label$9452283_18_71;
	label$9452283_18_15:
	if( !r1 ) goto label$9452283_18_24;
	r7 = r1->length;
	r8 = 5;
	if( r7 != r8 ) goto label$9452283_18_24;
	r9 = r1->bytes;
	r10 = (vbyte*)USTR("IMAGE");
	r7 = hl_string_compare(r9,r10,r7);
	r8 = 0;
	if( r7 == r8 ) goto label$9452283_18_81;
	label$9452283_18_24:
	if( !r1 ) goto label$9452283_18_33;
	r7 = r1->length;
	r8 = 5;
	if( r7 != r8 ) goto label$9452283_18_33;
	r9 = r1->bytes;
	r10 = (vbyte*)USTR("MUSIC");
	r7 = hl_string_compare(r9,r10,r7);
	r8 = 0;
	if( r7 == r8 ) goto label$9452283_18_93;
	label$9452283_18_33:
	if( !r1 ) goto label$9452283_18_42;
	r7 = r1->length;
	r8 = 5;
	if( r7 != r8 ) goto label$9452283_18_42;
	r9 = r1->bytes;
	r10 = (vbyte*)USTR("SOUND");
	r7 = hl_string_compare(r9,r10,r7);
	r8 = 0;
	if( r7 == r8 ) goto label$9452283_18_93;
	label$9452283_18_42:
	if( !r1 ) goto label$9452283_18_51;
	r7 = r1->length;
	r8 = 8;
	if( r7 != r8 ) goto label$9452283_18_51;
	r9 = r1->bytes;
	r10 = (vbyte*)USTR("TEMPLATE");
	r7 = hl_string_compare(r9,r10,r7);
	r8 = 0;
	if( r7 == r8 ) goto label$9452283_18_105;
	label$9452283_18_51:
	if( !r1 ) goto label$9452283_18_60;
	r7 = r1->length;
	r8 = 6;
	if( r7 != r8 ) goto label$9452283_18_60;
	r9 = r1->bytes;
	r10 = (vbyte*)USTR("BINARY");
	r7 = hl_string_compare(r9,r10,r7);
	r8 = 0;
	if( r7 == r8 ) goto label$9452283_18_108;
	label$9452283_18_60:
	if( !r1 ) goto label$9452283_18_69;
	r7 = r1->length;
	r8 = 4;
	if( r7 != r8 ) goto label$9452283_18_69;
	r9 = r1->bytes;
	r10 = (vbyte*)USTR("TEXT");
	r7 = hl_string_compare(r9,r10,r7);
	r8 = 0;
	if( r7 == r8 ) goto label$9452283_18_108;
	label$9452283_18_69:
	r11 = NULL;
	return r11;
	label$9452283_18_71:
	r5 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r4 = r5->cache;
	if( r4 == NULL ) hl_null_access();
	r13 = r4->font;
	if( r13 == NULL ) hl_null_access();
	r12 = haxe_ds_StringMap_get(r13,r0);
	if( !r12 ) goto label$9452283_18_80;
	r11 = lime_app_Future_withValue(r12);
	return r11;
	label$9452283_18_80:
	goto label$9452283_18_110;
	label$9452283_18_81:
	r5 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r4 = r5->cache;
	if( r4 == NULL ) hl_null_access();
	r13 = r4->image;
	if( r13 == NULL ) hl_null_access();
	r12 = haxe_ds_StringMap_get(r13,r0);
	r14 = (lime__graphics__Image)r12;
	r3 = lime_utils_Assets_isValidImage(r14);
	if( !r3 ) goto label$9452283_18_92;
	r11 = lime_app_Future_withValue(((vdynamic*)r14));
	return r11;
	label$9452283_18_92:
	goto label$9452283_18_110;
	label$9452283_18_93:
	r5 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r4 = r5->cache;
	if( r4 == NULL ) hl_null_access();
	r13 = r4->audio;
	if( r13 == NULL ) hl_null_access();
	r12 = haxe_ds_StringMap_get(r13,r0);
	r15 = (lime__media__AudioBuffer)r12;
	r3 = lime_utils_Assets_isValidAudio(r15);
	if( !r3 ) goto label$9452283_18_104;
	r11 = lime_app_Future_withValue(((vdynamic*)r15));
	return r11;
	label$9452283_18_104:
	goto label$9452283_18_110;
	label$9452283_18_105:
	r6 = (String)s$Not_sure_how_to_get_template_;
	r6 = String___add__(r6,r0);
	hl_throw((vdynamic*)r6);
	label$9452283_18_108:
	r3 = false;
	r2 = r3;
	label$9452283_18_110:
	if( r0 == NULL ) hl_null_access();
	r17 = (String)s$853ae90;
	r18 = NULL;
	r7 = String_indexOf(r0,r17,r18);
	r8 = 0;
	r18 = hl_alloc_dynamic(&t$_i32);
	r18->v.i = r7;
	r16 = String_substring(r0,r8,r18);
	r19 = 1;
	r8 = r7 + r19;
	r18 = NULL;
	r17 = String_substring(r0,r8,r18);
	r20 = lime_utils_Assets_getLibrary(r16);
	if( !r20 ) goto label$9452283_18_149;
	if( r20 == NULL ) hl_null_access();
	r3 = ((bool (*)(lime__utils__AssetLibrary,String,String))r20->$type->vobj_proto[0])(r20,r17,r1);
	if( !r3 ) goto label$9452283_18_140;
	r11 = ((lime__app__Future (*)(lime__utils__AssetLibrary,String,String))r20->$type->vobj_proto[10])(r20,r17,r1);
	if( !r2 ) goto label$9452283_18_139;
	r5 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r4 = r5->cache;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->enabled;
	if( !r3 ) goto label$9452283_18_139;
	if( r11 == NULL ) hl_null_access();
	r25 = hl_alloc_enum(&t$ctx_9633d1d,0);
	((Enumt$ctx_9633d1d*)r25)->p0 = (String)r0;
	((Enumt$ctx_9633d1d*)r25)->p1 = (String)r1;
	r24 = hl_alloc_closure_ptr(&t$fun_63afcb6,lime_utils_Assets_loadAsset__$1,r25);
	r23 = lime_app_Future_onComplete(r11,r24);
	label$9452283_18_139:
	return r11;
	label$9452283_18_140:
	r21 = (String)s$There_is_no_;
	r21 = String___add__(r21,r1);
	r22 = (String)s$_asset_with_an_ID_of_;
	r21 = String___add__(r21,r22);
	r21 = String___add__(r21,r0);
	r22 = (String)s$b15835f;
	r21 = String___add__(r21,r22);
	r11 = lime_app_Future_withError(((vdynamic*)r21));
	return r11;
	label$9452283_18_149:
	r21 = lime_utils_Assets___libraryNotFound(r16);
	r11 = lime_app_Future_withError(((vdynamic*)r21));
	return r11;
}

lime__app__Future lime_utils_Assets_loadAudioBuffer(String r0,bool* r1) {
	String r4;
	bool r2;
	lime__app__Future r3;
	if( r1 ) goto label$9452283_19_3;
	r2 = true;
	goto label$9452283_19_4;
	label$9452283_19_3:
	r2 = *r1;
	label$9452283_19_4:
	r4 = (String)s$SOUND;
	r3 = lime_utils_Assets_loadAsset(r0,r4,r2);
	return r3;
}

lime__app__Future lime_utils_Assets_loadBytes(String r0) {
	String r2;
	bool r3;
	lime__app__Future r1;
	r2 = (String)s$BINARY;
	r3 = false;
	r1 = lime_utils_Assets_loadAsset(r0,r2,r3);
	return r1;
}

lime__app__Future lime_utils_Assets_loadFont(String r0,bool* r1) {
	String r4;
	bool r2;
	lime__app__Future r3;
	if( r1 ) goto label$9452283_21_3;
	r2 = true;
	goto label$9452283_21_4;
	label$9452283_21_3:
	r2 = *r1;
	label$9452283_21_4:
	r4 = (String)s$FONT;
	r3 = lime_utils_Assets_loadAsset(r0,r4,r2);
	return r3;
}

lime__app__Future lime_utils_Assets_loadImage(String r0,bool* r1) {
	String r4;
	bool r2;
	lime__app__Future r3;
	if( r1 ) goto label$9452283_22_3;
	r2 = true;
	goto label$9452283_22_4;
	label$9452283_22_3:
	r2 = *r1;
	label$9452283_22_4:
	r4 = (String)s$IMAGE;
	r3 = lime_utils_Assets_loadAsset(r0,r4,r2);
	return r3;
}

void lime_utils_Assets_loadLibrary__$1(venum* r0,lime__utils__AssetBundle r1) {
	bool *r12;
	String r4, r5;
	haxe__ds__StringMap r7;
	lime__app___Event_Void_Void r9, r11;
	lime__app__Future r14;
	lime__utils__$Assets r8;
	lime__app__Promise r3;
	vclosure *r10;
	lime__utils__AssetLibrary r6;
	int *r13;
	if( r1 ) goto label$9452283_23_10;
	r3 = ((Enumt$ctx_74b34e0*)r0)->p1;
	if( r3 == NULL ) hl_null_access();
	r4 = (String)s$Cannot_load_bundle_for_library_;
	r5 = ((Enumt$ctx_74b34e0*)r0)->p0;
	r4 = String___add__(r4,r5);
	r5 = (String)s$b15835f;
	r4 = String___add__(r4,r5);
	r3 = lime_app_Promise_error(r3,((vdynamic*)r4));
	return;
	label$9452283_23_10:
	r6 = lime_utils_AssetLibrary_fromBundle(r1);
	if( r6 ) goto label$9452283_23_21;
	r3 = ((Enumt$ctx_74b34e0*)r0)->p1;
	if( r3 == NULL ) hl_null_access();
	r4 = (String)s$Cannot_open_library_;
	r5 = ((Enumt$ctx_74b34e0*)r0)->p0;
	r4 = String___add__(r4,r5);
	r5 = (String)s$b15835f;
	r4 = String___add__(r4,r5);
	r3 = lime_app_Promise_error(r3,((vdynamic*)r4));
	goto label$9452283_23_40;
	label$9452283_23_21:
	r8 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r7 = r8->libraries;
	if( r7 == NULL ) hl_null_access();
	r4 = ((Enumt$ctx_74b34e0*)r0)->p0;
	haxe_ds_StringMap_set(r7,r4,((vdynamic*)r6));
	if( r6 == NULL ) hl_null_access();
	r9 = r6->onChange;
	if( r9 == NULL ) hl_null_access();
	r8 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r11 = r8->onChange;
	if( r11 == NULL ) hl_null_access();
	r10 = hl_alloc_closure_ptr(&t$fun_f8007d4,lime_app__Event_Void_Void_dispatch,r11);
	r12 = NULL;
	r13 = NULL;
	lime_app__Event_Void_Void_add(r9,((vdynamic*)r10),r12,r13);
	r3 = ((Enumt$ctx_74b34e0*)r0)->p1;
	if( r3 == NULL ) hl_null_access();
	r14 = ((lime__app__Future (*)(lime__utils__AssetLibrary))r6->$type->vobj_proto[11])(r6);
	r3 = lime_app_Promise_completeWith(r3,r14);
	label$9452283_23_40:
	return;
}

void lime_utils_Assets_loadLibrary__$3(venum* r0,vdynamic* r1) {
	String r3, r4;
	lime__app__Promise r2;
	r2 = ((Enumt$ctx_74b34e0*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r3 = (String)s$49c9327;
	r4 = ((Enumt$ctx_74b34e0*)r0)->p0;
	r3 = String___add__(r3,r4);
	r4 = (String)s$b15835f;
	r3 = String___add__(r3,r4);
	r2 = lime_app_Promise_error(r2,((vdynamic*)r3));
	return;
}

void lime_utils_Assets_loadLibrary__$4(venum* r0,lime__utils__AssetManifest r1) {
	bool *r12;
	String r4, r5;
	haxe__ds__StringMap r7;
	lime__app___Event_Void_Void r9, r11;
	lime__app__Future r14;
	lime__utils__$Assets r8;
	lime__app__Promise r3;
	vclosure *r10;
	lime__utils__AssetLibrary r6;
	int *r13;
	if( r1 ) goto label$9452283_25_10;
	r3 = ((Enumt$ctx_74b34e0*)r0)->p1;
	if( r3 == NULL ) hl_null_access();
	r4 = (String)s$55de694;
	r5 = ((Enumt$ctx_74b34e0*)r0)->p0;
	r4 = String___add__(r4,r5);
	r5 = (String)s$b15835f;
	r4 = String___add__(r4,r5);
	r3 = lime_app_Promise_error(r3,((vdynamic*)r4));
	return;
	label$9452283_25_10:
	r6 = lime_utils_AssetLibrary_fromManifest(r1);
	if( r6 ) goto label$9452283_25_21;
	r3 = ((Enumt$ctx_74b34e0*)r0)->p1;
	if( r3 == NULL ) hl_null_access();
	r4 = (String)s$Cannot_open_library_;
	r5 = ((Enumt$ctx_74b34e0*)r0)->p0;
	r4 = String___add__(r4,r5);
	r5 = (String)s$b15835f;
	r4 = String___add__(r4,r5);
	r3 = lime_app_Promise_error(r3,((vdynamic*)r4));
	goto label$9452283_25_40;
	label$9452283_25_21:
	r8 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r7 = r8->libraries;
	if( r7 == NULL ) hl_null_access();
	r4 = ((Enumt$ctx_74b34e0*)r0)->p0;
	haxe_ds_StringMap_set(r7,r4,((vdynamic*)r6));
	if( r6 == NULL ) hl_null_access();
	r9 = r6->onChange;
	if( r9 == NULL ) hl_null_access();
	r8 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r11 = r8->onChange;
	if( r11 == NULL ) hl_null_access();
	r10 = hl_alloc_closure_ptr(&t$fun_f8007d4,lime_app__Event_Void_Void_dispatch,r11);
	r12 = NULL;
	r13 = NULL;
	lime_app__Event_Void_Void_add(r9,((vdynamic*)r10),r12,r13);
	r3 = ((Enumt$ctx_74b34e0*)r0)->p1;
	if( r3 == NULL ) hl_null_access();
	r14 = ((lime__app__Future (*)(lime__utils__AssetLibrary))r6->$type->vobj_proto[11])(r6);
	r3 = lime_app_Promise_completeWith(r3,r14);
	label$9452283_25_40:
	return;
}

void lime_utils_Assets_loadLibrary__$6(venum* r0,vdynamic* r1) {
	String r3, r4;
	lime__app__Promise r2;
	r2 = ((Enumt$ctx_74b34e0*)r0)->p1;
	if( r2 == NULL ) hl_null_access();
	r3 = (String)s$49c9327;
	r4 = ((Enumt$ctx_74b34e0*)r0)->p0;
	r3 = String___add__(r3,r4);
	r4 = (String)s$b15835f;
	r3 = String___add__(r3,r4);
	r2 = lime_app_Promise_error(r2,((vdynamic*)r3));
	return;
}

lime__app__Future lime_utils_Assets_loadLibrary(String r0) {
	String r4, r7, r11, r15;
	haxe__ds__StringMap r9;
	venum *r13;
	bool r8;
	lime__app__Future r5;
	lime__utils__$Assets r10;
	lime__app__Promise r1;
	vclosure *r12, *r14, *r16;
	lime__utils__AssetLibrary r3;
	vdynamic *r6;
	r1 = (lime__app__Promise)hl_alloc_obj(&t$lime_app_Promise);
	lime_app_Promise_new(r1);
	r3 = lime_utils_Assets_getLibrary(r0);
	if( !r3 ) goto label$9452283_27_7;
	if( r3 == NULL ) hl_null_access();
	r5 = ((lime__app__Future (*)(lime__utils__AssetLibrary))r3->$type->vobj_proto[11])(r3);
	return r5;
	label$9452283_27_7:
	r4 = r0;
	r7 = NULL;
	r10 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r9 = r10->bundlePaths;
	if( r9 == NULL ) hl_null_access();
	r8 = haxe_ds_StringMap_exists(r9,r0);
	if( !r8 ) goto label$9452283_27_37;
	r10 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r9 = r10->bundlePaths;
	if( r9 == NULL ) hl_null_access();
	r6 = haxe_ds_StringMap_get(r9,r0);
	r11 = (String)r6;
	r5 = lime_utils_AssetBundle_loadFromFile(r11);
	if( r5 == NULL ) hl_null_access();
	r13 = hl_alloc_enum(&t$ctx_74b34e0,0);
	((Enumt$ctx_74b34e0*)r13)->p0 = (String)r0;
	((Enumt$ctx_74b34e0*)r13)->p1 = (lime__app__Promise)r1;
	r12 = hl_alloc_closure_ptr(&t$fun_addfd8d,lime_utils_Assets_loadLibrary__$1,r13);
	if( r12 ) goto label$9452283_27_28;
	r14 = NULL;
	goto label$9452283_27_29;
	label$9452283_27_28:
	r14 = hl_alloc_closure_ptr(&t$fun_20dec9c,lime_utils_Assets_loadLibrary__$2,r12);
	label$9452283_27_29:
	r5 = lime_app_Future_onComplete(r5,r14);
	if( r5 == NULL ) hl_null_access();
	r13 = hl_alloc_enum(&t$ctx_74b34e0,0);
	((Enumt$ctx_74b34e0*)r13)->p0 = (String)r0;
	((Enumt$ctx_74b34e0*)r13)->p1 = (lime__app__Promise)r1;
	r14 = hl_alloc_closure_ptr(&t$fun_53ea95b,lime_utils_Assets_loadLibrary__$3,r13);
	r5 = lime_app_Future_onError(r5,r14);
	goto label$9452283_27_80;
	label$9452283_27_37:
	r10 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r9 = r10->libraryPaths;
	if( r9 == NULL ) hl_null_access();
	r8 = haxe_ds_StringMap_exists(r9,r0);
	if( !r8 ) goto label$9452283_27_51;
	r10 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r9 = r10->libraryPaths;
	if( r9 == NULL ) hl_null_access();
	r6 = haxe_ds_StringMap_get(r9,r0);
	r11 = (String)r6;
	r4 = r11;
	r11 = haxe_io_Path_directory(r11);
	r7 = r11;
	goto label$9452283_27_63;
	label$9452283_27_51:
	r15 = (String)s$_bundle;
	r8 = StringTools_endsWith(r0,r15);
	if( !r8 ) goto label$9452283_27_59;
	r7 = r0;
	r15 = (String)s$_library_json;
	r11 = String___add__(r0,r15);
	r4 = r11;
	goto label$9452283_27_61;
	label$9452283_27_59:
	r11 = haxe_io_Path_directory(r0);
	r7 = r11;
	label$9452283_27_61:
	r11 = lime_utils_Assets___cacheBreak(r4);
	r4 = r11;
	label$9452283_27_63:
	r5 = lime_utils_AssetManifest_loadFromFile(r4,r7);
	if( r5 == NULL ) hl_null_access();
	r13 = hl_alloc_enum(&t$ctx_74b34e0,0);
	((Enumt$ctx_74b34e0*)r13)->p0 = (String)r0;
	((Enumt$ctx_74b34e0*)r13)->p1 = (lime__app__Promise)r1;
	r16 = hl_alloc_closure_ptr(&t$fun_e4bb8c6,lime_utils_Assets_loadLibrary__$4,r13);
	if( r16 ) goto label$9452283_27_72;
	r14 = NULL;
	goto label$9452283_27_73;
	label$9452283_27_72:
	r14 = hl_alloc_closure_ptr(&t$fun_50508d5,lime_utils_Assets_loadLibrary__$5,r16);
	label$9452283_27_73:
	r5 = lime_app_Future_onComplete(r5,r14);
	if( r5 == NULL ) hl_null_access();
	r13 = hl_alloc_enum(&t$ctx_74b34e0,0);
	((Enumt$ctx_74b34e0*)r13)->p0 = (String)r0;
	((Enumt$ctx_74b34e0*)r13)->p1 = (lime__app__Promise)r1;
	r14 = hl_alloc_closure_ptr(&t$fun_53ea95b,lime_utils_Assets_loadLibrary__$6,r13);
	r5 = lime_app_Future_onError(r5,r14);
	label$9452283_27_80:
	r5 = r1->future;
	return r5;
}

lime__app__Future lime_utils_Assets_loadText(String r0) {
	String r2;
	bool r3;
	lime__app__Future r1;
	r2 = (String)s$TEXT;
	r3 = false;
	r1 = lime_utils_Assets_loadAsset(r0,r2,r3);
	return r1;
}

void lime_utils_Assets_registerLibrary(String r0,lime__utils__AssetLibrary r1) {
	bool *r10;
	haxe__ds__StringMap r4;
	lime__app___Event_Void_Void r8;
	bool r3;
	lime__utils__$Assets r5;
	vclosure *r9;
	lime__utils__AssetLibrary r7;
	int *r11;
	vdynamic *r6;
	static vclosure cl$0 = { &t$fun_7b48b4f, lime_utils_Assets_library_onChange, 0 };
	r5 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r4 = r5->libraries;
	if( r4 == NULL ) hl_null_access();
	r3 = haxe_ds_StringMap_exists(r4,r0);
	if( !r3 ) goto label$9452283_29_13;
	r5 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r4 = r5->libraries;
	if( r4 == NULL ) hl_null_access();
	r6 = haxe_ds_StringMap_get(r4,r0);
	r7 = (lime__utils__AssetLibrary)r6;
	if( r7 != r1 ) goto label$9452283_29_12;
	return;
	label$9452283_29_12:
	lime_utils_Assets_unloadLibrary(r0);
	label$9452283_29_13:
	if( !r1 ) goto label$9452283_29_21;
	if( r1 == NULL ) hl_null_access();
	r8 = r1->onChange;
	if( r8 == NULL ) hl_null_access();
	r9 = &cl$0;
	r10 = NULL;
	r11 = NULL;
	lime_app__Event_Void_Void_add(r8,((vdynamic*)r9),r10,r11);
	label$9452283_29_21:
	r5 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r4 = r5->libraries;
	if( r4 == NULL ) hl_null_access();
	haxe_ds_StringMap_set(r4,r0,((vdynamic*)r1));
	return;
}

void lime_utils_Assets_unloadLibrary(String r0) {
	String r2, r3;
	haxe__ds__StringMap r5;
	bool r11;
	lime__app___Event_Void_Void r9;
	lime__utils__$Assets r6;
	vclosure *r10;
	lime__utils__AssetCache r8;
	lime__utils__AssetLibrary r7;
	vdynamic *r4;
	static vclosure cl$0 = { &t$fun_7b48b4f, lime_utils_Assets_library_onChange, 0 };
	if( !r0 ) goto label$9452283_30_3;
	r3 = (String)s$;
	if( r0 != r3 && (!r0 || !r3 || String___compare(r0,(vdynamic*)r3) != 0) ) goto label$9452283_30_5;
	label$9452283_30_3:
	r2 = (String)s$default;
	r0 = r2;
	label$9452283_30_5:
	r6 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r5 = r6->libraries;
	if( r5 == NULL ) hl_null_access();
	r4 = haxe_ds_StringMap_get(r5,r0);
	r7 = (lime__utils__AssetLibrary)r4;
	if( !r7 ) goto label$9452283_30_23;
	r6 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r8 = r6->cache;
	if( r8 == NULL ) hl_null_access();
	r3 = (String)s$853ae90;
	r2 = String___add__(r0,r3);
	lime_utils_AssetCache_clear(r8,r2);
	if( r7 == NULL ) hl_null_access();
	r9 = r7->onChange;
	if( r9 == NULL ) hl_null_access();
	r10 = &cl$0;
	lime_app__Event_Void_Void_remove(r9,((vdynamic*)r10));
	((void (*)(lime__utils__AssetLibrary))r7->$type->vobj_proto[17])(r7);
	label$9452283_30_23:
	r6 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r5 = r6->libraries;
	if( r5 == NULL ) hl_null_access();
	r11 = haxe_ds_StringMap_remove(r5,r0);
	return;
}

String lime_utils_Assets___cacheBreak(String r0) {
	return r0;
}

String lime_utils_Assets___libraryNotFound(String r0) {
	String r1, r2;
	lime__app__$Application r4;
	bool r6;
	lime__utils__Preloader r5;
	lime__app__Application r3;
	if( !r0 ) goto label$9452283_32_3;
	r2 = (String)s$;
	if( r0 != r2 && (!r0 || !r2 || String___compare(r0,(vdynamic*)r2) != 0) ) goto label$9452283_32_5;
	label$9452283_32_3:
	r1 = (String)s$default;
	r0 = r1;
	label$9452283_32_5:
	r4 = (lime__app__$Application)g$_lime_app_Application;
	r3 = r4->current;
	if( !r3 ) goto label$9452283_32_25;
	r4 = (lime__app__$Application)g$_lime_app_Application;
	r3 = r4->current;
	if( r3 == NULL ) hl_null_access();
	r5 = r3->__preloader;
	if( !r5 ) goto label$9452283_32_25;
	r4 = (lime__app__$Application)g$_lime_app_Application;
	r3 = r4->current;
	if( r3 == NULL ) hl_null_access();
	r5 = r3->__preloader;
	if( r5 == NULL ) hl_null_access();
	r6 = r5->complete;
	if( r6 ) goto label$9452283_32_25;
	r1 = (String)s$04f6032;
	r1 = String___add__(r1,r0);
	r2 = (String)s$_or_it_is_not_yet_preloaded;
	r1 = String___add__(r1,r2);
	return r1;
	label$9452283_32_25:
	r1 = (String)s$04f6032;
	r1 = String___add__(r1,r0);
	r2 = (String)s$b15835f;
	r1 = String___add__(r1,r2);
	return r1;
}

void lime_utils_Assets_library_onChange() {
	String r3;
	lime__app___Event_Void_Void r4;
	lime__utils__$Assets r2;
	lime__utils__AssetCache r1;
	r2 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r1 = r2->cache;
	if( r1 == NULL ) hl_null_access();
	r3 = NULL;
	lime_utils_AssetCache_clear(r1,r3);
	r2 = (lime__utils__$Assets)g$_lime_utils_Assets;
	r4 = r2->onChange;
	if( r4 == NULL ) hl_null_access();
	lime_app__Event_Void_Void_dispatch(r4);
	return;
}

