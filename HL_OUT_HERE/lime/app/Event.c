// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <lime/app/Event.h>
extern hl_type t$hl_types_ArrayDyn;
void hl_types_ArrayDyn_new(hl__types__ArrayDyn);
extern hl_type t$hl_types_ArrayBytes_Int;
void hl_types_ArrayBytes_Int_new(hl__types__ArrayBytes_Int);
extern hl_type t$hl_types_ArrayObj;
void hl_types_ArrayObj_new(hl__types__ArrayObj);
void hl_types_ArrayDyn_insert(hl__types__ArrayDyn,int,vdynamic*);
void hl_types_ArrayBytes_Int_insert(hl__types__ArrayBytes_Int,int,int);
void hl_types_ArrayObj_insert(hl__types__ArrayObj,int,vdynamic*);
int hl_types_ArrayDyn_push(hl__types__ArrayDyn,vdynamic*);
int hl_types_ArrayBytes_Int_push(hl__types__ArrayBytes_Int,int);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
int hl_types_ArrayDyn_get_length(hl__types__ArrayDyn);
#include <hl/natives.h>
#include <hl/types/ArrayBase.h>
hl__types__ArrayDyn hl_types_ArrayDyn_splice(hl__types__ArrayDyn,int,int);
hl__types__ArrayBase hl_types_ArrayBytes_Int_splice(hl__types__ArrayBytes_Int,int,int);
extern hl_type t$hl_types_ArrayBase;
hl__types__ArrayBase hl_types_ArrayObj_splice(hl__types__ArrayObj,int,int);

void lime_app_Event_new(lime__app__Event r0) {
	hl__types__ArrayObj r5;
	bool r1;
	hl__types__ArrayBytes_Int r4;
	hl__types__ArrayDyn r2;
	r1 = false;
	r0->canceled = r1;
	r2 = (hl__types__ArrayDyn)hl_alloc_obj(&t$hl_types_ArrayDyn);
	hl_types_ArrayDyn_new(r2);
	r0->__listeners = r2;
	r4 = (hl__types__ArrayBytes_Int)hl_alloc_obj(&t$hl_types_ArrayBytes_Int);
	hl_types_ArrayBytes_Int_new(r4);
	r0->__priorities = r4;
	r5 = (hl__types__ArrayObj)hl_alloc_obj(&t$hl_types_ArrayObj);
	hl_types_ArrayObj_new(r5);
	r0->__repeat = r5;
	return;
}

void lime_app_Event_add(lime__app__Event r0,vdynamic* r1,bool* r2,int* r3) {
	hl__types__ArrayObj r16;
	bool r4, r17;
	hl__types__ArrayBytes_Int r9;
	hl__types__ArrayDyn r14;
	vdynamic *r15;
	vbyte *r13;
	int r5, r6, r8, r10, r11, r12;
	if( r2 ) goto label$99329b9_2_3;
	r4 = false;
	goto label$99329b9_2_4;
	label$99329b9_2_3:
	r4 = *r2;
	label$99329b9_2_4:
	if( r3 ) goto label$99329b9_2_7;
	r5 = 0;
	goto label$99329b9_2_8;
	label$99329b9_2_7:
	r5 = *r3;
	label$99329b9_2_8:
	r6 = 0;
	r9 = r0->__priorities;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->length;
	label$99329b9_2_12:
	if( r6 >= r8 ) goto label$99329b9_2_40;
	r10 = r6;
	++r6;
	r9 = r0->__priorities;
	if( r9 == NULL ) hl_null_access();
	r12 = r9->length;
	if( ((unsigned)r10) < ((unsigned)r12) ) goto label$99329b9_2_22;
	r11 = 0;
	goto label$99329b9_2_26;
	label$99329b9_2_22:
	r13 = r9->bytes;
	r12 = 2;
	r12 = r10 << r12;
	r11 = *(int*)(r13 + r12);
	label$99329b9_2_26:
	if( r11 >= r5 ) goto label$99329b9_2_39;
	r14 = r0->__listeners;
	if( r14 == NULL ) hl_null_access();
	hl_types_ArrayDyn_insert(r14,r10,r1);
	r9 = r0->__priorities;
	if( r9 == NULL ) hl_null_access();
	hl_types_ArrayBytes_Int_insert(r9,r10,r5);
	r16 = r0->__repeat;
	if( r16 == NULL ) hl_null_access();
	r17 = !r4;
	r15 = hl_alloc_dynbool(r17);
	hl_types_ArrayObj_insert(r16,r10,r15);
	return;
	label$99329b9_2_39:
	goto label$99329b9_2_12;
	label$99329b9_2_40:
	r14 = r0->__listeners;
	if( r14 == NULL ) hl_null_access();
	r6 = hl_types_ArrayDyn_push(r14,r1);
	r9 = r0->__priorities;
	if( r9 == NULL ) hl_null_access();
	r6 = hl_types_ArrayBytes_Int_push(r9,r5);
	r16 = r0->__repeat;
	if( r16 == NULL ) hl_null_access();
	r17 = !r4;
	r15 = hl_alloc_dynbool(r17);
	r6 = hl_types_ArrayObj_push(r16,r15);
	return;
}

void lime_app_Event_cancel(lime__app__Event r0) {
	bool r1;
	r1 = true;
	r0->canceled = r1;
	return;
}

bool lime_app_Event_has(lime__app__Event r0,vdynamic* r1) {
	bool r6;
	hl__types__ArrayDyn r3;
	vdynamic *r5;
	int r2, r4;
	r2 = 0;
	r3 = r0->__listeners;
	label$99329b9_4_2:
	if( r3 == NULL ) hl_null_access();
	r4 = hl_types_ArrayDyn_get_length(r3);
	if( r2 >= r4 ) goto label$99329b9_4_13;
	r5 = ((vdynamic* (*)(hl__types__ArrayDyn,int))r3->$type->vobj_proto[0])(r3,r2);
	++r2;
	r6 = hl_fun_compare(r5,r1);
	if( !r6 ) goto label$99329b9_4_12;
	r6 = true;
	return r6;
	label$99329b9_4_12:
	goto label$99329b9_4_2;
	label$99329b9_4_13:
	r6 = false;
	return r6;
}

void lime_app_Event_remove(lime__app__Event r0,vdynamic* r1) {
	hl__types__ArrayObj r11;
	bool r6;
	hl__types__ArrayBytes_Int r10;
	hl__types__ArrayBase r9;
	hl__types__ArrayDyn r3;
	vdynamic *r7;
	int r2, r5, r8;
	r3 = r0->__listeners;
	if( r3 == NULL ) hl_null_access();
	r2 = hl_types_ArrayDyn_get_length(r3);
	label$99329b9_5_3:
	--r2;
	r5 = 0;
	if( r2 < r5 ) goto label$99329b9_5_27;
	r3 = r0->__listeners;
	if( r3 == NULL ) hl_null_access();
	r7 = ((vdynamic* (*)(hl__types__ArrayDyn,int))r3->$type->vobj_proto[0])(r3,r2);
	r6 = hl_fun_compare(r7,r1);
	if( !r6 ) goto label$99329b9_5_26;
	r3 = r0->__listeners;
	if( r3 == NULL ) hl_null_access();
	r8 = 1;
	r3 = hl_types_ArrayDyn_splice(r3,r2,r8);
	r10 = r0->__priorities;
	if( r10 == NULL ) hl_null_access();
	r8 = 1;
	r9 = hl_types_ArrayBytes_Int_splice(r10,r2,r8);
	r10 = (hl__types__ArrayBytes_Int)hl_dyn_castp(&r9,&t$hl_types_ArrayBase,&t$hl_types_ArrayBytes_Int);
	r11 = r0->__repeat;
	if( r11 == NULL ) hl_null_access();
	r8 = 1;
	r9 = hl_types_ArrayObj_splice(r11,r2,r8);
	r11 = (hl__types__ArrayObj)hl_dyn_castp(&r9,&t$hl_types_ArrayBase,&t$hl_types_ArrayObj);
	label$99329b9_5_26:
	goto label$99329b9_5_3;
	label$99329b9_5_27:
	return;
}

void lime_app_Event_removeAll(lime__app__Event r0) {
	hl__types__ArrayObj r7;
	hl__types__ArrayBytes_Int r6;
	hl__types__ArrayBase r5;
	hl__types__ArrayDyn r2;
	int r1, r4;
	r2 = r0->__listeners;
	if( r2 == NULL ) hl_null_access();
	r1 = hl_types_ArrayDyn_get_length(r2);
	r2 = r0->__listeners;
	if( r2 == NULL ) hl_null_access();
	r4 = 0;
	r2 = hl_types_ArrayDyn_splice(r2,r4,r1);
	r6 = r0->__priorities;
	if( r6 == NULL ) hl_null_access();
	r4 = 0;
	r5 = hl_types_ArrayBytes_Int_splice(r6,r4,r1);
	r6 = (hl__types__ArrayBytes_Int)hl_dyn_castp(&r5,&t$hl_types_ArrayBase,&t$hl_types_ArrayBytes_Int);
	r7 = r0->__repeat;
	if( r7 == NULL ) hl_null_access();
	r4 = 0;
	r5 = hl_types_ArrayObj_splice(r7,r4,r1);
	r7 = (hl__types__ArrayObj)hl_dyn_castp(&r5,&t$hl_types_ArrayBase,&t$hl_types_ArrayObj);
	return;
}

