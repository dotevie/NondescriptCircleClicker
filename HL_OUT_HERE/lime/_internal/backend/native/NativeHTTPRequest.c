// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <lime/_internal/backend/native/NativeHTTPRequest.h>
extern hl_type t$vrt_a58b998;
extern hl_type t$vrt_ad1db93;
extern hl_type t$vrt_0d9ac00;
extern hl_type t$vrt_1bd3a89;
void haxe_Timer_stop(haxe__Timer);
#include <haxe/io/Encoding.h>
#include <hl/types/ArrayDyn.h>
haxe__io__Bytes haxe_io_Bytes_alloc(int);
extern hl_type t$lime_net_curl_CURL;
void lime_net_curl_CURL_new(lime__net__curl__CURL,vdynamic*);
void lime_net_curl_CURL_reset(lime__net__curl__CURL);
extern hl_type t$haxe_io_Bytes;
extern String s$;
extern hl_type t$haxe_ds_StringMap;
vvirtual* haxe_ds_StringMap_keys(haxe__ds__StringMap);
extern hl_type t$fun_bf7849e;
extern hl_type t$fun_820f49a;
extern String s$6cff047;
String String___add__(String,String);
#include <hl/natives.h>
extern hl_type t$String;
vdynamic* haxe_ds_StringMap_get(haxe__ds__StringMap,String);
String Std_string(vdynamic*);
extern String s$43ec3e5;
int String___compare(String,vdynamic*);
extern String s$GET;
extern String s$d1457b7;
int String_indexOf(String,String,vdynamic*);
haxe__io__Bytes haxe_io_Bytes_ofString(String,venum*);
int lime_net_curl_CURL_setOption(lime__net__curl__CURL,int,vdynamic*);
extern hl_type t$_i32;
extern hl_type t$_bool;
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern String s$Expect_;
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
extern hl_type t$hl_types_ArrayObj;
extern hl_type t$hl_types_ArrayDyn;
int hl_types_ArrayDyn_get_length(hl__types__ArrayDyn);
extern hl_type t$_dyn;
extern String s$Content_Type;
extern String s$e265492;
extern String s$application_octet_stream;
extern String s$c71c861;
extern String s$Content_Type_;
void lime__internal_backend_native_NativeHTTPRequest_curl_onProgress(lime___internal__backend__native__NativeHTTPRequest,lime__net__curl__CURL,double,double,double,double);
extern hl_type t$fun_e418fed;
int lime__internal_backend_native_NativeHTTPRequest_curl_onWrite(lime___internal__backend__native__NativeHTTPRequest,lime__net__curl__CURL,haxe__io__Bytes);
extern hl_type t$fun_133a5db;
extern hl_type t$lime_net_HTTPRequestHeader;
void lime__internal_backend_native_NativeHTTPRequest_curl_onHeader(lime___internal__backend__native__NativeHTTPRequest,lime__net__curl__CURL,String);
extern hl_type t$fun_390d07b;
extern lime___internal__backend__native__$NativeHTTPRequest g$938c2df;
extern String s$libcurl_agent_1_0;
#include <lime/app/Future.h>
#include <lime/app/_Event_Dynamic_Void.h>
void lime__internal_backend_native_NativeHTTPRequest_localThreadPool_doWork(vdynamic*);
extern hl_type t$fun_0ecc9bc;
void lime__internal_backend_native_NativeHTTPRequest_localThreadPool_onProgress(vvirtual*);
extern hl_type t$fun_9cf1d2d;
void lime__internal_backend_native_NativeHTTPRequest_localThreadPool_onComplete(vvirtual*);
extern hl_type t$fun_82757b3;
void lime__internal_backend_native_NativeHTTPRequest_localThreadPool_onError(vvirtual*);
extern hl_type t$fun_06422e9;
void lime__internal_backend_native_NativeHTTPRequest_multiThreadPool_doWork(vdynamic*);
void lime__internal_backend_native_NativeHTTPRequest_multiThreadPool_onProgress(vvirtual*);
extern hl_type t$fun_f9d0378;
void lime__internal_backend_native_NativeHTTPRequest_multiThreadPool_onComplete(vdynamic*);
void lime__internal_backend_native_NativeHTTPRequest_multiProgressTimer_onRun(void);
extern hl_type t$fun_7b48b4f;
extern String s$The_URI_must_not_be_null;
lime__app__Future lime_app_Future_withError(vdynamic*);
extern hl_type t$lime_app_Promise;
void lime_app_Promise_new(lime__app__Promise);
extern String s$http_;
extern String s$https_;
extern hl_type t$lime_system_ThreadPool;
void lime_system_ThreadPool_new(lime__system__ThreadPool,int*,int*);
void lime_app__Event_Dynamic_Void_add(lime__app___Event_Dynamic_Void,vdynamic*,bool*,int*);
extern hl_type t$fun_a5806e1;
extern hl_type t$fun_09d21a6;
extern hl_type t$fun_2975f38;
extern hl_type t$vrt_a91079a;
extern hl_type t$lime__internal_backend_native_NativeHTTPRequest;
void lime_system_ThreadPool_queue(lime__system__ThreadPool,vdynamic*);
int lime_net_curl_CURL_globalInit(int);
extern hl_type t$lime_net_curl_CURLMulti;
void lime_net_curl_CURLMulti_new(lime__net__curl__CURLMulti,vdynamic*);
void hl_types_ArrayObj_new(hl__types__ArrayObj);
extern hl_type t$haxe_ds_ObjectMap;
void haxe_ds_ObjectMap_new(haxe__ds__ObjectMap);
void haxe_ds_ObjectMap_set(haxe__ds__ObjectMap,vdynamic*,vdynamic*);
hl_deque* sys_thread__Deque_Deque_Impl___new(void);
extern hl_type t$fun_91f1970;
extern hl_type t$haxe_Timer;
void haxe_Timer_new(haxe__Timer,double);
lime__app__Promise lime_app_Promise_complete(lime__app__Promise,vdynamic*);
String haxe_io_Bytes_getString(haxe__io__Bytes,int,int,venum*);
lime__app__Promise lime_app_Promise_progress(lime__app__Promise,int,int);
extern hl_type t$fun_a4fdf42;
void wrapt$fun_354f561(vclosure*,int,int);
extern hl_type t$fun_354f561;
lime__app__Future lime_app_Future_onProgress(lime__app__Future,vclosure*);
lime__app__Promise lime_app_Promise_error(lime__app__Promise,vdynamic*);
extern hl_type t$fun_2b2a2eb;
void wrapt$fun_e2ed85b(vclosure*,vdynamic*);
extern hl_type t$fun_e2ed85b;
lime__app__Future lime_app_Future_onError(lime__app__Future,vclosure*);
extern hl_type t$fun_24d6a12;
void wrapt$fun_b3252e9(vclosure*,vdynamic*);
extern hl_type t$fun_b3252e9;
lime__app__Future lime_app_Future_onComplete(lime__app__Future,vclosure*);
haxe__io__Bytes haxe_io_BytesBuffer_getBytes(haxe__io__BytesBuffer);
#include <lime/net/HTTPRequestHeader.h>
hl__types__ArrayObj String_split(String,String);
String StringTools_trim(String);
void lime_net_HTTPRequestHeader_new(lime__net__HTTPRequestHeader,String,String);
#include <haxe/io/Error.h>
extern venum* g$haxe_io_Error_OutsideBounds;
void haxe_io_BytesBuffer___add(haxe__io__BytesBuffer,vbyte*,int,int);
String String_substring(String,int,vdynamic*);
bool sys_FileSystem_exists(String);
extern String s$Cannot_load_file_;
void lime_system_ThreadPool_sendError(lime__system__ThreadPool,vdynamic*);
haxe__io__Bytes lime_utils__Bytes_Bytes_Impl__fromFile(String);
void lime_system_ThreadPool_sendProgress(lime__system__ThreadPool,vdynamic*);
void lime_system_ThreadPool_sendComplete(lime__system__ThreadPool,vdynamic*);
bool lime_app_Promise_get_isError(lime__app__Promise);
bool lime_app_Promise_get_isComplete(lime__app__Promise);
#include <lime/net/curl/CURLMultiMessage.h>
int lime_net_curl_CURLMulti_addHandle(lime__net__curl__CURLMulti,lime__net__curl__CURL);
int lime_net_curl_CURLMulti_wait(lime__net__curl__CURLMulti,int);
int lime_net_curl_CURLMulti_perform(lime__net__curl__CURLMulti);
lime__net__curl__CURLMultiMessage lime_net_curl_CURLMulti_infoRead(lime__net__curl__CURLMulti);
int lime_net_curl_CURLMulti_get_runningHandles(lime__net__curl__CURLMulti);
vdynamic* lime_net_curl_CURL_getInfo(lime__net__curl__CURL,int);
int lime_net_curl_CURLMulti_removeHandle(lime__net__curl__CURLMulti,lime__net__curl__CURL);
void lime_net_curl_CURL_cleanup(lime__net__curl__CURL);
extern hl_type t$vrt_e1d9592;
bool haxe_ds_ObjectMap_exists(haxe__ds__ObjectMap,vdynamic*);
vdynamic* haxe_ds_ObjectMap_get(haxe__ds__ObjectMap,vdynamic*);
bool hl_types_ArrayObj_remove(hl__types__ArrayObj,vdynamic*);
bool haxe_ds_ObjectMap_remove(haxe__ds__ObjectMap,vdynamic*);
extern String s$Status_;
String String___alloc__(vbyte*,int);
String lime_net_curl_CURL_strerror(int);
extern hl_type t$haxe_io_BytesBuffer;
void haxe_io_BytesBuffer_new(haxe__io__BytesBuffer);

void lime__internal_backend_native_NativeHTTPRequest_loadData__$4(vclosure* r0,vdynamic* r1) {
	vvirtual *r2;
	r2 = hl_to_virtual(&t$vrt_a58b998,(vdynamic*)r1);
	r0->hasValue ? ((void (*)(vdynamic*,vvirtual*))r0->fun)((vdynamic*)r0->value,r2) : ((void (*)(vvirtual*))r0->fun)(r2);
	return;
}

void lime__internal_backend_native_NativeHTTPRequest_loadData__$3(vclosure* r0,vdynamic* r1) {
	vvirtual *r2;
	r2 = hl_to_virtual(&t$vrt_ad1db93,(vdynamic*)r1);
	r0->hasValue ? ((void (*)(vdynamic*,vvirtual*))r0->fun)((vdynamic*)r0->value,r2) : ((void (*)(vvirtual*))r0->fun)(r2);
	return;
}

void lime__internal_backend_native_NativeHTTPRequest_loadData__$2(vclosure* r0,vdynamic* r1) {
	vvirtual *r2;
	r2 = hl_to_virtual(&t$vrt_0d9ac00,(vdynamic*)r1);
	r0->hasValue ? ((void (*)(vdynamic*,vvirtual*))r0->fun)((vdynamic*)r0->value,r2) : ((void (*)(vvirtual*))r0->fun)(r2);
	return;
}

void lime__internal_backend_native_NativeHTTPRequest_loadData__$1(vclosure* r0,vdynamic* r1) {
	vvirtual *r2;
	r2 = hl_to_virtual(&t$vrt_1bd3a89,(vdynamic*)r1);
	r0->hasValue ? ((void (*)(vdynamic*,vvirtual*))r0->fun)((vdynamic*)r0->value,r2) : ((void (*)(vvirtual*))r0->fun)(r2);
	return;
}

void lime__internal_backend_native_NativeHTTPRequest_cancel(lime___internal__backend__native__NativeHTTPRequest r0) {
	lime__net__curl__CURL r2, r3;
	bool r1;
	haxe__Timer r5;
	r1 = true;
	r0->canceled = r1;
	r2 = r0->curl;
	r3 = NULL;
	if( r2 != r3 ) goto label$e456659_5_7;
	r1 = false;
	goto label$e456659_5_8;
	label$e456659_5_7:
	r1 = true;
	label$e456659_5_8:
	r5 = r0->timeout;
	if( !r5 ) goto label$e456659_5_15;
	r5 = r0->timeout;
	if( r5 == NULL ) hl_null_access();
	haxe_Timer_stop(r5);
	r5 = NULL;
	r0->timeout = r5;
	label$e456659_5_15:
	return;
}

void lime__internal_backend_native_NativeHTTPRequest_init(lime___internal__backend__native__NativeHTTPRequest r0,vvirtual* r1) {
	r0->parent = r1;
	return;
}

void lime__internal_backend_native_NativeHTTPRequest_initRequest(lime___internal__backend__native__NativeHTTPRequest r0,String r1,bool r2) {
	String r9, r14, r15, r17, r21, r23, r24;
	lime__net__curl__CURL r6;
	hl__types__ArrayObj r28, r31;
	haxe__ds__StringMap r12;
	vvirtual *r8, *r11;
	hl_type *r30;
	venum *r27;
	bool r13;
	haxe__io__Bytes r3, r10;
	lime___internal__backend__native__$NativeHTTPRequest r38;
	vclosure *r35, *r36, *r37;
	hl__types__ArrayDyn r32;
	int *r19;
	vdynamic *r7, *r25, *r34;
	varray *r29;
	vbyte *r18, *r20;
	int r4, r16, r22, r26, r33;
	r4 = 0;
	r3 = haxe_io_Bytes_alloc(r4);
	r0->bytes = r3;
	r4 = 0;
	r0->bytesLoaded = r4;
	r4 = 0;
	r0->bytesTotal = r4;
	r4 = 0;
	r0->writeBytesLoaded = r4;
	r4 = 0;
	r0->writeBytesTotal = r4;
	r6 = r0->curl;
	if( r6 ) goto label$e456659_7_18;
	r6 = (lime__net__curl__CURL)hl_alloc_obj(&t$lime_net_curl_CURL);
	r7 = NULL;
	lime_net_curl_CURL_new(r6,r7);
	r0->curl = r6;
	goto label$e456659_7_21;
	label$e456659_7_18:
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	lime_net_curl_CURL_reset(r6);
	label$e456659_7_21:
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r3 = hl_vfields(r8)[12] ? (*(haxe__io__Bytes*)(hl_vfields(r8)[12])) : (haxe__io__Bytes)hl_dyn_getp(r8->value,40064820/*data*/,&t$haxe_io_Bytes);
	r9 = (String)s$;
	if( r3 ) goto label$e456659_7_106;
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r12 = hl_vfields(r8)[9] ? (*(haxe__ds__StringMap*)(hl_vfields(r8)[9])) : (haxe__ds__StringMap)hl_dyn_getp(r8->value,377542296/*formData*/,&t$haxe_ds_StringMap);
	if( r12 == NULL ) hl_null_access();
	r11 = haxe_ds_StringMap_keys(r12);
	label$e456659_7_31:
	if( r11 == NULL ) hl_null_access();
	if( hl_vfields(r11)[0] ) r13 = ((bool (*)(vdynamic*))hl_vfields(r11)[0])(r11->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r11->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r13 = (bool)ret.v.i;
	}
	if( !r13 ) goto label$e456659_7_71;
	if( hl_vfields(r11)[1] ) r14 = ((String (*)(vdynamic*))hl_vfields(r11)[1])(r11->value); else {
		r14 = (String)hl_dyn_call_obj(r11->value,&t$fun_820f49a,151160317/*next*/,NULL,NULL);
	}
	if( r9 == NULL ) hl_null_access();
	r4 = r9->length;
	r16 = 0;
	if( r16 >= r4 ) goto label$e456659_7_43;
	r17 = (String)s$6cff047;
	r15 = String___add__(r9,r17);
	r9 = r15;
	label$e456659_7_43:
	r4 = 0;
	if( r14 == NULL ) hl_null_access();
	r18 = r14->bytes;
	r19 = &r4;
	r18 = hl_url_encode(r18,r19);
	r15 = (String)hl_alloc_obj(&t$String);
	r15->bytes = r18;
	r15->length = r4;
	r16 = 0;
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r12 = hl_vfields(r8)[9] ? (*(haxe__ds__StringMap*)(hl_vfields(r8)[9])) : (haxe__ds__StringMap)hl_dyn_getp(r8->value,377542296/*formData*/,&t$haxe_ds_StringMap);
	if( r12 == NULL ) hl_null_access();
	r7 = haxe_ds_StringMap_get(r12,r14);
	r17 = Std_string(r7);
	if( r17 == NULL ) hl_null_access();
	r20 = r17->bytes;
	r19 = &r16;
	r20 = hl_url_encode(r20,r19);
	r17 = (String)hl_alloc_obj(&t$String);
	r17->bytes = r20;
	r17->length = r16;
	r24 = (String)s$43ec3e5;
	r23 = String___add__(r15,r24);
	r23 = String___add__(r23,r17);
	r21 = String___add__(r9,r23);
	r9 = r21;
	goto label$e456659_7_31;
	label$e456659_7_71:
	r15 = (String)s$;
	if( r9 == r15 || (r9 && r15 && String___compare(r9,(vdynamic*)r15) == 0) ) goto label$e456659_7_99;
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r14 = hl_vfields(r8)[6] ? (*(String*)(hl_vfields(r8)[6])) : (String)hl_dyn_getp(r8->value,156956385/*method*/,&t$String);
	r15 = (String)s$GET;
	if( r14 != r15 && (!r14 || !r15 || String___compare(r14,(vdynamic*)r15) != 0) ) goto label$e456659_7_96;
	if( r1 == NULL ) hl_null_access();
	r15 = (String)s$d1457b7;
	r25 = NULL;
	r22 = String_indexOf(r1,r15,r25);
	r26 = -1;
	if( r26 >= r22 ) goto label$e456659_7_89;
	r15 = (String)s$6cff047;
	r15 = String___add__(r15,r9);
	r14 = String___add__(r1,r15);
	r1 = r14;
	goto label$e456659_7_93;
	label$e456659_7_89:
	r15 = (String)s$d1457b7;
	r15 = String___add__(r15,r9);
	r14 = String___add__(r1,r15);
	r1 = r14;
	label$e456659_7_93:
	r14 = (String)s$;
	r9 = r14;
	goto label$e456659_7_99;
	label$e456659_7_96:
	r27 = NULL;
	r10 = haxe_io_Bytes_ofString(r9,r27);
	r3 = r10;
	label$e456659_7_99:
	if( !r3 ) goto label$e456659_7_106;
	if( r3 == NULL ) hl_null_access();
	r22 = r3->length;
	r26 = 0;
	if( r22 != r26 ) goto label$e456659_7_106;
	r10 = NULL;
	r3 = r10;
	label$e456659_7_106:
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 10002;
	r22 = lime_net_curl_CURL_setOption(r6,r22,((vdynamic*)r1));
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r14 = hl_vfields(r8)[6] ? (*(String*)(hl_vfields(r8)[6])) : (String)hl_dyn_getp(r8->value,156956385/*method*/,&t$String);
	if( !r14 ) goto label$e456659_7_122;
	r22 = r14->length;
	r26 = 3;
	if( r22 != r26 ) goto label$e456659_7_122;
	r18 = r14->bytes;
	r20 = (vbyte*)USTR("GET");
	r22 = hl_string_compare(r18,r20,r22);
	r26 = 0;
	if( r22 == r26 ) goto label$e456659_7_170;
	label$e456659_7_122:
	if( !r14 ) goto label$e456659_7_131;
	r22 = r14->length;
	r26 = 4;
	if( r22 != r26 ) goto label$e456659_7_131;
	r18 = r14->bytes;
	r20 = (vbyte*)USTR("HEAD");
	r22 = hl_string_compare(r18,r20,r22);
	r26 = 0;
	if( r22 == r26 ) goto label$e456659_7_177;
	label$e456659_7_131:
	if( !r14 ) goto label$e456659_7_140;
	r22 = r14->length;
	r26 = 4;
	if( r22 != r26 ) goto label$e456659_7_140;
	r18 = r14->bytes;
	r20 = (vbyte*)USTR("POST");
	r22 = hl_string_compare(r18,r20,r22);
	r26 = 0;
	if( r22 == r26 ) goto label$e456659_7_184;
	label$e456659_7_140:
	if( !r14 ) goto label$e456659_7_149;
	r22 = r14->length;
	r26 = 3;
	if( r22 != r26 ) goto label$e456659_7_149;
	r18 = r14->bytes;
	r20 = (vbyte*)USTR("PUT");
	r22 = hl_string_compare(r18,r20,r22);
	r26 = 0;
	if( r22 == r26 ) goto label$e456659_7_216;
	label$e456659_7_149:
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 10036;
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r14 = hl_vfields(r8)[6] ? (*(String*)(hl_vfields(r8)[6])) : (String)hl_dyn_getp(r8->value,156956385/*method*/,&t$String);
	r14 = Std_string(((vdynamic*)r14));
	r22 = lime_net_curl_CURL_setOption(r6,r22,((vdynamic*)r14));
	if( !r3 ) goto label$e456659_7_169;
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 10009;
	r22 = lime_net_curl_CURL_setOption(r6,r22,((vdynamic*)r3));
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 14;
	if( r3 == NULL ) hl_null_access();
	r26 = r3->length;
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r26;
	r22 = lime_net_curl_CURL_setOption(r6,r22,r7);
	label$e456659_7_169:
	goto label$e456659_7_234;
	label$e456659_7_170:
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 80;
	r13 = true;
	r7 = hl_alloc_dynbool(r13);
	r22 = lime_net_curl_CURL_setOption(r6,r22,r7);
	goto label$e456659_7_234;
	label$e456659_7_177:
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 44;
	r13 = true;
	r7 = hl_alloc_dynbool(r13);
	r22 = lime_net_curl_CURL_setOption(r6,r22,r7);
	goto label$e456659_7_234;
	label$e456659_7_184:
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 47;
	r13 = true;
	r7 = hl_alloc_dynbool(r13);
	r22 = lime_net_curl_CURL_setOption(r6,r22,r7);
	if( !r3 ) goto label$e456659_7_209;
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 10009;
	r22 = lime_net_curl_CURL_setOption(r6,r22,((vdynamic*)r3));
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 14;
	if( r3 == NULL ) hl_null_access();
	r26 = r3->length;
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r26;
	r22 = lime_net_curl_CURL_setOption(r6,r22,r7);
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 60;
	r26 = r3->length;
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r26;
	r22 = lime_net_curl_CURL_setOption(r6,r22,r7);
	goto label$e456659_7_215;
	label$e456659_7_209:
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 60;
	r26 = 0;
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r26;
	r22 = lime_net_curl_CURL_setOption(r6,r22,r7);
	label$e456659_7_215:
	goto label$e456659_7_234;
	label$e456659_7_216:
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 46;
	r13 = true;
	r7 = hl_alloc_dynbool(r13);
	r22 = lime_net_curl_CURL_setOption(r6,r22,r7);
	if( !r3 ) goto label$e456659_7_234;
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 10009;
	r22 = lime_net_curl_CURL_setOption(r6,r22,((vdynamic*)r3));
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 14;
	if( r3 == NULL ) hl_null_access();
	r26 = r3->length;
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r26;
	r22 = lime_net_curl_CURL_setOption(r6,r22,r7);
	label$e456659_7_234:
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 52;
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r13 = hl_vfields(r8)[10] ? (*(bool*)(hl_vfields(r8)[10])) : (bool)hl_dyn_geti(r8->value,356539317/*followRedirects*/,&t$_bool);
	r7 = hl_alloc_dynbool(r13);
	r22 = lime_net_curl_CURL_setOption(r6,r22,r7);
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 58;
	r13 = true;
	r7 = hl_alloc_dynbool(r13);
	r22 = lime_net_curl_CURL_setOption(r6,r22,r7);
	r30 = &t$String;
	r22 = 0;
	r29 = hl_alloc_array(r30,r22);
	r28 = hl_types_ArrayObj_alloc(r29);
	if( r28 == NULL ) hl_null_access();
	r14 = (String)s$Expect_;
	r22 = hl_types_ArrayObj_push(r28,((vdynamic*)r14));
	r14 = NULL;
	r22 = 0;
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r31 = hl_vfields(r8)[8] ? (*(hl__types__ArrayObj*)(hl_vfields(r8)[8])) : (hl__types__ArrayObj)hl_dyn_getp(r8->value,50877397/*headers*/,&t$hl_types_ArrayObj);
	r32 = (hl__types__ArrayDyn)hl_dyn_castp(&r31,&t$hl_types_ArrayObj,&t$hl_types_ArrayDyn);
	label$e456659_7_261:
	if( r32 == NULL ) hl_null_access();
	r33 = hl_types_ArrayDyn_get_length(r32);
	if( r22 >= r33 ) goto label$e456659_7_287;
	r7 = ((vdynamic* (*)(hl__types__ArrayDyn,int))r32->$type->vobj_proto[0])(r32,r22);
	++r22;
	if( r7 == NULL ) hl_null_access();
	r34 = (vdynamic*)hl_dyn_getp((vdynamic*)r7,150958933/*name*/,&t$_dyn);
	r15 = (String)s$Content_Type;
	{ int i = hl_dyn_compare((vdynamic*)r34,(vdynamic*)r15); if( i != 0 ) goto label$e456659_7_275; };
	r34 = (vdynamic*)hl_dyn_getp((vdynamic*)r7,297304054/*value*/,&t$_dyn);
	r15 = (String)hl_dyn_castp(&r34,&t$_dyn,&t$String);
	r14 = r15;
	goto label$e456659_7_286;
	label$e456659_7_275:
	if( r28 == NULL ) hl_null_access();
	r15 = (String)s$;
	r34 = (vdynamic*)hl_dyn_getp((vdynamic*)r7,150958933/*name*/,&t$_dyn);
	r17 = Std_string(r34);
	r15 = String___add__(r15,r17);
	r17 = (String)s$e265492;
	r15 = String___add__(r15,r17);
	r34 = (vdynamic*)hl_dyn_getp((vdynamic*)r7,297304054/*value*/,&t$_dyn);
	r17 = Std_string(r34);
	r15 = String___add__(r15,r17);
	r26 = hl_types_ArrayObj_push(r28,((vdynamic*)r15));
	label$e456659_7_286:
	goto label$e456659_7_261;
	label$e456659_7_287:
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r15 = hl_vfields(r8)[13] ? (*(String*)(hl_vfields(r8)[13])) : (String)hl_dyn_getp(r8->value,175848728/*contentType*/,&t$String);
	if( !r15 ) goto label$e456659_7_295;
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r15 = hl_vfields(r8)[13] ? (*(String*)(hl_vfields(r8)[13])) : (String)hl_dyn_getp(r8->value,175848728/*contentType*/,&t$String);
	r14 = r15;
	label$e456659_7_295:
	if( r14 ) goto label$e456659_7_307;
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r10 = hl_vfields(r8)[12] ? (*(haxe__io__Bytes*)(hl_vfields(r8)[12])) : (haxe__io__Bytes)hl_dyn_getp(r8->value,40064820/*data*/,&t$haxe_io_Bytes);
	if( !r10 ) goto label$e456659_7_303;
	r15 = (String)s$application_octet_stream;
	r14 = r15;
	goto label$e456659_7_307;
	label$e456659_7_303:
	r17 = (String)s$;
	if( r9 == r17 || (r9 && r17 && String___compare(r9,(vdynamic*)r17) == 0) ) goto label$e456659_7_307;
	r15 = (String)s$c71c861;
	r14 = r15;
	label$e456659_7_307:
	if( !r14 ) goto label$e456659_7_312;
	if( r28 == NULL ) hl_null_access();
	r15 = (String)s$Content_Type_;
	r15 = String___add__(r15,r14);
	r22 = hl_types_ArrayObj_push(r28,((vdynamic*)r15));
	label$e456659_7_312:
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 10023;
	r22 = lime_net_curl_CURL_setOption(r6,r22,((vdynamic*)r28));
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 20056;
	r35 = hl_alloc_closure_ptr(&t$fun_e418fed,lime__internal_backend_native_NativeHTTPRequest_curl_onProgress,r0);
	r22 = lime_net_curl_CURL_setOption(r6,r22,((vdynamic*)r35));
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 20011;
	r36 = hl_alloc_closure_ptr(&t$fun_133a5db,lime__internal_backend_native_NativeHTTPRequest_curl_onWrite,r0);
	r22 = lime_net_curl_CURL_setOption(r6,r22,((vdynamic*)r36));
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r13 = hl_vfields(r8)[11] ? (*(bool*)(hl_vfields(r8)[11])) : (bool)hl_dyn_geti(r8->value,88552066/*enableResponseHeaders*/,&t$_bool);
	if( !r13 ) goto label$e456659_7_342;
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r30 = &t$lime_net_HTTPRequestHeader;
	r22 = 0;
	r29 = hl_alloc_array(r30,r22);
	r31 = hl_types_ArrayObj_alloc(r29);
	if( hl_vfields(r8)[5] ) *(hl__types__ArrayObj*)(hl_vfields(r8)[5]) = (hl__types__ArrayObj)r31; else hl_dyn_setp(r8->value,63573711/*responseHeaders*/,&t$hl_types_ArrayObj,r31);
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 20079;
	r37 = hl_alloc_closure_ptr(&t$fun_390d07b,lime__internal_backend_native_NativeHTTPRequest_curl_onHeader,r0);
	r22 = lime_net_curl_CURL_setOption(r6,r22,((vdynamic*)r37));
	label$e456659_7_342:
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r13 = hl_vfields(r8)[7] ? (*(bool*)(hl_vfields(r8)[7])) : (bool)hl_dyn_geti(r8->value,-57729440/*manageCookies*/,&t$_bool);
	if( !r13 ) goto label$e456659_7_374;
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 10031;
	r15 = (String)s$;
	r22 = lime_net_curl_CURL_setOption(r6,r22,((vdynamic*)r15));
	r38 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r31 = r38->cookieList;
	if( !r31 ) goto label$e456659_7_374;
	r22 = 0;
	r38 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r31 = r38->cookieList;
	label$e456659_7_357:
	if( r31 == NULL ) hl_null_access();
	r33 = r31->length;
	if( r22 >= r33 ) goto label$e456659_7_374;
	r33 = r31->length;
	if( ((unsigned)r22) < ((unsigned)r33) ) goto label$e456659_7_365;
	r15 = NULL;
	goto label$e456659_7_368;
	label$e456659_7_365:
	r29 = r31->array;
	r7 = ((vdynamic**)(r29 + 1))[r22];
	r15 = (String)r7;
	label$e456659_7_368:
	++r22;
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r26 = 10135;
	r26 = lime_net_curl_CURL_setOption(r6,r26,((vdynamic*)r15));
	goto label$e456659_7_357;
	label$e456659_7_374:
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 64;
	r13 = false;
	r7 = hl_alloc_dynbool(r13);
	r22 = lime_net_curl_CURL_setOption(r6,r22,r7);
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 81;
	r26 = 0;
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r26;
	r22 = lime_net_curl_CURL_setOption(r6,r22,r7);
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 10018;
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r15 = hl_vfields(r8)[1] ? (*(String*)(hl_vfields(r8)[1])) : (String)hl_dyn_getp(r8->value,-401412107/*userAgent*/,&t$String);
	if( r15 ) goto label$e456659_7_395;
	r15 = (String)s$libcurl_agent_1_0;
	goto label$e456659_7_398;
	label$e456659_7_395:
	r8 = r0->parent;
	if( r8 == NULL ) hl_null_access();
	r15 = hl_vfields(r8)[1] ? (*(String*)(hl_vfields(r8)[1])) : (String)hl_dyn_getp(r8->value,-401412107/*userAgent*/,&t$String);
	label$e456659_7_398:
	r22 = lime_net_curl_CURL_setOption(r6,r22,((vdynamic*)r15));
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 99;
	r13 = true;
	r7 = hl_alloc_dynbool(r13);
	r22 = lime_net_curl_CURL_setOption(r6,r22,r7);
	r6 = r0->curl;
	if( r6 == NULL ) hl_null_access();
	r22 = 53;
	r13 = !r2;
	r7 = hl_alloc_dynbool(r13);
	r22 = lime_net_curl_CURL_setOption(r6,r22,r7);
	return;
}

lime__app__Future lime__internal_backend_native_NativeHTTPRequest_loadData(lime___internal__backend__native__NativeHTTPRequest r0,String r1,bool* r2) {
	lime__net__curl__CURL r28;
	String r5, r11;
	haxe__ds__ObjectMap r27;
	lime__net__curl__CURLMulti r24;
	hl__types__ArrayObj r26;
	vvirtual *r23;
	bool r3, r9;
	haxe__Timer r32;
	hl_deque *r29;
	lime__app__Future r6;
	lime___internal__backend__native__$NativeHTTPRequest r15;
	lime__system__ThreadPool r14;
	lime__app__Promise r8;
	double r33;
	vclosure *r19, *r20, *r21, *r22, *r31, *r34;
	lime__app___Event_Dynamic_Void r18;
	int *r16, *r17;
	vdynamic *r7, *r12;
	int r10, r13, r25, r30;
	static vclosure cl$0 = { &t$fun_0ecc9bc, lime__internal_backend_native_NativeHTTPRequest_localThreadPool_doWork, 0 };
	static vclosure cl$1 = { &t$fun_9cf1d2d, lime__internal_backend_native_NativeHTTPRequest_localThreadPool_onProgress, 0 };
	static vclosure cl$2 = { &t$fun_82757b3, lime__internal_backend_native_NativeHTTPRequest_localThreadPool_onComplete, 0 };
	static vclosure cl$3 = { &t$fun_06422e9, lime__internal_backend_native_NativeHTTPRequest_localThreadPool_onError, 0 };
	static vclosure cl$4 = { &t$fun_0ecc9bc, lime__internal_backend_native_NativeHTTPRequest_multiThreadPool_doWork, 0 };
	static vclosure cl$5 = { &t$fun_f9d0378, lime__internal_backend_native_NativeHTTPRequest_multiThreadPool_onProgress, 0 };
	static vclosure cl$6 = { &t$fun_0ecc9bc, lime__internal_backend_native_NativeHTTPRequest_multiThreadPool_onComplete, 0 };
	static vclosure cl$7 = { &t$fun_7b48b4f, lime__internal_backend_native_NativeHTTPRequest_multiProgressTimer_onRun, 0 };
	if( r2 ) goto label$e456659_8_3;
	r3 = true;
	goto label$e456659_8_4;
	label$e456659_8_3:
	r3 = *r2;
	label$e456659_8_4:
	if( r1 ) goto label$e456659_8_8;
	r5 = (String)s$The_URI_must_not_be_null;
	r6 = lime_app_Future_withError(((vdynamic*)r5));
	return r6;
	label$e456659_8_8:
	r8 = (lime__app__Promise)hl_alloc_obj(&t$lime_app_Promise);
	lime_app_Promise_new(r8);
	r0->promise = r8;
	r9 = false;
	r0->canceled = r9;
	if( r1 == NULL ) hl_null_access();
	r11 = (String)s$http_;
	r12 = NULL;
	r10 = String_indexOf(r1,r11,r12);
	r13 = -1;
	if( r10 != r13 ) goto label$e456659_8_91;
	r11 = (String)s$https_;
	r12 = NULL;
	r10 = String_indexOf(r1,r11,r12);
	r13 = -1;
	if( r10 != r13 ) goto label$e456659_8_91;
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r14 = r15->localThreadPool;
	if( r14 ) goto label$e456659_8_83;
	r14 = (lime__system__ThreadPool)hl_alloc_obj(&t$lime_system_ThreadPool);
	r10 = 0;
	r16 = &r10;
	r13 = 1;
	r17 = &r13;
	lime_system_ThreadPool_new(r14,r16,r17);
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r15->localThreadPool = r14;
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r14 = r15->localThreadPool;
	if( r14 == NULL ) hl_null_access();
	r18 = r14->doWork;
	if( r18 == NULL ) hl_null_access();
	r19 = &cl$0;
	r2 = NULL;
	r16 = NULL;
	lime_app__Event_Dynamic_Void_add(r18,((vdynamic*)r19),r2,r16);
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r14 = r15->localThreadPool;
	if( r14 == NULL ) hl_null_access();
	r18 = r14->onProgress;
	if( r18 == NULL ) hl_null_access();
	r20 = &cl$1;
	if( r20 ) goto label$e456659_8_53;
	r19 = NULL;
	goto label$e456659_8_54;
	label$e456659_8_53:
	r19 = hl_alloc_closure_ptr(&t$fun_a5806e1,lime__internal_backend_native_NativeHTTPRequest_loadData__$1,r20);
	label$e456659_8_54:
	r2 = NULL;
	r16 = NULL;
	lime_app__Event_Dynamic_Void_add(r18,((vdynamic*)r19),r2,r16);
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r14 = r15->localThreadPool;
	if( r14 == NULL ) hl_null_access();
	r18 = r14->onComplete;
	if( r18 == NULL ) hl_null_access();
	r21 = &cl$2;
	if( r21 ) goto label$e456659_8_66;
	r19 = NULL;
	goto label$e456659_8_67;
	label$e456659_8_66:
	r19 = hl_alloc_closure_ptr(&t$fun_09d21a6,lime__internal_backend_native_NativeHTTPRequest_loadData__$2,r21);
	label$e456659_8_67:
	r2 = NULL;
	r16 = NULL;
	lime_app__Event_Dynamic_Void_add(r18,((vdynamic*)r19),r2,r16);
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r14 = r15->localThreadPool;
	if( r14 == NULL ) hl_null_access();
	r18 = r14->onError;
	if( r18 == NULL ) hl_null_access();
	r22 = &cl$3;
	if( r22 ) goto label$e456659_8_79;
	r19 = NULL;
	goto label$e456659_8_80;
	label$e456659_8_79:
	r19 = hl_alloc_closure_ptr(&t$fun_2975f38,lime__internal_backend_native_NativeHTTPRequest_loadData__$3,r22);
	label$e456659_8_80:
	r2 = NULL;
	r16 = NULL;
	lime_app__Event_Dynamic_Void_add(r18,((vdynamic*)r19),r2,r16);
	label$e456659_8_83:
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r14 = r15->localThreadPool;
	if( r14 == NULL ) hl_null_access();
	r23 = hl_alloc_virtual(&t$vrt_a91079a);
	if( hl_vfields(r23)[0] ) *(lime___internal__backend__native__NativeHTTPRequest*)(hl_vfields(r23)[0]) = (lime___internal__backend__native__NativeHTTPRequest)r0; else hl_dyn_setp(r23->value,434184351/*instance*/,&t$lime__internal_backend_native_NativeHTTPRequest,r0);
	if( hl_vfields(r23)[1] ) *(String*)(hl_vfields(r23)[1]) = (String)r1; else hl_dyn_setp(r23->value,5843820/*uri*/,&t$String,r1);
	lime_system_ThreadPool_queue(r14,((vdynamic*)r23));
	goto label$e456659_8_198;
	label$e456659_8_91:
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r24 = r15->multi;
	if( r24 ) goto label$e456659_8_109;
	r25 = 3;
	r25 = lime_net_curl_CURL_globalInit(r25);
	r24 = (lime__net__curl__CURLMulti)hl_alloc_obj(&t$lime_net_curl_CURLMulti);
	r7 = NULL;
	lime_net_curl_CURLMulti_new(r24,r7);
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r15->multi = r24;
	r26 = (hl__types__ArrayObj)hl_alloc_obj(&t$hl_types_ArrayObj);
	hl_types_ArrayObj_new(r26);
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r15->activeInstances = r26;
	r27 = (haxe__ds__ObjectMap)hl_alloc_obj(&t$haxe_ds_ObjectMap);
	haxe_ds_ObjectMap_new(r27);
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r15->multiInstances = r27;
	label$e456659_8_109:
	lime__internal_backend_native_NativeHTTPRequest_initRequest(r0,r1,r3);
	r28 = r0->curl;
	if( !r28 ) goto label$e456659_8_198;
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r26 = r15->activeInstances;
	if( r26 == NULL ) hl_null_access();
	r25 = hl_types_ArrayObj_push(r26,((vdynamic*)r0));
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r27 = r15->multiInstances;
	if( r27 == NULL ) hl_null_access();
	r28 = r0->curl;
	haxe_ds_ObjectMap_set(r27,((vdynamic*)r28),((vdynamic*)r0));
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r29 = r15->multiAddHandle;
	if( r29 ) goto label$e456659_8_127;
	r29 = sys_thread__Deque_Deque_Impl___new();
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r15->multiAddHandle = r29;
	label$e456659_8_127:
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r29 = r15->multiAddHandle;
	r28 = r0->curl;
	hl_deque_add(r29,((vdynamic*)r28));
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r14 = r15->multiThreadPool;
	if( r14 ) goto label$e456659_8_173;
	r14 = (lime__system__ThreadPool)hl_alloc_obj(&t$lime_system_ThreadPool);
	r25 = 0;
	r16 = &r25;
	r30 = 1;
	r17 = &r30;
	lime_system_ThreadPool_new(r14,r16,r17);
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r15->multiThreadPool = r14;
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r14 = r15->multiThreadPool;
	if( r14 == NULL ) hl_null_access();
	r18 = r14->doWork;
	if( r18 == NULL ) hl_null_access();
	r19 = &cl$4;
	r2 = NULL;
	r16 = NULL;
	lime_app__Event_Dynamic_Void_add(r18,((vdynamic*)r19),r2,r16);
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r14 = r15->multiThreadPool;
	if( r14 == NULL ) hl_null_access();
	r18 = r14->onProgress;
	if( r18 == NULL ) hl_null_access();
	r31 = &cl$5;
	if( r31 ) goto label$e456659_8_160;
	r19 = NULL;
	goto label$e456659_8_161;
	label$e456659_8_160:
	r19 = hl_alloc_closure_ptr(&t$fun_91f1970,lime__internal_backend_native_NativeHTTPRequest_loadData__$4,r31);
	label$e456659_8_161:
	r2 = NULL;
	r16 = NULL;
	lime_app__Event_Dynamic_Void_add(r18,((vdynamic*)r19),r2,r16);
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r14 = r15->multiThreadPool;
	if( r14 == NULL ) hl_null_access();
	r18 = r14->onComplete;
	if( r18 == NULL ) hl_null_access();
	r19 = &cl$6;
	r2 = NULL;
	r16 = NULL;
	lime_app__Event_Dynamic_Void_add(r18,((vdynamic*)r19),r2,r16);
	label$e456659_8_173:
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r9 = r15->multiThreadPoolRunning;
	if( r9 ) goto label$e456659_8_184;
	r9 = true;
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r15->multiThreadPoolRunning = r9;
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r14 = r15->multiThreadPool;
	if( r14 == NULL ) hl_null_access();
	r7 = NULL;
	lime_system_ThreadPool_queue(r14,r7);
	label$e456659_8_184:
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r32 = r15->multiProgressTimer;
	if( r32 ) goto label$e456659_8_198;
	r32 = (haxe__Timer)hl_alloc_obj(&t$haxe_Timer);
	r33 = 8.;
	haxe_Timer_new(r32,r33);
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r15->multiProgressTimer = r32;
	r15 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r32 = r15->multiProgressTimer;
	if( r32 == NULL ) hl_null_access();
	r34 = &cl$7;
	r32->run = r34;
	lime__internal_backend_native_NativeHTTPRequest_multiProgressTimer_onRun();
	label$e456659_8_198:
	r6 = r8->future;
	return r6;
}

void lime__internal_backend_native_NativeHTTPRequest_loadText__$1(lime__app__Promise r0,haxe__io__Bytes r1) {
	String r4;
	venum *r7;
	lime__app__Promise r3;
	int r5, r6;
	if( r1 ) goto label$e456659_9_5;
	if( r0 == NULL ) hl_null_access();
	r4 = NULL;
	r3 = lime_app_Promise_complete(r0,((vdynamic*)r4));
	goto label$e456659_9_12;
	label$e456659_9_5:
	if( r0 == NULL ) hl_null_access();
	if( r1 == NULL ) hl_null_access();
	r5 = 0;
	r6 = r1->length;
	r7 = NULL;
	r4 = haxe_io_Bytes_getString(r1,r5,r6,r7);
	r3 = lime_app_Promise_complete(r0,((vdynamic*)r4));
	label$e456659_9_12:
	return;
}

lime__app__Future lime__internal_backend_native_NativeHTTPRequest_loadText(lime___internal__backend__native__NativeHTTPRequest r0,String r1) {
	bool *r6;
	bool r5;
	lime__app__Future r4, r7;
	lime__app__Promise r2;
	vclosure *r8, *r9, *r10, *r11, *r12;
	r2 = (lime__app__Promise)hl_alloc_obj(&t$lime_app_Promise);
	lime_app_Promise_new(r2);
	r5 = false;
	r6 = &r5;
	r4 = lime__internal_backend_native_NativeHTTPRequest_loadData(r0,r1,r6);
	if( r4 == NULL ) hl_null_access();
	r8 = hl_alloc_closure_ptr(&t$fun_a4fdf42,lime_app_Promise_progress,r2);
	if( r8 ) goto label$e456659_10_10;
	r9 = NULL;
	goto label$e456659_10_11;
	label$e456659_10_10:
	r9 = hl_alloc_closure_ptr(&t$fun_354f561,wrapt$fun_354f561,r8);
	label$e456659_10_11:
	r7 = lime_app_Future_onProgress(r4,r9);
	r10 = hl_alloc_closure_ptr(&t$fun_2b2a2eb,lime_app_Promise_error,r2);
	if( r10 ) goto label$e456659_10_16;
	r11 = NULL;
	goto label$e456659_10_17;
	label$e456659_10_16:
	r11 = hl_alloc_closure_ptr(&t$fun_e2ed85b,wrapt$fun_e2ed85b,r10);
	label$e456659_10_17:
	r7 = lime_app_Future_onError(r4,r11);
	r12 = hl_alloc_closure_ptr(&t$fun_24d6a12,lime__internal_backend_native_NativeHTTPRequest_loadText__$1,r2);
	if( r12 ) goto label$e456659_10_22;
	r11 = NULL;
	goto label$e456659_10_23;
	label$e456659_10_22:
	r11 = hl_alloc_closure_ptr(&t$fun_b3252e9,wrapt$fun_b3252e9,r12);
	label$e456659_10_23:
	r7 = lime_app_Future_onComplete(r4,r11);
	r7 = r2->future;
	return r7;
}

haxe__io__Bytes lime__internal_backend_native_NativeHTTPRequest_buildBuffer(lime___internal__backend__native__NativeHTTPRequest r0) {
	haxe__io__BytesBuffer r2;
	haxe__io__Bytes r1;
	r2 = r0->buffer;
	if( r2 == NULL ) hl_null_access();
	r1 = haxe_io_BytesBuffer_getBytes(r2);
	r0->bytes = r1;
	r1 = r0->bytes;
	return r1;
}

void lime__internal_backend_native_NativeHTTPRequest_curl_onHeader(lime___internal__backend__native__NativeHTTPRequest r0,lime__net__curl__CURL r1,String r2) {
	String r4, r5;
	vvirtual *r10;
	hl__types__ArrayObj r3, r8;
	lime__net__HTTPRequestHeader r11;
	vdynamic *r12;
	varray *r13;
	int r7, r9;
	if( r2 == NULL ) hl_null_access();
	r5 = (String)s$e265492;
	r3 = String_split(r2,r5);
	if( r3 == NULL ) hl_null_access();
	r7 = r3->length;
	r9 = 2;
	if( r7 != r9 ) goto label$e456659_12_32;
	r10 = r0->parent;
	if( r10 == NULL ) hl_null_access();
	r8 = hl_vfields(r10)[5] ? (*(hl__types__ArrayObj*)(hl_vfields(r10)[5])) : (hl__types__ArrayObj)hl_dyn_getp(r10->value,63573711/*responseHeaders*/,&t$hl_types_ArrayObj);
	if( r8 == NULL ) hl_null_access();
	r11 = (lime__net__HTTPRequestHeader)hl_alloc_obj(&t$lime_net_HTTPRequestHeader);
	r7 = 0;
	r9 = r3->length;
	if( ((unsigned)r7) < ((unsigned)r9) ) goto label$e456659_12_17;
	r4 = NULL;
	goto label$e456659_12_20;
	label$e456659_12_17:
	r13 = r3->array;
	r12 = ((vdynamic**)(r13 + 1))[r7];
	r4 = (String)r12;
	label$e456659_12_20:
	r4 = StringTools_trim(r4);
	r7 = 1;
	r9 = r3->length;
	if( ((unsigned)r7) < ((unsigned)r9) ) goto label$e456659_12_26;
	r5 = NULL;
	goto label$e456659_12_29;
	label$e456659_12_26:
	r13 = r3->array;
	r12 = ((vdynamic**)(r13 + 1))[r7];
	r5 = (String)r12;
	label$e456659_12_29:
	r5 = StringTools_trim(r5);
	lime_net_HTTPRequestHeader_new(r11,r4,r5);
	r7 = hl_types_ArrayObj_push(r8,((vdynamic*)r11));
	label$e456659_12_32:
	return;
}

void lime__internal_backend_native_NativeHTTPRequest_curl_onProgress(lime___internal__backend__native__NativeHTTPRequest r0,lime__net__curl__CURL r1,double r2,double r3,double r4,double r5) {
	double r8;
	int r7;
	r7 = r0->writeBytesLoaded;
	r8 = (double)r7;
	if( r8 < r5 ) goto label$e456659_13_12;
	r7 = r0->writeBytesLoaded;
	r8 = (double)r7;
	if( r8 < r3 ) goto label$e456659_13_12;
	r7 = r0->writeBytesTotal;
	r8 = (double)r7;
	if( r8 < r4 ) goto label$e456659_13_12;
	r7 = r0->writeBytesTotal;
	r8 = (double)r7;
	if( !(r8 < r2) ) goto label$e456659_13_32;
	label$e456659_13_12:
	r7 = r0->writeBytesLoaded;
	r8 = (double)r7;
	if( !(r8 < r5) ) goto label$e456659_13_17;
	r7 = (int)r5;
	r0->writeBytesLoaded = r7;
	label$e456659_13_17:
	r7 = r0->writeBytesLoaded;
	r8 = (double)r7;
	if( !(r8 < r3) ) goto label$e456659_13_22;
	r7 = (int)r3;
	r0->writeBytesLoaded = r7;
	label$e456659_13_22:
	r7 = r0->writeBytesTotal;
	r8 = (double)r7;
	if( !(r8 < r4) ) goto label$e456659_13_27;
	r7 = (int)r4;
	r0->writeBytesTotal = r7;
	label$e456659_13_27:
	r7 = r0->writeBytesTotal;
	r8 = (double)r7;
	if( !(r8 < r2) ) goto label$e456659_13_32;
	r7 = (int)r2;
	r0->writeBytesTotal = r7;
	label$e456659_13_32:
	return;
}

int lime__internal_backend_native_NativeHTTPRequest_curl_onWrite(lime___internal__backend__native__NativeHTTPRequest r0,lime__net__curl__CURL r1,haxe__io__Bytes r2) {
	haxe__io__BytesBuffer r8;
	venum *r7;
	vbyte *r9;
	int r3, r5, r6;
	if( r2 == NULL ) hl_null_access();
	r3 = r2->length;
	r6 = 0;
	if( r3 < r6 ) goto label$e456659_14_6;
	r6 = r2->length;
	if( r6 >= r3 ) goto label$e456659_14_8;
	label$e456659_14_6:
	r7 = (venum*)g$haxe_io_Error_OutsideBounds;
	hl_throw((vdynamic*)r7);
	label$e456659_14_8:
	r8 = r0->buffer;
	if( r8 == NULL ) hl_null_access();
	r9 = r2->b;
	r5 = 0;
	haxe_io_BytesBuffer___add(r8,r9,r5,r3);
	r3 = r2->length;
	return r3;
}

void lime__internal_backend_native_NativeHTTPRequest_localThreadPool_doWork(vdynamic* r0) {
	String r4, r6, r7;
	vvirtual *r14, *r17, *r18;
	haxe__io__Bytes r16;
	bool r11;
	lime___internal__backend__native__$NativeHTTPRequest r13;
	lime__system__ThreadPool r12;
	lime__app__Promise r15;
	lime___internal__backend__native__NativeHTTPRequest r2;
	vdynamic *r1, *r8;
	int r5, r9, r10;
	if( r0 == NULL ) hl_null_access();
	r1 = (vdynamic*)hl_dyn_getp((vdynamic*)r0,434184351/*instance*/,&t$_dyn);
	r2 = (lime___internal__backend__native__NativeHTTPRequest)hl_dyn_castp(&r1,&t$_dyn,&t$lime__internal_backend_native_NativeHTTPRequest);
	r1 = (vdynamic*)hl_dyn_getp((vdynamic*)r0,5843820/*uri*/,&t$_dyn);
	r4 = (String)hl_dyn_castp(&r1,&t$_dyn,&t$String);
	if( r4 == NULL ) hl_null_access();
	r7 = (String)s$d1457b7;
	r8 = NULL;
	r5 = String_indexOf(r4,r7,r8);
	r10 = -1;
	if( r10 >= r5 ) goto label$e456659_15_15;
	r9 = 0;
	r8 = hl_alloc_dynamic(&t$_i32);
	r8->v.i = r5;
	r6 = String_substring(r4,r9,r8);
	r4 = r6;
	label$e456659_15_15:
	if( !r4 ) goto label$e456659_15_18;
	r11 = sys_FileSystem_exists(r4);
	if( r11 ) goto label$e456659_15_31;
	label$e456659_15_18:
	r13 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r12 = r13->localThreadPool;
	if( r12 == NULL ) hl_null_access();
	r14 = hl_alloc_virtual(&t$vrt_ad1db93);
	if( hl_vfields(r14)[1] ) *(lime___internal__backend__native__NativeHTTPRequest*)(hl_vfields(r14)[1]) = (lime___internal__backend__native__NativeHTTPRequest)r2; else hl_dyn_setp(r14->value,434184351/*instance*/,&t$lime__internal_backend_native_NativeHTTPRequest,r2);
	if( r2 == NULL ) hl_null_access();
	r15 = r2->promise;
	if( hl_vfields(r14)[2] ) *(lime__app__Promise*)(hl_vfields(r14)[2]) = (lime__app__Promise)r15; else hl_dyn_setp(r14->value,-135672421/*promise*/,&t$lime_app_Promise,r15);
	r6 = (String)s$Cannot_load_file_;
	r6 = String___add__(r6,r4);
	if( hl_vfields(r14)[0] ) *(String*)(hl_vfields(r14)[0]) = (String)r6; else hl_dyn_setp(r14->value,321506647/*error*/,&t$String,r6);
	lime_system_ThreadPool_sendError(r12,((vdynamic*)r14));
	goto label$e456659_15_74;
	label$e456659_15_31:
	if( r2 == NULL ) hl_null_access();
	r16 = lime_utils__Bytes_Bytes_Impl__fromFile(r4);
	r2->bytes = r16;
	r16 = r2->bytes;
	if( !r16 ) goto label$e456659_15_63;
	r13 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r12 = r13->localThreadPool;
	if( r12 == NULL ) hl_null_access();
	r17 = hl_alloc_virtual(&t$vrt_1bd3a89);
	if( hl_vfields(r17)[2] ) *(lime___internal__backend__native__NativeHTTPRequest*)(hl_vfields(r17)[2]) = (lime___internal__backend__native__NativeHTTPRequest)r2; else hl_dyn_setp(r17->value,434184351/*instance*/,&t$lime__internal_backend_native_NativeHTTPRequest,r2);
	r15 = r2->promise;
	if( hl_vfields(r17)[3] ) *(lime__app__Promise*)(hl_vfields(r17)[3]) = (lime__app__Promise)r15; else hl_dyn_setp(r17->value,-135672421/*promise*/,&t$lime_app_Promise,r15);
	r16 = r2->bytes;
	if( r16 == NULL ) hl_null_access();
	r9 = r16->length;
	if( hl_vfields(r17)[0] ) *(int*)(hl_vfields(r17)[0]) = (int)r9; else hl_dyn_seti(r17->value,-104176319/*bytesLoaded*/,&t$_i32,r9);
	r16 = r2->bytes;
	if( r16 == NULL ) hl_null_access();
	r9 = r16->length;
	if( hl_vfields(r17)[1] ) *(int*)(hl_vfields(r17)[1]) = (int)r9; else hl_dyn_seti(r17->value,98195555/*bytesTotal*/,&t$_i32,r9);
	lime_system_ThreadPool_sendProgress(r12,((vdynamic*)r17));
	r13 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r12 = r13->localThreadPool;
	if( r12 == NULL ) hl_null_access();
	r18 = hl_alloc_virtual(&t$vrt_0d9ac00);
	if( hl_vfields(r18)[0] ) *(lime___internal__backend__native__NativeHTTPRequest*)(hl_vfields(r18)[0]) = (lime___internal__backend__native__NativeHTTPRequest)r2; else hl_dyn_setp(r18->value,434184351/*instance*/,&t$lime__internal_backend_native_NativeHTTPRequest,r2);
	r15 = r2->promise;
	if( hl_vfields(r18)[1] ) *(lime__app__Promise*)(hl_vfields(r18)[1]) = (lime__app__Promise)r15; else hl_dyn_setp(r18->value,-135672421/*promise*/,&t$lime_app_Promise,r15);
	r16 = r2->bytes;
	if( hl_vfields(r18)[2] ) *(haxe__io__Bytes*)(hl_vfields(r18)[2]) = (haxe__io__Bytes)r16; else hl_dyn_setp(r18->value,142895325/*result*/,&t$haxe_io_Bytes,r16);
	lime_system_ThreadPool_sendComplete(r12,((vdynamic*)r18));
	goto label$e456659_15_74;
	label$e456659_15_63:
	r13 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r12 = r13->localThreadPool;
	if( r12 == NULL ) hl_null_access();
	r14 = hl_alloc_virtual(&t$vrt_ad1db93);
	if( hl_vfields(r14)[1] ) *(lime___internal__backend__native__NativeHTTPRequest*)(hl_vfields(r14)[1]) = (lime___internal__backend__native__NativeHTTPRequest)r2; else hl_dyn_setp(r14->value,434184351/*instance*/,&t$lime__internal_backend_native_NativeHTTPRequest,r2);
	r15 = r2->promise;
	if( hl_vfields(r14)[2] ) *(lime__app__Promise*)(hl_vfields(r14)[2]) = (lime__app__Promise)r15; else hl_dyn_setp(r14->value,-135672421/*promise*/,&t$lime_app_Promise,r15);
	r6 = (String)s$Cannot_load_file_;
	r6 = String___add__(r6,r4);
	if( hl_vfields(r14)[0] ) *(String*)(hl_vfields(r14)[0]) = (String)r6; else hl_dyn_setp(r14->value,321506647/*error*/,&t$String,r6);
	lime_system_ThreadPool_sendError(r12,((vdynamic*)r14));
	label$e456659_15_74:
	return;
}

void lime__internal_backend_native_NativeHTTPRequest_localThreadPool_onComplete(vvirtual* r0) {
	haxe__io__Bytes r5;
	bool r3;
	haxe__Timer r7;
	lime___internal__backend__native__NativeHTTPRequest r6;
	lime__app__Promise r1, r4;
	if( r0 == NULL ) hl_null_access();
	r1 = hl_vfields(r0)[1] ? (*(lime__app__Promise*)(hl_vfields(r0)[1])) : (lime__app__Promise)hl_dyn_getp(r0->value,-135672421/*promise*/,&t$lime_app_Promise);
	if( r1 == NULL ) hl_null_access();
	r3 = lime_app_Promise_get_isError(r1);
	if( !r3 ) goto label$e456659_16_6;
	return;
	label$e456659_16_6:
	r5 = hl_vfields(r0)[2] ? (*(haxe__io__Bytes*)(hl_vfields(r0)[2])) : (haxe__io__Bytes)hl_dyn_getp(r0->value,142895325/*result*/,&t$haxe_io_Bytes);
	r4 = lime_app_Promise_complete(r1,((vdynamic*)r5));
	r6 = hl_vfields(r0)[0] ? (*(lime___internal__backend__native__NativeHTTPRequest*)(hl_vfields(r0)[0])) : (lime___internal__backend__native__NativeHTTPRequest)hl_dyn_getp(r0->value,434184351/*instance*/,&t$lime__internal_backend_native_NativeHTTPRequest);
	if( r6 == NULL ) hl_null_access();
	r7 = r6->timeout;
	if( !r7 ) goto label$e456659_16_17;
	r7 = r6->timeout;
	if( r7 == NULL ) hl_null_access();
	haxe_Timer_stop(r7);
	r7 = NULL;
	r6->timeout = r7;
	label$e456659_16_17:
	r5 = NULL;
	r6->bytes = r5;
	r4 = NULL;
	r6->promise = r4;
	return;
}

void lime__internal_backend_native_NativeHTTPRequest_localThreadPool_onError(vvirtual* r0) {
	String r4;
	haxe__io__Bytes r7;
	haxe__Timer r6;
	lime___internal__backend__native__NativeHTTPRequest r5;
	lime__app__Promise r1, r3;
	if( r0 == NULL ) hl_null_access();
	r1 = hl_vfields(r0)[2] ? (*(lime__app__Promise*)(hl_vfields(r0)[2])) : (lime__app__Promise)hl_dyn_getp(r0->value,-135672421/*promise*/,&t$lime_app_Promise);
	if( r1 == NULL ) hl_null_access();
	r4 = hl_vfields(r0)[0] ? (*(String*)(hl_vfields(r0)[0])) : (String)hl_dyn_getp(r0->value,321506647/*error*/,&t$String);
	r3 = lime_app_Promise_error(r1,((vdynamic*)r4));
	r5 = hl_vfields(r0)[1] ? (*(lime___internal__backend__native__NativeHTTPRequest*)(hl_vfields(r0)[1])) : (lime___internal__backend__native__NativeHTTPRequest)hl_dyn_getp(r0->value,434184351/*instance*/,&t$lime__internal_backend_native_NativeHTTPRequest);
	if( r5 == NULL ) hl_null_access();
	r6 = r5->timeout;
	if( !r6 ) goto label$e456659_17_14;
	r6 = r5->timeout;
	if( r6 == NULL ) hl_null_access();
	haxe_Timer_stop(r6);
	r6 = NULL;
	r5->timeout = r6;
	label$e456659_17_14:
	r7 = NULL;
	r5->bytes = r7;
	r3 = NULL;
	r5->promise = r3;
	return;
}

void lime__internal_backend_native_NativeHTTPRequest_localThreadPool_onProgress(vvirtual* r0) {
	bool r3;
	lime__app__Promise r1, r4;
	int r5, r6;
	if( r0 == NULL ) hl_null_access();
	r1 = hl_vfields(r0)[3] ? (*(lime__app__Promise*)(hl_vfields(r0)[3])) : (lime__app__Promise)hl_dyn_getp(r0->value,-135672421/*promise*/,&t$lime_app_Promise);
	if( r1 == NULL ) hl_null_access();
	r3 = lime_app_Promise_get_isComplete(r1);
	if( r3 ) goto label$e456659_18_7;
	r3 = lime_app_Promise_get_isError(r1);
	if( !r3 ) goto label$e456659_18_8;
	label$e456659_18_7:
	return;
	label$e456659_18_8:
	r5 = hl_vfields(r0)[0] ? (*(int*)(hl_vfields(r0)[0])) : (int)hl_dyn_geti(r0->value,-104176319/*bytesLoaded*/,&t$_i32);
	r6 = hl_vfields(r0)[1] ? (*(int*)(hl_vfields(r0)[1])) : (int)hl_dyn_geti(r0->value,98195555/*bytesTotal*/,&t$_i32);
	r4 = lime_app_Promise_progress(r1,r5,r6);
	return;
}

void lime__internal_backend_native_NativeHTTPRequest_multiThreadPool_doWork(vdynamic* r0) {
	lime__net__curl__CURL r5, r7;
	lime__net__curl__CURLMulti r9;
	vvirtual *r17;
	hl__types__ArrayObj r16;
	bool r1;
	hl_deque *r3;
	lime___internal__backend__native__$NativeHTTPRequest r4;
	lime__system__ThreadPool r14;
	lime__net__curl__CURLMultiMessage r12, r13;
	vdynamic *r2, *r15;
	int r8, r10, r11;
	label$e456659_19_0:
	r1 = true;
	if( !r1 ) goto label$e456659_19_74;
	r4 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r3 = r4->multiAddHandle;
	r1 = false;
	r2 = hl_deque_pop(r3,r1);
	r5 = (lime__net__curl__CURL)hl_dyn_castp(&r2,&t$_dyn,&t$lime_net_curl_CURL);
	if( !r5 ) goto label$e456659_19_13;
	r4 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r9 = r4->multi;
	if( r9 == NULL ) hl_null_access();
	r8 = lime_net_curl_CURLMulti_addHandle(r9,r5);
	label$e456659_19_13:
	r4 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r9 = r4->multi;
	if( r9 == NULL ) hl_null_access();
	r8 = 1000;
	r8 = lime_net_curl_CURLMulti_wait(r9,r8);
	r11 = 0;
	if( r8 != r11 ) goto label$e456659_19_73;
	r4 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r9 = r4->multi;
	if( r9 == NULL ) hl_null_access();
	r10 = lime_net_curl_CURLMulti_perform(r9);
	r4 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r9 = r4->multi;
	if( r9 == NULL ) hl_null_access();
	r12 = lime_net_curl_CURLMulti_infoRead(r9);
	if( r12 ) goto label$e456659_19_41;
	r4 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r9 = r4->multi;
	if( r9 == NULL ) hl_null_access();
	r10 = lime_net_curl_CURLMulti_get_runningHandles(r9);
	r11 = 0;
	if( r10 != r11 ) goto label$e456659_19_41;
	r4 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r14 = r4->multiThreadPool;
	if( r14 == NULL ) hl_null_access();
	r2 = NULL;
	lime_system_ThreadPool_sendComplete(r14,r2);
	goto label$e456659_19_74;
	label$e456659_19_41:
	if( !r12 ) goto label$e456659_19_73;
	if( r12 == NULL ) hl_null_access();
	r7 = r12->curl;
	if( r7 == NULL ) hl_null_access();
	r10 = 2097154;
	r2 = lime_net_curl_CURL_getInfo(r7,r10);
	r10 = 4194332;
	r15 = lime_net_curl_CURL_getInfo(r7,r10);
	r16 = (hl__types__ArrayObj)hl_dyn_castp(&r15,&t$_dyn,&t$hl_types_ArrayObj);
	r4 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r4->cookieList = r16;
	r4 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r9 = r4->multi;
	if( r9 == NULL ) hl_null_access();
	r10 = lime_net_curl_CURLMulti_removeHandle(r9,r7);
	lime_net_curl_CURL_cleanup(r7);
	r4 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r14 = r4->multiThreadPool;
	if( r14 == NULL ) hl_null_access();
	r17 = hl_alloc_virtual(&t$vrt_e1d9592);
	if( hl_vfields(r17)[0] ) *(lime__net__curl__CURL*)(hl_vfields(r17)[0]) = (lime__net__curl__CURL)r7; else hl_dyn_setp(r17->value,29969398/*curl*/,&t$lime_net_curl_CURL,r7);
	r10 = r12->result;
	if( hl_vfields(r17)[1] ) *(int*)(hl_vfields(r17)[1]) = (int)r10; else hl_dyn_seti(r17->value,142895325/*result*/,&t$_i32,r10);
	if( hl_vfields(r17)[2] ) *(vdynamic**)(hl_vfields(r17)[2]) = (vdynamic*)r2; else hl_dyn_setp(r17->value,100394802/*status*/,&t$_dyn,r2);
	lime_system_ThreadPool_sendProgress(r14,((vdynamic*)r17));
	r4 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r9 = r4->multi;
	if( r9 == NULL ) hl_null_access();
	r13 = lime_net_curl_CURLMulti_infoRead(r9);
	r12 = r13;
	goto label$e456659_19_41;
	label$e456659_19_73:
	goto label$e456659_19_0;
	label$e456659_19_74:
	return;
}

void lime__internal_backend_native_NativeHTTPRequest_multiThreadPool_onComplete(vdynamic* r0) {
	lime__net__curl__CURL r5;
	bool r4;
	haxe__Timer r8;
	hl_deque *r2;
	lime___internal__backend__native__$NativeHTTPRequest r3;
	lime__system__ThreadPool r7;
	vdynamic *r1;
	r3 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r2 = r3->multiAddHandle;
	r4 = false;
	r1 = hl_deque_pop(r2,r4);
	r5 = (lime__net__curl__CURL)hl_dyn_castp(&r1,&t$_dyn,&t$lime_net_curl_CURL);
	if( !r5 ) goto label$e456659_20_15;
	r3 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r2 = r3->multiAddHandle;
	hl_deque_push(r2,((vdynamic*)r5));
	r3 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r7 = r3->multiThreadPool;
	if( r7 == NULL ) hl_null_access();
	r1 = NULL;
	lime_system_ThreadPool_queue(r7,r1);
	goto label$e456659_20_28;
	label$e456659_20_15:
	r3 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r8 = r3->multiProgressTimer;
	if( !r8 ) goto label$e456659_20_25;
	r3 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r8 = r3->multiProgressTimer;
	if( r8 == NULL ) hl_null_access();
	haxe_Timer_stop(r8);
	r8 = NULL;
	r3 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r3->multiProgressTimer = r8;
	label$e456659_20_25:
	r4 = false;
	r3 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r3->multiThreadPoolRunning = r4;
	label$e456659_20_28:
	return;
}

void lime__internal_backend_native_NativeHTTPRequest_multiThreadPool_onProgress(vvirtual* r0) {
	String r14, r19;
	lime__net__curl__CURL r5;
	haxe__ds__ObjectMap r3;
	vvirtual *r9;
	hl__types__ArrayObj r8;
	venum *r16;
	haxe__io__Bytes r13, r15;
	bool r2;
	haxe__Timer r20;
	lime___internal__backend__native__$NativeHTTPRequest r4;
	lime__app__Promise r12;
	lime___internal__backend__native__NativeHTTPRequest r7;
	int *r17;
	vdynamic *r6;
	vbyte *r18;
	int r10, r11;
	r4 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r3 = r4->multiInstances;
	if( r3 == NULL ) hl_null_access();
	if( r0 == NULL ) hl_null_access();
	r5 = hl_vfields(r0)[0] ? (*(lime__net__curl__CURL*)(hl_vfields(r0)[0])) : (lime__net__curl__CURL)hl_dyn_getp(r0->value,29969398/*curl*/,&t$lime_net_curl_CURL);
	r2 = haxe_ds_ObjectMap_exists(r3,((vdynamic*)r5));
	if( !r2 ) goto label$e456659_21_88;
	r4 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r3 = r4->multiInstances;
	if( r3 == NULL ) hl_null_access();
	r5 = hl_vfields(r0)[0] ? (*(lime__net__curl__CURL*)(hl_vfields(r0)[0])) : (lime__net__curl__CURL)hl_dyn_getp(r0->value,29969398/*curl*/,&t$lime_net_curl_CURL);
	r6 = haxe_ds_ObjectMap_get(r3,((vdynamic*)r5));
	r7 = (lime___internal__backend__native__NativeHTTPRequest)r6;
	r4 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r8 = r4->activeInstances;
	if( r8 == NULL ) hl_null_access();
	r2 = hl_types_ArrayObj_remove(r8,((vdynamic*)r7));
	r4 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r3 = r4->multiInstances;
	if( r3 == NULL ) hl_null_access();
	r5 = hl_vfields(r0)[0] ? (*(lime__net__curl__CURL*)(hl_vfields(r0)[0])) : (lime__net__curl__CURL)hl_dyn_getp(r0->value,29969398/*curl*/,&t$lime_net_curl_CURL);
	r2 = haxe_ds_ObjectMap_remove(r3,((vdynamic*)r5));
	if( r7 == NULL ) hl_null_access();
	r9 = r7->parent;
	if( r9 == NULL ) hl_null_access();
	r10 = hl_vfields(r0)[2] ? (*(int*)(hl_vfields(r0)[2])) : (int)hl_dyn_geti(r0->value,100394802/*status*/,&t$_i32);
	if( hl_vfields(r9)[4] ) *(int*)(hl_vfields(r9)[4]) = (int)r10; else hl_dyn_seti(r9->value,413426210/*responseStatus*/,&t$_i32,r10);
	r10 = hl_vfields(r0)[1] ? (*(int*)(hl_vfields(r0)[1])) : (int)hl_dyn_geti(r0->value,142895325/*result*/,&t$_i32);
	r11 = 0;
	if( r10 != r11 ) goto label$e456659_21_72;
	r10 = hl_vfields(r0)[2] ? (*(int*)(hl_vfields(r0)[2])) : (int)hl_dyn_geti(r0->value,100394802/*status*/,&t$_i32);
	r11 = 200;
	if( r10 < r11 ) goto label$e456659_21_36;
	r10 = hl_vfields(r0)[2] ? (*(int*)(hl_vfields(r0)[2])) : (int)hl_dyn_geti(r0->value,100394802/*status*/,&t$_i32);
	r11 = 400;
	if( r10 < r11 ) goto label$e456659_21_39;
	label$e456659_21_36:
	r10 = hl_vfields(r0)[2] ? (*(int*)(hl_vfields(r0)[2])) : (int)hl_dyn_geti(r0->value,100394802/*status*/,&t$_i32);
	r11 = 0;
	if( r10 != r11 ) goto label$e456659_21_48;
	label$e456659_21_39:
	r12 = r7->promise;
	if( r12 == NULL ) hl_null_access();
	r2 = lime_app_Promise_get_isError(r12);
	if( r2 ) goto label$e456659_21_47;
	r12 = r7->promise;
	if( r12 == NULL ) hl_null_access();
	r13 = lime__internal_backend_native_NativeHTTPRequest_buildBuffer(r7);
	r12 = lime_app_Promise_complete(r12,((vdynamic*)r13));
	label$e456659_21_47:
	goto label$e456659_21_71;
	label$e456659_21_48:
	r13 = r7->bytes;
	if( !r13 ) goto label$e456659_21_62;
	r12 = r7->promise;
	if( r12 == NULL ) hl_null_access();
	r13 = r7->bytes;
	if( r13 == NULL ) hl_null_access();
	r10 = 0;
	r15 = r7->bytes;
	if( r15 == NULL ) hl_null_access();
	r11 = r15->length;
	r16 = NULL;
	r14 = haxe_io_Bytes_getString(r13,r10,r11,r16);
	r12 = lime_app_Promise_error(r12,((vdynamic*)r14));
	goto label$e456659_21_71;
	label$e456659_21_62:
	r12 = r7->promise;
	if( r12 == NULL ) hl_null_access();
	r14 = (String)s$Status_;
	r10 = hl_vfields(r0)[2] ? (*(int*)(hl_vfields(r0)[2])) : (int)hl_dyn_geti(r0->value,100394802/*status*/,&t$_i32);
	r17 = &r10;
	r18 = hl_itos(r10,r17);
	r19 = String___alloc__(r18,r10);
	r14 = String___add__(r14,r19);
	r12 = lime_app_Promise_error(r12,((vdynamic*)r14));
	label$e456659_21_71:
	goto label$e456659_21_77;
	label$e456659_21_72:
	r12 = r7->promise;
	if( r12 == NULL ) hl_null_access();
	r10 = hl_vfields(r0)[1] ? (*(int*)(hl_vfields(r0)[1])) : (int)hl_dyn_geti(r0->value,142895325/*result*/,&t$_i32);
	r14 = lime_net_curl_CURL_strerror(r10);
	r12 = lime_app_Promise_error(r12,((vdynamic*)r14));
	label$e456659_21_77:
	r20 = r7->timeout;
	if( !r20 ) goto label$e456659_21_84;
	r20 = r7->timeout;
	if( r20 == NULL ) hl_null_access();
	haxe_Timer_stop(r20);
	r20 = NULL;
	r7->timeout = r20;
	label$e456659_21_84:
	r13 = NULL;
	r7->bytes = r13;
	r12 = NULL;
	r7->promise = r12;
	label$e456659_21_88:
	r5 = NULL;
	if( hl_vfields(r0)[0] ) *(lime__net__curl__CURL*)(hl_vfields(r0)[0]) = (lime__net__curl__CURL)r5; else hl_dyn_setp(r0->value,29969398/*curl*/,&t$lime_net_curl_CURL,r5);
	return;
}

void lime__internal_backend_native_NativeHTTPRequest_multiProgressTimer_onRun() {
	hl__types__ArrayObj r2;
	lime___internal__backend__native__$NativeHTTPRequest r3;
	lime__app__Promise r9;
	lime___internal__backend__native__NativeHTTPRequest r6;
	vdynamic *r7;
	varray *r8;
	int r0, r4, r5;
	r0 = 0;
	r3 = (lime___internal__backend__native__$NativeHTTPRequest)g$938c2df;
	r2 = r3->activeInstances;
	label$e456659_22_3:
	if( r2 == NULL ) hl_null_access();
	r5 = r2->length;
	if( r0 >= r5 ) goto label$e456659_22_32;
	r5 = r2->length;
	if( ((unsigned)r0) < ((unsigned)r5) ) goto label$e456659_22_11;
	r6 = NULL;
	goto label$e456659_22_14;
	label$e456659_22_11:
	r8 = r2->array;
	r7 = ((vdynamic**)(r8 + 1))[r0];
	r6 = (lime___internal__backend__native__NativeHTTPRequest)r7;
	label$e456659_22_14:
	++r0;
	if( r6 == NULL ) hl_null_access();
	r4 = r6->bytesLoaded;
	r5 = r6->writeBytesLoaded;
	if( r4 != r5 ) goto label$e456659_22_22;
	r4 = r6->bytesTotal;
	r5 = r6->writeBytesTotal;
	if( r4 == r5 ) goto label$e456659_22_31;
	label$e456659_22_22:
	r4 = r6->writeBytesLoaded;
	r6->bytesLoaded = r4;
	r4 = r6->writeBytesTotal;
	r6->bytesTotal = r4;
	r9 = r6->promise;
	if( r9 == NULL ) hl_null_access();
	r4 = r6->bytesLoaded;
	r5 = r6->bytesTotal;
	r9 = lime_app_Promise_progress(r9,r4,r5);
	label$e456659_22_31:
	goto label$e456659_22_3;
	label$e456659_22_32:
	return;
}

void lime__internal_backend_native_NativeHTTPRequest_new(lime___internal__backend__native__NativeHTTPRequest r0) {
	lime__net__curl__CURL r3;
	haxe__io__BytesBuffer r1;
	haxe__Timer r4;
	r1 = (haxe__io__BytesBuffer)hl_alloc_obj(&t$haxe_io_BytesBuffer);
	haxe_io_BytesBuffer_new(r1);
	r0->buffer = r1;
	r3 = NULL;
	r0->curl = r3;
	r4 = NULL;
	r0->timeout = r4;
	return;
}

