// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <lime/_internal/format/BMP.h>
#include <haxe/io/Error.h>
#include <lime/math/Rectangle.h>
bool lime_graphics_Image_get_premultiplied(lime__graphics__Image);
int lime_graphics_Image_get_format(lime__graphics__Image);
lime__graphics__Image lime_graphics_Image_clone(lime__graphics__Image);
bool lime_graphics_Image_set_premultiplied(lime__graphics__Image,bool);
int lime_graphics_Image_set_format(lime__graphics__Image,int);
extern venum* g$1393bcf;
haxe__io__Bytes haxe_io_Bytes_alloc(int);
void haxe_io_Bytes_set(haxe__io__Bytes,int,int);
void haxe_io_Bytes_setInt32(haxe__io__Bytes,int,int);
extern venum* g$haxe_io_Error_OutsideBounds;
extern venum* g$b63f13f;
extern venum* g$aa2f328;
extern hl_type t$lime_math_Rectangle;
void lime_math_Rectangle_new(lime__math__Rectangle,double*,double*,double*,double*);
extern hl_type t$_i32;
haxe__io__Bytes lime_graphics_Image_getPixels(lime__graphics__Image,lime__math__Rectangle,vdynamic*);
int haxe_io_Bytes_get(haxe__io__Bytes,int);
void haxe_io_Bytes_blit(haxe__io__Bytes,int,haxe__io__Bytes,int,int);

haxe__io__Bytes lime__internal_format_BMP_encode(lime__graphics__Image r0,venum* r1) {
	lime__graphics__Image r4;
	venum *r7, *r15, *r18;
	haxe__io__Bytes r12, r13, r14;
	bool r3;
	double r21, r23, r25, r27;
	lime__math__Rectangle r20;
	vdynamic *r29;
	double *r22, *r24, *r26, *r28;
	vbyte *r16;
	int r5, r6, r8, r9, r10, r11, r17, r19, r30, r31, r32, r33, r34, r35, r36, r37, r38, r39;
	if( r0 == NULL ) hl_null_access();
	r3 = lime_graphics_Image_get_premultiplied(r0);
	if( r3 ) goto label$faeb2c6_1_6;
	r5 = lime_graphics_Image_get_format(r0);
	r6 = 0;
	if( r5 == r6 ) goto label$faeb2c6_1_13;
	label$faeb2c6_1_6:
	r4 = lime_graphics_Image_clone(r0);
	r0 = r4;
	if( r4 == NULL ) hl_null_access();
	r3 = false;
	r3 = lime_graphics_Image_set_premultiplied(r4,r3);
	r5 = 0;
	r5 = lime_graphics_Image_set_format(r4,r5);
	label$faeb2c6_1_13:
	if( r1 ) goto label$faeb2c6_1_16;
	r7 = (venum*)g$1393bcf;
	r1 = r7;
	label$faeb2c6_1_16:
	r5 = 14;
	r6 = 40;
	if( r0 == NULL ) hl_null_access();
	r8 = r0->width;
	r9 = r0->height;
	r8 = r8 * r9;
	r9 = 4;
	r8 = r8 * r9;
	if( !r1 ) goto label$faeb2c6_1_52;
	if( r1 == NULL ) hl_null_access();
	r9 = HL__ENUM_INDEX__(r1);
	switch(r9) {
		default:
			goto label$faeb2c6_1_52;
		case 0:
			r9 = r0->width;
			r10 = 3;
			r9 = r9 * r10;
			r10 = r0->width;
			r11 = 3;
			r10 = r10 * r11;
			r11 = 4;
			r10 = r11 == 0 ? 0 : r10 % r11;
			r9 = r9 + r10;
			r10 = r0->height;
			r9 = r9 * r10;
			r8 = r9;
			goto label$faeb2c6_1_52;
		case 1:
			r9 = 108;
			r6 = r9;
			goto label$faeb2c6_1_52;
		case 2:
			r9 = 0;
			r5 = r9;
			r10 = r0->width;
			r11 = r0->height;
			r10 = r10 * r11;
			r9 = r8 + r10;
			r8 = r9;
	}
	label$faeb2c6_1_52:
	r9 = r5 + r6;
	r9 = r9 + r8;
	r12 = haxe_io_Bytes_alloc(r9);
	r9 = 0;
	r11 = 0;
	if( r11 >= r5 ) goto label$faeb2c6_1_100;
	if( r12 == NULL ) hl_null_access();
	r10 = r9;
	++r9;
	r11 = 66;
	haxe_io_Bytes_set(r12,r10,r11);
	r10 = r9;
	++r9;
	r11 = 77;
	haxe_io_Bytes_set(r12,r10,r11);
	r11 = r12->length;
	haxe_io_Bytes_setInt32(r12,r9,r11);
	r11 = 4;
	r10 = r9 + r11;
	r9 = r10;
	r11 = 1;
	r10 = r10 + r11;
	r11 = r12->length;
	if( ((unsigned)r10) < ((unsigned)r11) ) goto label$faeb2c6_1_78;
	r15 = (venum*)g$haxe_io_Error_OutsideBounds;
	hl_throw((vdynamic*)r15);
	label$faeb2c6_1_78:
	r16 = r12->b;
	r11 = 0;
	*(unsigned short*)(r16 + r9) = (unsigned short)r11;
	r11 = 2;
	r10 = r9 + r11;
	r9 = r10;
	r11 = 1;
	r10 = r10 + r11;
	r11 = r12->length;
	if( ((unsigned)r10) < ((unsigned)r11) ) goto label$faeb2c6_1_90;
	r15 = (venum*)g$haxe_io_Error_OutsideBounds;
	hl_throw((vdynamic*)r15);
	label$faeb2c6_1_90:
	r16 = r12->b;
	r11 = 0;
	*(unsigned short*)(r16 + r9) = (unsigned short)r11;
	r11 = 2;
	r10 = r9 + r11;
	r11 = r5 + r6;
	haxe_io_Bytes_setInt32(r12,r10,r11);
	r11 = 4;
	r10 = r10 + r11;
	r9 = r10;
	label$faeb2c6_1_100:
	if( r12 == NULL ) hl_null_access();
	haxe_io_Bytes_setInt32(r12,r9,r6);
	r11 = 4;
	r10 = r9 + r11;
	r11 = r0->width;
	haxe_io_Bytes_setInt32(r12,r10,r11);
	r11 = 4;
	r10 = r10 + r11;
	r18 = (venum*)g$b63f13f;
	if( r1 != r18 ) goto label$faeb2c6_1_114;
	r11 = r0->height;
	r17 = 2;
	r11 = r11 * r17;
	goto label$faeb2c6_1_115;
	label$faeb2c6_1_114:
	r11 = r0->height;
	label$faeb2c6_1_115:
	haxe_io_Bytes_setInt32(r12,r10,r11);
	r11 = 4;
	r10 = r10 + r11;
	r9 = r10;
	r11 = 1;
	r10 = r10 + r11;
	r11 = r12->length;
	if( ((unsigned)r10) < ((unsigned)r11) ) goto label$faeb2c6_1_125;
	r15 = (venum*)g$haxe_io_Error_OutsideBounds;
	hl_throw((vdynamic*)r15);
	label$faeb2c6_1_125:
	r16 = r12->b;
	r11 = 1;
	*(unsigned short*)(r16 + r9) = (unsigned short)r11;
	r11 = 2;
	r10 = r9 + r11;
	r9 = r10;
	r11 = 1;
	r10 = r10 + r11;
	r11 = r12->length;
	if( ((unsigned)r10) < ((unsigned)r11) ) goto label$faeb2c6_1_137;
	r15 = (venum*)g$haxe_io_Error_OutsideBounds;
	hl_throw((vdynamic*)r15);
	label$faeb2c6_1_137:
	r16 = r12->b;
	r18 = (venum*)g$1393bcf;
	if( r1 != r18 ) goto label$faeb2c6_1_142;
	r11 = 24;
	goto label$faeb2c6_1_143;
	label$faeb2c6_1_142:
	r11 = 32;
	label$faeb2c6_1_143:
	*(unsigned short*)(r16 + r9) = (unsigned short)r11;
	r11 = 2;
	r10 = r9 + r11;
	r18 = (venum*)g$aa2f328;
	if( r1 != r18 ) goto label$faeb2c6_1_150;
	r11 = 3;
	goto label$faeb2c6_1_151;
	label$faeb2c6_1_150:
	r11 = 0;
	label$faeb2c6_1_151:
	haxe_io_Bytes_setInt32(r12,r10,r11);
	r11 = 4;
	r10 = r10 + r11;
	haxe_io_Bytes_setInt32(r12,r10,r8);
	r11 = 4;
	r10 = r10 + r11;
	r11 = 11824;
	haxe_io_Bytes_setInt32(r12,r10,r11);
	r11 = 4;
	r10 = r10 + r11;
	r11 = 11824;
	haxe_io_Bytes_setInt32(r12,r10,r11);
	r11 = 4;
	r10 = r10 + r11;
	r11 = 0;
	haxe_io_Bytes_setInt32(r12,r10,r11);
	r11 = 4;
	r10 = r10 + r11;
	r11 = 0;
	haxe_io_Bytes_setInt32(r12,r10,r11);
	r11 = 4;
	r10 = r10 + r11;
	r9 = r10;
	r18 = (venum*)g$aa2f328;
	if( r1 != r18 ) goto label$faeb2c6_1_219;
	r11 = 16711680;
	haxe_io_Bytes_setInt32(r12,r10,r11);
	r11 = 4;
	r10 = r10 + r11;
	r11 = 65280;
	haxe_io_Bytes_setInt32(r12,r10,r11);
	r11 = 4;
	r10 = r10 + r11;
	r11 = 255;
	haxe_io_Bytes_setInt32(r12,r10,r11);
	r11 = 4;
	r10 = r10 + r11;
	r11 = -16777216;
	haxe_io_Bytes_setInt32(r12,r10,r11);
	r11 = 4;
	r10 = r10 + r11;
	r9 = r10;
	++r9;
	r11 = 32;
	haxe_io_Bytes_set(r12,r10,r11);
	r10 = r9;
	++r9;
	r11 = 110;
	haxe_io_Bytes_set(r12,r10,r11);
	r10 = r9;
	++r9;
	r11 = 105;
	haxe_io_Bytes_set(r12,r10,r11);
	r10 = r9;
	++r9;
	r11 = 87;
	haxe_io_Bytes_set(r12,r10,r11);
	r10 = 0;
	label$faeb2c6_1_209:
	r17 = 48;
	if( r10 >= r17 ) goto label$faeb2c6_1_219;
	++r10;
	if( r12 == NULL ) hl_null_access();
	r17 = r9;
	++r9;
	r19 = 0;
	haxe_io_Bytes_set(r12,r17,r19);
	goto label$faeb2c6_1_209;
	label$faeb2c6_1_219:
	if( r0 == NULL ) hl_null_access();
	r20 = (lime__math__Rectangle)hl_alloc_obj(&t$lime_math_Rectangle);
	r10 = 0;
	r21 = (double)r10;
	r22 = &r21;
	r10 = 0;
	r23 = (double)r10;
	r24 = &r23;
	r10 = r0->width;
	r25 = (double)r10;
	r26 = &r25;
	r10 = r0->height;
	r27 = (double)r10;
	r28 = &r27;
	lime_math_Rectangle_new(r20,r22,r24,r26,r28);
	r10 = 1;
	r29 = hl_alloc_dynamic(&t$_i32);
	r29->v.i = r10;
	r13 = lime_graphics_Image_getPixels(r0,r20,r29);
	r10 = 0;
	if( !r1 ) goto label$faeb2c6_1_433;
	if( r1 == NULL ) hl_null_access();
	r11 = HL__ENUM_INDEX__(r1);
	switch(r11) {
		default:
			goto label$faeb2c6_1_433;
		case 0:
			r11 = 0;
			r17 = r0->height;
			label$faeb2c6_1_245:
			if( r11 >= r17 ) goto label$faeb2c6_1_308;
			r19 = r11;
			++r11;
			if( r0 == NULL ) hl_null_access();
			r30 = r0->height;
			r31 = 1;
			r30 = r30 - r31;
			r30 = r30 - r19;
			r31 = 4;
			r30 = r30 * r31;
			r31 = r0->width;
			r30 = r30 * r31;
			r10 = r30;
			r30 = 0;
			r31 = r0->width;
			label$faeb2c6_1_261:
			if( r30 >= r31 ) goto label$faeb2c6_1_291;
			++r30;
			if( r13 == NULL ) hl_null_access();
			r34 = r10;
			++r10;
			r34 = haxe_io_Bytes_get(r13,r34);
			r35 = r10;
			++r10;
			r35 = haxe_io_Bytes_get(r13,r35);
			r34 = r35;
			r36 = r10;
			++r10;
			r36 = haxe_io_Bytes_get(r13,r36);
			r35 = r36;
			r37 = r10;
			++r10;
			r37 = haxe_io_Bytes_get(r13,r37);
			r36 = r37;
			if( r12 == NULL ) hl_null_access();
			r37 = r9;
			++r9;
			haxe_io_Bytes_set(r12,r37,r36);
			r37 = r9;
			++r9;
			haxe_io_Bytes_set(r12,r37,r35);
			r37 = r9;
			++r9;
			haxe_io_Bytes_set(r12,r37,r34);
			goto label$faeb2c6_1_261;
			label$faeb2c6_1_291:
			r30 = 0;
			if( r0 == NULL ) hl_null_access();
			r31 = r0->width;
			r32 = 3;
			r31 = r31 * r32;
			r32 = 4;
			r31 = r32 == 0 ? 0 : r31 % r32;
			label$faeb2c6_1_298:
			if( r30 >= r31 ) goto label$faeb2c6_1_307;
			++r30;
			if( r12 == NULL ) hl_null_access();
			r37 = r9;
			++r9;
			r38 = 0;
			haxe_io_Bytes_set(r12,r37,r38);
			goto label$faeb2c6_1_298;
			label$faeb2c6_1_307:
			goto label$faeb2c6_1_245;
			label$faeb2c6_1_308:
			goto label$faeb2c6_1_433;
		case 1:
			r11 = 0;
			r17 = r0->height;
			label$faeb2c6_1_311:
			if( r11 >= r17 ) goto label$faeb2c6_1_362;
			r19 = r11;
			++r11;
			if( r0 == NULL ) hl_null_access();
			r30 = r0->height;
			r31 = 1;
			r30 = r30 - r31;
			r30 = r30 - r19;
			r31 = 4;
			r30 = r30 * r31;
			r31 = r0->width;
			r30 = r30 * r31;
			r10 = r30;
			r30 = 0;
			r31 = r0->width;
			label$faeb2c6_1_327:
			if( r30 >= r31 ) goto label$faeb2c6_1_361;
			++r30;
			if( r13 == NULL ) hl_null_access();
			r37 = r10;
			++r10;
			r37 = haxe_io_Bytes_get(r13,r37);
			r33 = r37;
			r37 = r10;
			++r10;
			r37 = haxe_io_Bytes_get(r13,r37);
			r34 = r37;
			r37 = r10;
			++r10;
			r37 = haxe_io_Bytes_get(r13,r37);
			r35 = r37;
			r37 = r10;
			++r10;
			r37 = haxe_io_Bytes_get(r13,r37);
			r36 = r37;
			if( r12 == NULL ) hl_null_access();
			r37 = r9;
			++r9;
			haxe_io_Bytes_set(r12,r37,r36);
			r37 = r9;
			++r9;
			haxe_io_Bytes_set(r12,r37,r35);
			r37 = r9;
			++r9;
			haxe_io_Bytes_set(r12,r37,r34);
			r37 = r9;
			++r9;
			haxe_io_Bytes_set(r12,r37,r33);
			goto label$faeb2c6_1_327;
			label$faeb2c6_1_361:
			goto label$faeb2c6_1_311;
			label$faeb2c6_1_362:
			goto label$faeb2c6_1_433;
		case 2:
			r11 = r0->width;
			r17 = r0->height;
			r11 = r11 * r17;
			r14 = haxe_io_Bytes_alloc(r11);
			r11 = 0;
			r17 = 0;
			r19 = r0->height;
			label$faeb2c6_1_370:
			if( r17 >= r19 ) goto label$faeb2c6_1_426;
			r30 = r17;
			++r17;
			if( r0 == NULL ) hl_null_access();
			r31 = r0->height;
			r32 = 1;
			r31 = r31 - r32;
			r31 = r31 - r30;
			r32 = 4;
			r31 = r31 * r32;
			r32 = r0->width;
			r31 = r31 * r32;
			r10 = r31;
			r31 = 0;
			r32 = r0->width;
			label$faeb2c6_1_386:
			if( r31 >= r32 ) goto label$faeb2c6_1_425;
			++r31;
			if( r13 == NULL ) hl_null_access();
			r38 = r10;
			++r10;
			r38 = haxe_io_Bytes_get(r13,r38);
			r33 = r38;
			r38 = r10;
			++r10;
			r38 = haxe_io_Bytes_get(r13,r38);
			r34 = r38;
			r38 = r10;
			++r10;
			r38 = haxe_io_Bytes_get(r13,r38);
			r35 = r38;
			r38 = r10;
			++r10;
			r38 = haxe_io_Bytes_get(r13,r38);
			r36 = r38;
			if( r12 == NULL ) hl_null_access();
			r38 = r9;
			++r9;
			haxe_io_Bytes_set(r12,r38,r36);
			r38 = r9;
			++r9;
			haxe_io_Bytes_set(r12,r38,r35);
			r38 = r9;
			++r9;
			haxe_io_Bytes_set(r12,r38,r34);
			r38 = r9;
			++r9;
			haxe_io_Bytes_set(r12,r38,r33);
			if( r14 == NULL ) hl_null_access();
			r38 = r11;
			++r11;
			r39 = 0;
			haxe_io_Bytes_set(r14,r38,r39);
			goto label$faeb2c6_1_386;
			label$faeb2c6_1_425:
			goto label$faeb2c6_1_370;
			label$faeb2c6_1_426:
			if( r12 == NULL ) hl_null_access();
			r19 = 0;
			if( r0 == NULL ) hl_null_access();
			r30 = r0->width;
			r31 = r0->height;
			r30 = r30 * r31;
			haxe_io_Bytes_blit(r12,r9,r14,r19,r30);
	}
	label$faeb2c6_1_433:
	return r12;
}

