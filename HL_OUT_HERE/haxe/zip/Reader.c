// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <haxe/zip/Reader.h>
#include <_std/Date.h>
int haxe_io_Input_readUInt16(haxe__io__Input);
extern hl_type t$Date;
void Date_new(Date,int,int,int,int,int,int);
#include <haxe/io/BytesBuffer.h>
#include <haxe/io/Bytes.h>
#include <haxe/zip/ExtraField.h>
extern hl_type t$haxe_ds_List;
void haxe_ds_List_new(haxe__ds__List);
extern String s$Invalid_extra_fields_data;
extern hl_type t$haxe_io_BytesBuffer;
void haxe_io_BytesBuffer_new(haxe__io__BytesBuffer);
void haxe_io_BytesBuffer___expand(haxe__io__BytesBuffer,int);
haxe__io__Bytes haxe_io_Input_read(haxe__io__Input,int);
void haxe_io_BytesBuffer___add(haxe__io__BytesBuffer,vbyte*,int,int);
haxe__io__Bytes haxe_io_BytesBuffer_getBytes(haxe__io__BytesBuffer);
extern hl_type t$haxe_zip_ExtraField;
void haxe_ds_List_add(haxe__ds__List,vdynamic*);
int haxe_io_Input_readInt32(haxe__io__Input);
String haxe_io_Bytes_toString(haxe__io__Bytes);
#include <haxe/io/Encoding.h>
extern String s$Invalid_Zip_Data;
extern String s$Unsupported_flags_;
#include <hl/natives.h>
String String___alloc__(vbyte*,int);
String String___add__(String,String);
extern String s$Unsupported_compression_;
extern hl_type t$_i32;
int haxe_io_Input_readInt16(haxe__io__Input);
String haxe_io_Input_readString(haxe__io__Input,int,venum*);
extern venum* g$haxe_zip_ExtraField_FUtf8;
void haxe_ds_List_push(haxe__ds__List,vdynamic*);
extern hl_type t$vrt_775c77c;
extern hl_type t$String;
extern hl_type t$_bool;
extern hl_type t$haxe_io_Bytes;
extern hl_type t$nul_i32;
#include <haxe/zip/InflateImpl.h>
#include <haxe/io/Error.h>
haxe__io__Bytes haxe_io_Bytes_alloc(int);
extern hl_type t$haxe_zip_InflateImpl;
void haxe_zip_InflateImpl_new(haxe__zip__InflateImpl,haxe__io__Input,vdynamic*,vdynamic*);
int haxe_zip_InflateImpl_readBytes(haxe__zip__InflateImpl,haxe__io__Bytes,int,int);
extern venum* g$haxe_io_Error_OutsideBounds;
extern hl_type t$haxe_zip_Reader;

void haxe_zip_Reader_new(haxe__zip__Reader r0,haxe__io__Input r1) {
	r0->i = r1;
	return;
}

Date haxe_zip_Reader_readZipDate(haxe__zip__Reader r0) {
	Date r12;
	haxe__io__Input r2;
	int r1, r4, r5, r6, r7, r8, r9, r10, r11, r13, r14, r15, r16;
	r2 = r0->i;
	if( r2 == NULL ) hl_null_access();
	r1 = haxe_io_Input_readUInt16(r2);
	r5 = 11;
	r4 = r1 >> r5;
	r5 = 31;
	r4 = r4 & r5;
	r6 = 5;
	r5 = r1 >> r6;
	r6 = 63;
	r5 = r5 & r6;
	r7 = 31;
	r6 = r1 & r7;
	r2 = r0->i;
	if( r2 == NULL ) hl_null_access();
	r7 = haxe_io_Input_readUInt16(r2);
	r9 = 9;
	r8 = r7 >> r9;
	r10 = 5;
	r9 = r7 >> r10;
	r10 = 15;
	r9 = r9 & r10;
	r11 = 31;
	r10 = r7 & r11;
	r12 = (Date)hl_alloc_obj(&t$Date);
	r13 = 1980;
	r11 = r8 + r13;
	r14 = 1;
	r13 = r9 - r14;
	r16 = 1;
	r15 = r6 << r16;
	Date_new(r12,r11,r13,r10,r4,r5,r15);
	return r12;
}

haxe__ds__List haxe_zip_Reader_readExtraFields(haxe__zip__Reader r0,int r1) {
	String r6;
	haxe__io__BytesBuffer r11;
	venum *r15;
	haxe__io__Bytes r14;
	haxe__ds__List r2;
	haxe__io__Input r7;
	vbyte *r12;
	int r4, r5, r8, r9, r10, r13;
	r2 = (haxe__ds__List)hl_alloc_obj(&t$haxe_ds_List);
	haxe_ds_List_new(r2);
	label$c13dd8a_3_2:
	r5 = 0;
	if( r5 >= r1 ) goto label$c13dd8a_3_78;
	r5 = 4;
	if( r1 >= r5 ) goto label$c13dd8a_3_9;
	r6 = (String)s$Invalid_extra_fields_data;
	hl_throw((vdynamic*)r6);
	label$c13dd8a_3_9:
	r7 = r0->i;
	if( r7 == NULL ) hl_null_access();
	r4 = haxe_io_Input_readUInt16(r7);
	r7 = r0->i;
	if( r7 == NULL ) hl_null_access();
	r5 = haxe_io_Input_readUInt16(r7);
	if( r1 >= r5 ) goto label$c13dd8a_3_18;
	r6 = (String)s$Invalid_extra_fields_data;
	hl_throw((vdynamic*)r6);
	label$c13dd8a_3_18:
	r9 = 28789;
	if( r4 != r9 ) goto label$c13dd8a_3_67;
	r7 = r0->i;
	if( r7 == NULL ) hl_null_access();
	r8 = ((int (*)(haxe__io__Input))r7->$type->vobj_proto[0])(r7);
	r10 = 1;
	if( r8 == r10 ) goto label$c13dd8a_3_53;
	r11 = (haxe__io__BytesBuffer)hl_alloc_obj(&t$haxe_io_BytesBuffer);
	haxe_io_BytesBuffer_new(r11);
	r9 = r11->pos;
	r10 = r11->size;
	if( r9 != r10 ) goto label$c13dd8a_3_32;
	r9 = 0;
	haxe_io_BytesBuffer___expand(r11,r9);
	label$c13dd8a_3_32:
	r12 = r11->b;
	r9 = r11->pos;
	r10 = r9;
	++r9;
	r11->pos = r9;
	*(unsigned char*)(r12 + r10) = (unsigned char)r8;
	r7 = r0->i;
	if( r7 == NULL ) hl_null_access();
	r10 = 1;
	r9 = r5 - r10;
	r14 = haxe_io_Input_read(r7,r9);
	if( r14 == NULL ) hl_null_access();
	r12 = r14->b;
	r9 = 0;
	r10 = r14->length;
	haxe_io_BytesBuffer___add(r11,r12,r9,r10);
	if( r2 == NULL ) hl_null_access();
	r14 = haxe_io_BytesBuffer_getBytes(r11);
	r15 = hl_alloc_enum(&t$haxe_zip_ExtraField,0);
	((haxe_zip_ExtraField_FUnknown*)r15)->p0 = r4;
	((haxe_zip_ExtraField_FUnknown*)r15)->p1 = r14;
	haxe_ds_List_add(r2,((vdynamic*)r15));
	goto label$c13dd8a_3_66;
	label$c13dd8a_3_53:
	r7 = r0->i;
	if( r7 == NULL ) hl_null_access();
	r9 = haxe_io_Input_readInt32(r7);
	r7 = r0->i;
	if( r7 == NULL ) hl_null_access();
	r13 = 5;
	r10 = r5 - r13;
	r14 = haxe_io_Input_read(r7,r10);
	if( r14 == NULL ) hl_null_access();
	r6 = haxe_io_Bytes_toString(r14);
	if( r2 == NULL ) hl_null_access();
	r15 = hl_alloc_enum(&t$haxe_zip_ExtraField,1);
	((haxe_zip_ExtraField_FInfoZipUnicodePath*)r15)->p0 = r6;
	((haxe_zip_ExtraField_FInfoZipUnicodePath*)r15)->p1 = r9;
	haxe_ds_List_add(r2,((vdynamic*)r15));
	label$c13dd8a_3_66:
	goto label$c13dd8a_3_73;
	label$c13dd8a_3_67:
	if( r2 == NULL ) hl_null_access();
	r7 = r0->i;
	if( r7 == NULL ) hl_null_access();
	r14 = haxe_io_Input_read(r7,r5);
	r15 = hl_alloc_enum(&t$haxe_zip_ExtraField,0);
	((haxe_zip_ExtraField_FUnknown*)r15)->p0 = r4;
	((haxe_zip_ExtraField_FUnknown*)r15)->p1 = r14;
	haxe_ds_List_add(r2,((vdynamic*)r15));
	label$c13dd8a_3_73:
	r9 = 4;
	r9 = r9 + r5;
	r8 = r1 - r9;
	r1 = r8;
	goto label$c13dd8a_3_2;
	label$c13dd8a_3_78:
	return r2;
}

vvirtual* haxe_zip_Reader_readEntryHeader(haxe__zip__Reader r0) {
	String r7, r13;
	Date r16;
	vvirtual *r6;
	venum *r21, *r23;
	haxe__io__Bytes r24;
	bool r8, r14;
	haxe__ds__List r22;
	vdynamic *r17, *r26;
	int *r11;
	haxe__io__Input r1;
	vbyte *r12;
	int r3, r4, r5, r9, r10, r15, r18, r19, r20, r25;
	r1 = r0->i;
	if( r1 == NULL ) hl_null_access();
	r3 = haxe_io_Input_readInt32(r1);
	r5 = 33639248;
	if( r3 == r5 ) goto label$c13dd8a_4_7;
	r5 = 101010256;
	if( r3 != r5 ) goto label$c13dd8a_4_9;
	label$c13dd8a_4_7:
	r6 = NULL;
	return r6;
	label$c13dd8a_4_9:
	r5 = 67324752;
	if( r3 == r5 ) goto label$c13dd8a_4_13;
	r7 = (String)s$Invalid_Zip_Data;
	hl_throw((vdynamic*)r7);
	label$c13dd8a_4_13:
	r4 = haxe_io_Input_readUInt16(r1);
	r5 = haxe_io_Input_readUInt16(r1);
	r10 = 2048;
	r9 = r5 & r10;
	r10 = 0;
	if( r9 != r10 ) goto label$c13dd8a_4_21;
	r8 = false;
	goto label$c13dd8a_4_22;
	label$c13dd8a_4_21:
	r8 = true;
	label$c13dd8a_4_22:
	r10 = 63473;
	r9 = r5 & r10;
	r10 = 0;
	if( r9 == r10 ) goto label$c13dd8a_4_33;
	r7 = (String)s$Unsupported_flags_;
	r9 = r5;
	r11 = &r9;
	r12 = hl_itos(r9,r11);
	r13 = String___alloc__(r12,r9);
	r7 = String___add__(r7,r13);
	hl_throw((vdynamic*)r7);
	label$c13dd8a_4_33:
	r9 = haxe_io_Input_readUInt16(r1);
	r15 = 0;
	if( r9 != r15 ) goto label$c13dd8a_4_38;
	r14 = false;
	goto label$c13dd8a_4_39;
	label$c13dd8a_4_38:
	r14 = true;
	label$c13dd8a_4_39:
	if( !r14 ) goto label$c13dd8a_4_49;
	r15 = 8;
	if( r9 == r15 ) goto label$c13dd8a_4_49;
	r7 = (String)s$Unsupported_compression_;
	r10 = r9;
	r11 = &r10;
	r12 = hl_itos(r10,r11);
	r13 = String___alloc__(r12,r10);
	r7 = String___add__(r7,r13);
	hl_throw((vdynamic*)r7);
	label$c13dd8a_4_49:
	r16 = haxe_zip_Reader_readZipDate(r0);
	r10 = haxe_io_Input_readInt32(r1);
	r17 = hl_alloc_dynamic(&t$_i32);
	r17->v.i = r10;
	r10 = haxe_io_Input_readInt32(r1);
	r15 = haxe_io_Input_readInt32(r1);
	r18 = haxe_io_Input_readInt16(r1);
	r19 = haxe_io_Input_readInt16(r1);
	r21 = NULL;
	r7 = haxe_io_Input_readString(r1,r18,r21);
	r22 = haxe_zip_Reader_readExtraFields(r0,r19);
	if( !r8 ) goto label$c13dd8a_4_63;
	if( r22 == NULL ) hl_null_access();
	r23 = (venum*)g$haxe_zip_ExtraField_FUtf8;
	haxe_ds_List_push(r22,((vdynamic*)r23));
	label$c13dd8a_4_63:
	r24 = NULL;
	r25 = 8;
	r20 = r5 & r25;
	r25 = 0;
	if( r20 == r25 ) goto label$c13dd8a_4_70;
	r26 = NULL;
	r17 = r26;
	label$c13dd8a_4_70:
	r6 = hl_alloc_virtual(&t$vrt_775c77c);
	if( hl_vfields(r6)[5] ) *(String*)(hl_vfields(r6)[5]) = (String)r7; else hl_dyn_setp(r6->value,37969014/*fileName*/,&t$String,r7);
	if( hl_vfields(r6)[6] ) *(int*)(hl_vfields(r6)[6]) = (int)r15; else hl_dyn_seti(r6->value,93817580/*fileSize*/,&t$_i32,r15);
	if( hl_vfields(r6)[7] ) *(Date*)(hl_vfields(r6)[7]) = (Date)r16; else hl_dyn_setp(r6->value,104904248/*fileTime*/,&t$Date,r16);
	if( hl_vfields(r6)[0] ) *(bool*)(hl_vfields(r6)[0]) = (bool)r14; else hl_dyn_seti(r6->value,131747344/*compressed*/,&t$_bool,r14);
	if( hl_vfields(r6)[3] ) *(int*)(hl_vfields(r6)[3]) = (int)r10; else hl_dyn_seti(r6->value,-339247492/*dataSize*/,&t$_i32,r10);
	if( hl_vfields(r6)[2] ) *(haxe__io__Bytes*)(hl_vfields(r6)[2]) = (haxe__io__Bytes)r24; else hl_dyn_setp(r6->value,40064820/*data*/,&t$haxe_io_Bytes,r24);
	if( hl_vfields(r6)[1] ) *(vdynamic**)(hl_vfields(r6)[1]) = (vdynamic*)r17; else hl_dyn_setp(r6->value,206638461/*crc32*/,&t$nul_i32,r17);
	if( hl_vfields(r6)[4] ) *(haxe__ds__List*)(hl_vfields(r6)[4]) = (haxe__ds__List)r22; else hl_dyn_setp(r6->value,524806840/*extraFields*/,&t$haxe_ds_List,r22);
	return r6;
}

haxe__ds__List haxe_zip_Reader_read(haxe__zip__Reader r0) {
	haxe__io__BytesBuffer r11;
	vvirtual *r6;
	venum *r18;
	bool r5;
	haxe__io__Bytes r4, r9;
	haxe__zip__InflateImpl r12;
	haxe__ds__List r1;
	haxe__io__Input r13;
	vdynamic *r3, *r7, *r14, *r15, *r20;
	vbyte *r19;
	int r8, r10, r16, r17;
	r1 = (haxe__ds__List)hl_alloc_obj(&t$haxe_ds_List);
	haxe_ds_List_new(r1);
	r3 = NULL;
	r4 = NULL;
	label$c13dd8a_5_4:
	r5 = true;
	if( !r5 ) goto label$c13dd8a_5_93;
	r6 = haxe_zip_Reader_readEntryHeader(r0);
	if( r6 ) goto label$c13dd8a_5_10;
	goto label$c13dd8a_5_93;
	label$c13dd8a_5_10:
	if( r6 == NULL ) hl_null_access();
	r7 = hl_vfields(r6)[1] ? (*(vdynamic**)(hl_vfields(r6)[1])) : (vdynamic*)hl_dyn_getp(r6->value,206638461/*crc32*/,&t$nul_i32);
	if( r7 ) goto label$c13dd8a_5_85;
	r5 = hl_vfields(r6)[0] ? (*(bool*)(hl_vfields(r6)[0])) : (bool)hl_dyn_geti(r6->value,131747344/*compressed*/,&t$_bool);
	if( !r5 ) goto label$c13dd8a_5_53;
	r8 = 65536;
	if( r4 ) goto label$c13dd8a_5_19;
	r9 = haxe_io_Bytes_alloc(r8);
	r4 = r9;
	label$c13dd8a_5_19:
	r11 = (haxe__io__BytesBuffer)hl_alloc_obj(&t$haxe_io_BytesBuffer);
	haxe_io_BytesBuffer_new(r11);
	r12 = (haxe__zip__InflateImpl)hl_alloc_obj(&t$haxe_zip_InflateImpl);
	r13 = r0->i;
	r5 = false;
	r14 = hl_alloc_dynbool(r5);
	r5 = false;
	r15 = hl_alloc_dynbool(r5);
	haxe_zip_InflateImpl_new(r12,r13,r14,r15);
	label$c13dd8a_5_28:
	r5 = true;
	if( !r5 ) goto label$c13dd8a_5_48;
	if( r12 == NULL ) hl_null_access();
	r10 = 0;
	r10 = haxe_zip_InflateImpl_readBytes(r12,r4,r10,r8);
	r17 = 0;
	if( r10 < r17 ) goto label$c13dd8a_5_39;
	if( r4 == NULL ) hl_null_access();
	r17 = r4->length;
	if( r17 >= r10 ) goto label$c13dd8a_5_41;
	label$c13dd8a_5_39:
	r18 = (venum*)g$haxe_io_Error_OutsideBounds;
	hl_throw((vdynamic*)r18);
	label$c13dd8a_5_41:
	if( r11 == NULL ) hl_null_access();
	r19 = r4->b;
	r16 = 0;
	haxe_io_BytesBuffer___add(r11,r19,r16,r10);
	if( r10 >= r8 ) goto label$c13dd8a_5_47;
	goto label$c13dd8a_5_48;
	label$c13dd8a_5_47:
	goto label$c13dd8a_5_28;
	label$c13dd8a_5_48:
	if( r6 == NULL ) hl_null_access();
	if( r11 == NULL ) hl_null_access();
	r9 = haxe_io_BytesBuffer_getBytes(r11);
	if( hl_vfields(r6)[2] ) *(haxe__io__Bytes*)(hl_vfields(r6)[2]) = (haxe__io__Bytes)r9; else hl_dyn_setp(r6->value,40064820/*data*/,&t$haxe_io_Bytes,r9);
	goto label$c13dd8a_5_58;
	label$c13dd8a_5_53:
	r13 = r0->i;
	if( r13 == NULL ) hl_null_access();
	r8 = hl_vfields(r6)[3] ? (*(int*)(hl_vfields(r6)[3])) : (int)hl_dyn_geti(r6->value,-339247492/*dataSize*/,&t$_i32);
	r9 = haxe_io_Input_read(r13,r8);
	if( hl_vfields(r6)[2] ) *(haxe__io__Bytes*)(hl_vfields(r6)[2]) = (haxe__io__Bytes)r9; else hl_dyn_setp(r6->value,40064820/*data*/,&t$haxe_io_Bytes,r9);
	label$c13dd8a_5_58:
	r13 = r0->i;
	if( r13 == NULL ) hl_null_access();
	r8 = haxe_io_Input_readInt32(r13);
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r8;
	if( hl_vfields(r6)[1] ) *(vdynamic**)(hl_vfields(r6)[1]) = (vdynamic*)r7; else hl_dyn_setp(r6->value,206638461/*crc32*/,&t$nul_i32,r7);
	r7 = hl_vfields(r6)[1] ? (*(vdynamic**)(hl_vfields(r6)[1])) : (vdynamic*)hl_dyn_getp(r6->value,206638461/*crc32*/,&t$nul_i32);
	r8 = 134695760;
	r20 = hl_alloc_dynamic(&t$_i32);
	r20->v.i = r8;
	if( r7 != r20 && (!r7 || !r20 || (r7->v.i != r20->v.i)) ) goto label$c13dd8a_5_72;
	r13 = r0->i;
	if( r13 == NULL ) hl_null_access();
	r8 = haxe_io_Input_readInt32(r13);
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r8;
	if( hl_vfields(r6)[1] ) *(vdynamic**)(hl_vfields(r6)[1]) = (vdynamic*)r7; else hl_dyn_setp(r6->value,206638461/*crc32*/,&t$nul_i32,r7);
	label$c13dd8a_5_72:
	r13 = r0->i;
	if( r13 == NULL ) hl_null_access();
	r8 = haxe_io_Input_readInt32(r13);
	if( hl_vfields(r6)[3] ) *(int*)(hl_vfields(r6)[3]) = (int)r8; else hl_dyn_seti(r6->value,-339247492/*dataSize*/,&t$_i32,r8);
	r13 = r0->i;
	if( r13 == NULL ) hl_null_access();
	r8 = haxe_io_Input_readInt32(r13);
	if( hl_vfields(r6)[6] ) *(int*)(hl_vfields(r6)[6]) = (int)r8; else hl_dyn_seti(r6->value,93817580/*fileSize*/,&t$_i32,r8);
	r8 = hl_vfields(r6)[6] ? (*(int*)(hl_vfields(r6)[6])) : (int)hl_dyn_geti(r6->value,93817580/*fileSize*/,&t$_i32);
	if( hl_vfields(r6)[3] ) *(int*)(hl_vfields(r6)[3]) = (int)r8; else hl_dyn_seti(r6->value,-339247492/*dataSize*/,&t$_i32,r8);
	r5 = false;
	if( hl_vfields(r6)[0] ) *(bool*)(hl_vfields(r6)[0]) = (bool)r5; else hl_dyn_seti(r6->value,131747344/*compressed*/,&t$_bool,r5);
	goto label$c13dd8a_5_90;
	label$c13dd8a_5_85:
	r13 = r0->i;
	if( r13 == NULL ) hl_null_access();
	r8 = hl_vfields(r6)[3] ? (*(int*)(hl_vfields(r6)[3])) : (int)hl_dyn_geti(r6->value,-339247492/*dataSize*/,&t$_i32);
	r9 = haxe_io_Input_read(r13,r8);
	if( hl_vfields(r6)[2] ) *(haxe__io__Bytes*)(hl_vfields(r6)[2]) = (haxe__io__Bytes)r9; else hl_dyn_setp(r6->value,40064820/*data*/,&t$haxe_io_Bytes,r9);
	label$c13dd8a_5_90:
	if( r1 == NULL ) hl_null_access();
	haxe_ds_List_add(r1,((vdynamic*)r6));
	goto label$c13dd8a_5_4;
	label$c13dd8a_5_93:
	return r1;
}

haxe__ds__List haxe_zip_Reader_readZip(haxe__io__Input r0) {
	haxe__ds__List r3;
	haxe__zip__Reader r1;
	r1 = (haxe__zip__Reader)hl_alloc_obj(&t$haxe_zip_Reader);
	haxe_zip_Reader_new(r1,r0);
	r3 = haxe_zip_Reader_read(r1);
	return r3;
}

