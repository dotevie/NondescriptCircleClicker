// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <openfl/text/_internal/CacheMeasurement.h>
extern hl_type t$String;
#include <hl/natives.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern hl_type t$haxe_ds_IntMap;
void haxe_ds_IntMap_new(haxe__ds__IntMap);
void openfl_text__internal_CacheMeasurement_set(openfl__text___internal__CacheMeasurement,String,hl__types__ArrayObj);
void openfl_text__internal_CacheMeasurement___addCollision(openfl__text___internal__CacheMeasurement,String,hl__types__ArrayObj);
int hl_types_ArrayObj_indexOf(hl__types__ArrayObj,vdynamic*,vdynamic*);
vdynamic* haxe_ds_IntMap_get(haxe__ds__IntMap,int);
extern hl_type t$hl_types_ArrayObj;
extern hl_type t$_dyn;
bool openfl_text__internal_CacheMeasurement_exists(openfl__text___internal__CacheMeasurement,String);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
void haxe_ds_IntMap_set(haxe__ds__IntMap,int,vdynamic*);

void openfl_text__internal_CacheMeasurement_new(openfl__text___internal__CacheMeasurement r0,String r1,hl__types__ArrayObj r2) {
	hl__types__ArrayObj r3;
	hl_type *r5;
	haxe__ds__IntMap r7;
	int r6;
	varray *r4;
	r5 = &t$String;
	r6 = 0;
	r4 = hl_alloc_array(r5,r6);
	r3 = hl_types_ArrayObj_alloc(r4);
	r0->__collisions = r3;
	r7 = (haxe__ds__IntMap)hl_alloc_obj(&t$haxe_ds_IntMap);
	haxe_ds_IntMap_new(r7);
	r0->__wordMap = r7;
	openfl_text__internal_CacheMeasurement_set(r0,r1,r2);
	return;
}

void openfl_text__internal_CacheMeasurement_set(openfl__text___internal__CacheMeasurement r0,String r1,hl__types__ArrayObj r2) {
	openfl_text__internal_CacheMeasurement___addCollision(r0,r1,r2);
	return;
}

hl__types__ArrayObj openfl_text__internal_CacheMeasurement_get(openfl__text___internal__CacheMeasurement r0,String r1) {
	hl__types__ArrayObj r3;
	haxe__ds__IntMap r6;
	vdynamic *r5, *r7;
	int r2, r4;
	r3 = r0->__collisions;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->length;
	r4 = 1;
	if( r4 >= r2 ) goto label$6b294ee_3_14;
	r6 = r0->__wordMap;
	if( r6 == NULL ) hl_null_access();
	r3 = r0->__collisions;
	if( r3 == NULL ) hl_null_access();
	r7 = NULL;
	r2 = hl_types_ArrayObj_indexOf(r3,((vdynamic*)r1),r7);
	r5 = haxe_ds_IntMap_get(r6,r2);
	r3 = (hl__types__ArrayObj)hl_dyn_castp(&r5,&t$_dyn,&t$hl_types_ArrayObj);
	return r3;
	label$6b294ee_3_14:
	r6 = r0->__wordMap;
	if( r6 == NULL ) hl_null_access();
	r2 = 0;
	r5 = haxe_ds_IntMap_get(r6,r2);
	r3 = (hl__types__ArrayObj)hl_dyn_castp(&r5,&t$_dyn,&t$hl_types_ArrayObj);
	return r3;
}

void openfl_text__internal_CacheMeasurement___addCollision(openfl__text___internal__CacheMeasurement r0,String r1,hl__types__ArrayObj r2) {
	hl__types__ArrayObj r7;
	bool r4;
	haxe__ds__IntMap r5;
	int r6, r8;
	r4 = openfl_text__internal_CacheMeasurement_exists(r0,r1);
	if( r4 ) goto label$6b294ee_4_10;
	r5 = r0->__wordMap;
	if( r5 == NULL ) hl_null_access();
	r7 = r0->__collisions;
	if( r7 == NULL ) hl_null_access();
	r6 = hl_types_ArrayObj_push(r7,((vdynamic*)r1));
	r8 = 1;
	r6 = r6 - r8;
	haxe_ds_IntMap_set(r5,r6,((vdynamic*)r2));
	label$6b294ee_4_10:
	return;
}

bool openfl_text__internal_CacheMeasurement_exists(openfl__text___internal__CacheMeasurement r0,String r1) {
	hl__types__ArrayObj r3;
	bool r5;
	vdynamic *r6;
	int r2, r4;
	r3 = r0->__collisions;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->length;
	r4 = 0;
	if( r2 != r4 ) goto label$6b294ee_5_7;
	r5 = false;
	return r5;
	label$6b294ee_5_7:
	r3 = r0->__collisions;
	if( r3 == NULL ) hl_null_access();
	r6 = NULL;
	r2 = hl_types_ArrayObj_indexOf(r3,((vdynamic*)r1),r6);
	r4 = -1;
	if( r2 > r4 ) goto label$6b294ee_5_15;
	r5 = false;
	goto label$6b294ee_5_16;
	label$6b294ee_5_15:
	r5 = true;
	label$6b294ee_5_16:
	return r5;
}

