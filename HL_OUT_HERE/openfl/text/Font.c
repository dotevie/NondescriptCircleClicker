// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <openfl/text/Font.h>
void lime_text_Font_new(lime__text__Font,String);
extern openfl__text__$Font g$_openfl_text_Font;
hl__types__ArrayObj hl_types_ArrayObj_copy(hl__types__ArrayObj);
String lime_system_System_get_fontsDirectory(void);
hl__types__ArrayObj sys_FileSystem_readDirectory(String);
String String_toLowerCase(String);
extern String s$_ttf;
int String_indexOf(String,String,vdynamic*);
String String___add__(String,String);
openfl__text__Font openfl_text_Font_fromFile(String);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
extern String s$;
extern String s$LocalAppData;
String Sys_getEnv(String);
extern String s$_Microsoft_Windows_Fonts;
bool sys_FileSystem_exists(String);
#include <haxe/io/Bytes.h>
extern hl_type t$openfl_text_Font;
haxe__io__Bytes openfl_utils__ByteArray_ByteArray_Impl__toBytes(openfl__utils__ByteArrayData);
void lime_text_Font___fromBytes(lime__text__Font,haxe__io__Bytes);
void lime_text_Font___fromFile(lime__text__Font,String);
lime__app__Future openfl_text_Font_loadFromBytes__$1(lime__text__Font);
extern hl_type t$fun_41b361a;
lime__app__Future lime_text_Font_loadFromBytes(haxe__io__Bytes);
lime__app__Future wrapt$fun_2647f04(vclosure*,vdynamic*);
extern hl_type t$fun_2647f04;
lime__app__Future lime_app_Future_then(lime__app__Future,vclosure*);
void openfl_text_Font___fromLimeFont(openfl__text__Font,lime__text__Font);
lime__app__Future lime_app_Future_withValue(vdynamic*);
lime__app__Future openfl_text_Font_loadFromFile__$1(lime__text__Font);
lime__app__Future lime_text_Font_loadFromFile(String);
lime__app__Future openfl_text_Font_loadFromName__$1(lime__text__Font);
lime__app__Future lime_text_Font_loadFromName(String);
#include <hl/types/ArrayDyn.h>
hl__Class Type_getClass(vdynamic*);
extern hl_type t$hl_Class;
extern hl_type t$_dyn;
#include <hl/natives.h>
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
#include <hl/types/ArrayBase.h>
hl__types__ArrayDyn hl_types_ArrayDyn_alloc(hl__types__ArrayBase,bool*);
vdynamic* Type_createInstance(hl__Class,hl__types__ArrayDyn);
void haxe_ds_StringMap_set(haxe__ds__StringMap,String,vdynamic*);
void lime_text_Font___copyFrom(lime__text__Font,lime__text__Font);
void lime_text_Font___initializeSource(lime__text__Font);
bool openfl_utils_Assets_isLocal(String,String,bool*);
openfl__utils__ByteArrayData openfl_utils_Assets_getBytes(String);

void openfl_text_Font_new(openfl__text__Font r0,String r1) {
	lime_text_Font_new(((lime__text__Font)r0),r1);
	return;
}

hl__types__ArrayObj openfl_text_Font_enumerateFonts(bool* r0) {
	String r6, r13, r14, r17;
	hl__types__ArrayObj r3, r5, r10;
	openfl__text__Font r16;
	bool r1, r2;
	openfl__text__$Font r4;
	vdynamic *r11, *r15;
	varray *r12;
	int r7, r8, r9;
	if( r0 ) goto label$ac31c33_2_3;
	r1 = false;
	goto label$ac31c33_2_4;
	label$ac31c33_2_3:
	r1 = *r0;
	label$ac31c33_2_4:
	if( !r1 ) goto label$ac31c33_2_75;
	r4 = (openfl__text__$Font)g$_openfl_text_Font;
	r3 = r4->__registeredFonts;
	if( r3 == NULL ) hl_null_access();
	r3 = hl_types_ArrayObj_copy(r3);
	r6 = lime_system_System_get_fontsDirectory();
	r5 = sys_FileSystem_readDirectory(r6);
	r7 = 0;
	label$ac31c33_2_12:
	if( r5 == NULL ) hl_null_access();
	r9 = r5->length;
	if( r7 >= r9 ) goto label$ac31c33_2_38;
	r9 = r5->length;
	if( ((unsigned)r7) < ((unsigned)r9) ) goto label$ac31c33_2_20;
	r6 = NULL;
	goto label$ac31c33_2_23;
	label$ac31c33_2_20:
	r12 = r5->array;
	r11 = ((vdynamic**)(r12 + 1))[r7];
	r6 = (String)r11;
	label$ac31c33_2_23:
	++r7;
	if( r6 == NULL ) hl_null_access();
	r13 = String_toLowerCase(r6);
	if( r13 == NULL ) hl_null_access();
	r14 = (String)s$_ttf;
	r15 = NULL;
	r8 = String_indexOf(r13,r14,r15);
	r9 = -1;
	if( r8 == r9 ) goto label$ac31c33_2_37;
	if( r3 == NULL ) hl_null_access();
	r13 = lime_system_System_get_fontsDirectory();
	r13 = String___add__(r13,r6);
	r16 = openfl_text_Font_fromFile(r13);
	r8 = hl_types_ArrayObj_push(r3,((vdynamic*)r16));
	label$ac31c33_2_37:
	goto label$ac31c33_2_12;
	label$ac31c33_2_38:
	r6 = (String)s$;
	r13 = (String)s$LocalAppData;
	r13 = Sys_getEnv(r13);
	r6 = String___add__(r6,r13);
	r13 = (String)s$_Microsoft_Windows_Fonts;
	r6 = String___add__(r6,r13);
	r2 = sys_FileSystem_exists(r6);
	if( !r2 ) goto label$ac31c33_2_74;
	r10 = sys_FileSystem_readDirectory(r6);
	r5 = r10;
	r7 = 0;
	label$ac31c33_2_49:
	if( r5 == NULL ) hl_null_access();
	r9 = r5->length;
	if( r7 >= r9 ) goto label$ac31c33_2_74;
	r9 = r5->length;
	if( ((unsigned)r7) < ((unsigned)r9) ) goto label$ac31c33_2_57;
	r13 = NULL;
	goto label$ac31c33_2_60;
	label$ac31c33_2_57:
	r12 = r5->array;
	r11 = ((vdynamic**)(r12 + 1))[r7];
	r13 = (String)r11;
	label$ac31c33_2_60:
	++r7;
	if( r13 == NULL ) hl_null_access();
	r14 = String_toLowerCase(r13);
	if( r14 == NULL ) hl_null_access();
	r17 = (String)s$_ttf;
	r15 = NULL;
	r8 = String_indexOf(r14,r17,r15);
	r9 = -1;
	if( r8 == r9 ) goto label$ac31c33_2_73;
	if( r3 == NULL ) hl_null_access();
	r14 = String___add__(r6,r13);
	r16 = openfl_text_Font_fromFile(r14);
	r8 = hl_types_ArrayObj_push(r3,((vdynamic*)r16));
	label$ac31c33_2_73:
	goto label$ac31c33_2_49;
	label$ac31c33_2_74:
	return r3;
	label$ac31c33_2_75:
	r4 = (openfl__text__$Font)g$_openfl_text_Font;
	r3 = r4->__registeredFonts;
	return r3;
}

openfl__text__Font openfl_text_Font_fromBytes(openfl__utils__ByteArrayData r0) {
	String r2;
	haxe__io__Bytes r5;
	openfl__text__Font r1, r4;
	vdynamic *r6;
	r1 = (openfl__text__Font)hl_alloc_obj(&t$openfl_text_Font);
	r2 = NULL;
	openfl_text_Font_new(r1,r2);
	r5 = openfl_utils__ByteArray_ByteArray_Impl__toBytes(r0);
	lime_text_Font___fromBytes(((lime__text__Font)r1),r5);
	r6 = r1->src;
	if( !r6 ) goto label$ac31c33_3_8;
	return r1;
	label$ac31c33_3_8:
	r4 = NULL;
	return r4;
}

openfl__text__Font openfl_text_Font_fromFile(String r0) {
	String r2;
	openfl__text__Font r3, r5;
	vdynamic *r4;
	if( r0 ) goto label$ac31c33_4_3;
	r3 = NULL;
	return r3;
	label$ac31c33_4_3:
	r3 = (openfl__text__Font)hl_alloc_obj(&t$openfl_text_Font);
	r2 = NULL;
	openfl_text_Font_new(r3,r2);
	lime_text_Font___fromFile(((lime__text__Font)r3),r0);
	r4 = r3->src;
	if( !r4 ) goto label$ac31c33_4_10;
	return r3;
	label$ac31c33_4_10:
	r5 = NULL;
	return r5;
}

lime__app__Future openfl_text_Font_loadFromBytes(openfl__utils__ByteArrayData r0) {
	haxe__io__Bytes r2;
	lime__app__Future r1;
	vclosure *r3, *r4;
	static vclosure cl$0 = { &t$fun_41b361a, openfl_text_Font_loadFromBytes__$1, 0 };
	r2 = openfl_utils__ByteArray_ByteArray_Impl__toBytes(r0);
	r1 = lime_text_Font_loadFromBytes(r2);
	if( r1 == NULL ) hl_null_access();
	r3 = &cl$0;
	if( r3 ) goto label$ac31c33_5_7;
	r4 = NULL;
	goto label$ac31c33_5_8;
	label$ac31c33_5_7:
	r4 = hl_alloc_closure_ptr(&t$fun_2647f04,wrapt$fun_2647f04,r3);
	label$ac31c33_5_8:
	r1 = lime_app_Future_then(r1,r4);
	return r1;
}

lime__app__Future openfl_text_Font_loadFromBytes__$1(lime__text__Font r0) {
	String r2;
	openfl__text__Font r1;
	lime__app__Future r4;
	r1 = (openfl__text__Font)hl_alloc_obj(&t$openfl_text_Font);
	r2 = NULL;
	openfl_text_Font_new(r1,r2);
	openfl_text_Font___fromLimeFont(r1,r0);
	r4 = lime_app_Future_withValue(((vdynamic*)r1));
	return r4;
}

lime__app__Future openfl_text_Font_loadFromFile(String r0) {
	lime__app__Future r1;
	vclosure *r2, *r3;
	static vclosure cl$0 = { &t$fun_41b361a, openfl_text_Font_loadFromFile__$1, 0 };
	r1 = lime_text_Font_loadFromFile(r0);
	if( r1 == NULL ) hl_null_access();
	r2 = &cl$0;
	if( r2 ) goto label$ac31c33_7_6;
	r3 = NULL;
	goto label$ac31c33_7_7;
	label$ac31c33_7_6:
	r3 = hl_alloc_closure_ptr(&t$fun_2647f04,wrapt$fun_2647f04,r2);
	label$ac31c33_7_7:
	r1 = lime_app_Future_then(r1,r3);
	return r1;
}

lime__app__Future openfl_text_Font_loadFromFile__$1(lime__text__Font r0) {
	String r2;
	openfl__text__Font r1;
	lime__app__Future r4;
	r1 = (openfl__text__Font)hl_alloc_obj(&t$openfl_text_Font);
	r2 = NULL;
	openfl_text_Font_new(r1,r2);
	openfl_text_Font___fromLimeFont(r1,r0);
	r4 = lime_app_Future_withValue(((vdynamic*)r1));
	return r4;
}

lime__app__Future openfl_text_Font_loadFromName(String r0) {
	lime__app__Future r1;
	vclosure *r2, *r3;
	static vclosure cl$0 = { &t$fun_41b361a, openfl_text_Font_loadFromName__$1, 0 };
	r1 = lime_text_Font_loadFromName(r0);
	if( r1 == NULL ) hl_null_access();
	r2 = &cl$0;
	if( r2 ) goto label$ac31c33_9_6;
	r3 = NULL;
	goto label$ac31c33_9_7;
	label$ac31c33_9_6:
	r3 = hl_alloc_closure_ptr(&t$fun_2647f04,wrapt$fun_2647f04,r2);
	label$ac31c33_9_7:
	r1 = lime_app_Future_then(r1,r3);
	return r1;
}

lime__app__Future openfl_text_Font_loadFromName__$1(lime__text__Font r0) {
	String r2;
	openfl__text__Font r1;
	lime__app__Future r4;
	r1 = (openfl__text__Font)hl_alloc_obj(&t$openfl_text_Font);
	r2 = NULL;
	openfl_text_Font_new(r1,r2);
	openfl_text_Font___fromLimeFont(r1,r0);
	r4 = lime_app_Future_withValue(((vdynamic*)r1));
	return r4;
}

void openfl_text_Font_registerFont(vdynamic* r0) {
	String r15;
	bool *r11;
	hl__Class r3;
	haxe__ds__StringMap r14;
	hl__types__ArrayObj r9;
	hl_type *r7;
	bool r10;
	openfl__text__Font r1, r12;
	openfl__text__$Font r13;
	hl__types__ArrayDyn r5;
	vdynamic *r4;
	int r8;
	varray *r6;
	r1 = NULL;
	r3 = Type_getClass(r0);
	if( r3 ) goto label$ac31c33_11_14;
	r3 = (hl__Class)hl_dyn_castp(&r0,&t$_dyn,&t$hl_Class);
	r7 = &t$_dyn;
	r8 = 0;
	r6 = hl_alloc_array(r7,r8);
	r9 = hl_types_ArrayObj_alloc(r6);
	r10 = true;
	r11 = &r10;
	r5 = hl_types_ArrayDyn_alloc(((hl__types__ArrayBase)r9),r11);
	r4 = Type_createInstance(r3,r5);
	r12 = (openfl__text__Font)hl_dyn_castp(&r4,&t$_dyn,&t$openfl_text_Font);
	goto label$ac31c33_11_15;
	label$ac31c33_11_14:
	r12 = (openfl__text__Font)hl_dyn_castp(&r0,&t$_dyn,&t$openfl_text_Font);
	label$ac31c33_11_15:
	if( !r12 ) goto label$ac31c33_11_26;
	r13 = (openfl__text__$Font)g$_openfl_text_Font;
	r9 = r13->__registeredFonts;
	if( r9 == NULL ) hl_null_access();
	r8 = hl_types_ArrayObj_push(r9,((vdynamic*)r12));
	r13 = (openfl__text__$Font)g$_openfl_text_Font;
	r14 = r13->__fontByName;
	if( r14 == NULL ) hl_null_access();
	if( r12 == NULL ) hl_null_access();
	r15 = r12->name;
	haxe_ds_StringMap_set(r14,r15,((vdynamic*)r12));
	label$ac31c33_11_26:
	return;
}

void openfl_text_Font___fromLimeFont(openfl__text__Font r0,lime__text__Font r1) {
	lime_text_Font___copyFrom(((lime__text__Font)r0),r1);
	return;
}

bool openfl_text_Font___initialize(openfl__text__Font r0) {
	bool *r8;
	String r6, r7;
	openfl__utils__ByteArrayData r10;
	haxe__io__Bytes r9;
	bool r2;
	vdynamic *r3;
	int r4, r5;
	r2 = r0->__initialized;
	if( r2 ) goto label$ac31c33_13_26;
	r3 = r0->src;
	if( !r3 ) goto label$ac31c33_13_11;
	r4 = r0->unitsPerEM;
	r5 = 0;
	if( r4 != r5 ) goto label$ac31c33_13_8;
	lime_text_Font___initializeSource(((lime__text__Font)r0));
	label$ac31c33_13_8:
	r2 = true;
	r0->__initialized = r2;
	goto label$ac31c33_13_26;
	label$ac31c33_13_11:
	r3 = r0->src;
	if( r3 ) goto label$ac31c33_13_26;
	r6 = r0->__fontID;
	if( !r6 ) goto label$ac31c33_13_26;
	r6 = r0->__fontID;
	r7 = NULL;
	r8 = NULL;
	r2 = openfl_utils_Assets_isLocal(r6,r7,r8);
	if( !r2 ) goto label$ac31c33_13_26;
	r6 = r0->__fontID;
	r10 = openfl_utils_Assets_getBytes(r6);
	r9 = openfl_utils__ByteArray_ByteArray_Impl__toBytes(r10);
	lime_text_Font___fromBytes(((lime__text__Font)r0),r9);
	r2 = true;
	r0->__initialized = r2;
	label$ac31c33_13_26:
	r2 = r0->__initialized;
	return r2;
}

String openfl_text_Font_get_fontName(openfl__text__Font r0) {
	String r1;
	r1 = r0->name;
	return r1;
}

String openfl_text_Font_set_fontName(openfl__text__Font r0,String r1) {
	r0->name = r1;
	return r1;
}

