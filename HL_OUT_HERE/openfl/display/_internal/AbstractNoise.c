// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <openfl/display/_internal/AbstractNoise.h>
void openfl_display__internal_AbstractNoise_calculateOctaves(openfl__display___internal__AbstractNoise,double);
#include <openfl/display/BitmapData.h>
int openfl_display_BitmapData_getPixel32(openfl__display__BitmapData,int,int);
int openfl_display__internal_AbstractNoise_mixI(openfl__display___internal__AbstractNoise,int,int,double);
int openfl_display__internal_AbstractNoise_noiseToColor(openfl__display___internal__AbstractNoise,double);
#include <hl/types/ArrayBytes_Int.h>
#include <hl/natives.h>
hl__types__ArrayBytes_Float hl_types_ArrayBase_allocF64(vbyte*,int);
int hl_types_ArrayBytes_Float_push(hl__types__ArrayBytes_Float,double);

void openfl_display__internal_AbstractNoise_new(openfl__display___internal__AbstractNoise r0,int r1,int r2,int r3,bool r4,double r5,bool* r6,double* r7) {
	bool r8;
	double r9;
	if( r6 ) goto label$6b32b94_1_3;
	r8 = false;
	goto label$6b32b94_1_4;
	label$6b32b94_1_3:
	r8 = *r6;
	label$6b32b94_1_4:
	if( r7 ) goto label$6b32b94_1_7;
	r9 = 0.050000000000000003;
	goto label$6b32b94_1_8;
	label$6b32b94_1_7:
	r9 = *r7;
	label$6b32b94_1_8:
	r0->stitch = r8;
	r0->stitch_threshold = r9;
	r0->octaves = r2;
	r0->channels = r3;
	r0->grayscale = r4;
	openfl_display__internal_AbstractNoise_calculateOctaves(r0,r5);
	return;
}

void openfl_display__internal_AbstractNoise_fill(openfl__display___internal__AbstractNoise r0,openfl__display__BitmapData r1,double r2,double r3,double r4) {
	return;
}

int openfl_display__internal_AbstractNoise_stitching(openfl__display___internal__AbstractNoise r0,openfl__display__BitmapData r1,int r2,int r3,int r4,int r5,int r6,int r7,int r8) {
	double r17, r18;
	int r9, r10, r11, r12, r13, r14, r15, r16;
	r10 = 16;
	r9 = r2 >> r10;
	r10 = 255;
	r9 = r9 & r10;
	r11 = 8;
	r10 = r2 >> r11;
	r11 = 255;
	r10 = r10 & r11;
	r12 = 255;
	r11 = r2 & r12;
	r12 = r7 - r5;
	if( r12 >= r3 ) goto label$6b32b94_3_36;
	if( r1 == NULL ) hl_null_access();
	r12 = r7 - r3;
	r12 = openfl_display_BitmapData_getPixel32(r1,r12,r4);
	r14 = 16;
	r13 = r12 >> r14;
	r14 = 255;
	r13 = r13 & r14;
	r15 = 8;
	r14 = r12 >> r15;
	r15 = 255;
	r14 = r14 & r15;
	r16 = 255;
	r15 = r12 & r16;
	r16 = r7 - r3;
	r17 = (double)r16;
	r18 = (double)r5;
	r17 = r17 / r18;
	r18 = r17 * r17;
	r16 = openfl_display__internal_AbstractNoise_mixI(r0,r13,r9,r17);
	r9 = r16;
	r16 = openfl_display__internal_AbstractNoise_mixI(r0,r14,r10,r17);
	r10 = r16;
	r16 = openfl_display__internal_AbstractNoise_mixI(r0,r15,r11,r17);
	r11 = r16;
	label$6b32b94_3_36:
	r12 = r8 - r6;
	if( r12 >= r4 ) goto label$6b32b94_3_62;
	if( r1 == NULL ) hl_null_access();
	r13 = r8 - r4;
	r12 = openfl_display_BitmapData_getPixel32(r1,r3,r13);
	r14 = 16;
	r13 = r12 >> r14;
	r14 = 255;
	r13 = r13 & r14;
	r15 = 8;
	r14 = r12 >> r15;
	r15 = 255;
	r14 = r14 & r15;
	r16 = 255;
	r15 = r12 & r16;
	r16 = r8 - r4;
	r17 = (double)r16;
	r18 = (double)r6;
	r17 = r17 / r18;
	r18 = r17 * r17;
	r16 = openfl_display__internal_AbstractNoise_mixI(r0,r13,r9,r17);
	r9 = r16;
	r16 = openfl_display__internal_AbstractNoise_mixI(r0,r14,r10,r17);
	r10 = r16;
	r16 = openfl_display__internal_AbstractNoise_mixI(r0,r15,r11,r17);
	r11 = r16;
	label$6b32b94_3_62:
	r12 = -16777216;
	r14 = 16;
	r13 = r9 << r14;
	r12 = r12 | r13;
	r14 = 8;
	r13 = r10 << r14;
	r12 = r12 | r13;
	r12 = r12 | r11;
	return r12;
}

int openfl_display__internal_AbstractNoise_color(openfl__display___internal__AbstractNoise r0,vdynamic* r1,vdynamic* r2,vdynamic* r3) {
	double r8;
	int r4, r5, r6, r7, r9, r10;
	r4 = 0;
	r5 = 0;
	r6 = 0;
	if( !r1 ) goto label$6b32b94_4_7;
	r8 = r1 ? r1->v.d : 0;
	r7 = openfl_display__internal_AbstractNoise_noiseToColor(r0,r8);
	r4 = r7;
	label$6b32b94_4_7:
	if( !r2 ) goto label$6b32b94_4_11;
	r8 = r2 ? r2->v.d : 0;
	r7 = openfl_display__internal_AbstractNoise_noiseToColor(r0,r8);
	r5 = r7;
	label$6b32b94_4_11:
	if( !r3 ) goto label$6b32b94_4_15;
	r8 = r3 ? r3->v.d : 0;
	r7 = openfl_display__internal_AbstractNoise_noiseToColor(r0,r8);
	r6 = r7;
	label$6b32b94_4_15:
	r7 = -16777216;
	r10 = 16;
	r9 = r4 << r10;
	r7 = r7 | r9;
	r10 = 8;
	r9 = r5 << r10;
	r7 = r7 | r9;
	r7 = r7 | r6;
	return r7;
}

int openfl_display__internal_AbstractNoise_noiseToColor(openfl__display___internal__AbstractNoise r0,double r1) {
	double r2, r3;
	int r4;
	r3 = r0->persistence_max;
	r2 = r1 * r3;
	r3 = 1.;
	r2 = r2 + r3;
	r3 = 128.;
	r2 = r2 * r3;
	r4 = (int)r2;
	return r4;
}

double openfl_display__internal_AbstractNoise_fade(openfl__display___internal__AbstractNoise r0,double r1) {
	double r2, r3, r4, r5;
	r2 = r1 * r1;
	r2 = r2 * r1;
	r5 = 6.;
	r4 = r1 * r5;
	r5 = 15.;
	r4 = r4 - r5;
	r3 = r1 * r4;
	r4 = 10.;
	r3 = r3 + r4;
	r2 = r2 * r3;
	return r2;
}

int openfl_display__internal_AbstractNoise_mixI(openfl__display___internal__AbstractNoise r0,int r1,int r2,double r3) {
	double r5, r6, r7;
	int r4;
	r5 = 1.;
	r5 = r5 - r3;
	r6 = (double)r1;
	r5 = r5 * r6;
	r7 = (double)r2;
	r6 = r3 * r7;
	r5 = r5 + r6;
	r4 = (int)r5;
	return r4;
}

double openfl_display__internal_AbstractNoise_mix(openfl__display___internal__AbstractNoise r0,double r1,double r2,double r3) {
	double r4, r5;
	r4 = 1.;
	r4 = r4 - r3;
	r4 = r4 * r1;
	r5 = r3 * r2;
	r4 = r4 + r5;
	return r4;
}

int openfl_display__internal_AbstractNoise_fastfloor(openfl__display___internal__AbstractNoise r0,double r1) {
	double r2, r3;
	int r4;
	r3 = 0.;
	if( !(r3 < r1) ) goto label$6b32b94_9_4;
	r4 = (int)r1;
	return r4;
	label$6b32b94_9_4:
	r3 = 1.;
	r2 = r1 - r3;
	r4 = (int)r2;
	return r4;
}

double openfl_display__internal_AbstractNoise_dot2d(openfl__display___internal__AbstractNoise r0,hl__types__ArrayBytes_Int r1,double r2,double r3) {
	double r4, r8;
	vbyte *r7;
	int r5, r6;
	if( r1 == NULL ) hl_null_access();
	r5 = 0;
	r6 = r1->length;
	if( ((unsigned)r5) < ((unsigned)r6) ) goto label$6b32b94_10_6;
	r5 = 0;
	goto label$6b32b94_10_10;
	label$6b32b94_10_6:
	r7 = r1->bytes;
	r6 = 2;
	r6 = r5 << r6;
	r5 = *(int*)(r7 + r6);
	label$6b32b94_10_10:
	r4 = (double)r5;
	r4 = r4 * r2;
	r5 = 1;
	r6 = r1->length;
	if( ((unsigned)r5) < ((unsigned)r6) ) goto label$6b32b94_10_17;
	r5 = 0;
	goto label$6b32b94_10_21;
	label$6b32b94_10_17:
	r7 = r1->bytes;
	r6 = 2;
	r6 = r5 << r6;
	r5 = *(int*)(r7 + r6);
	label$6b32b94_10_21:
	r8 = (double)r5;
	r8 = r8 * r3;
	r4 = r4 + r8;
	return r4;
}

double openfl_display__internal_AbstractNoise_dot(openfl__display___internal__AbstractNoise r0,hl__types__ArrayBytes_Int r1,double r2,double r3,double r4) {
	double r5, r9;
	vbyte *r8;
	int r6, r7;
	if( r1 == NULL ) hl_null_access();
	r6 = 0;
	r7 = r1->length;
	if( ((unsigned)r6) < ((unsigned)r7) ) goto label$6b32b94_11_6;
	r6 = 0;
	goto label$6b32b94_11_10;
	label$6b32b94_11_6:
	r8 = r1->bytes;
	r7 = 2;
	r7 = r6 << r7;
	r6 = *(int*)(r8 + r7);
	label$6b32b94_11_10:
	r5 = (double)r6;
	r5 = r5 * r2;
	r6 = 1;
	r7 = r1->length;
	if( ((unsigned)r6) < ((unsigned)r7) ) goto label$6b32b94_11_17;
	r6 = 0;
	goto label$6b32b94_11_21;
	label$6b32b94_11_17:
	r8 = r1->bytes;
	r7 = 2;
	r7 = r6 << r7;
	r6 = *(int*)(r8 + r7);
	label$6b32b94_11_21:
	r9 = (double)r6;
	r9 = r9 * r3;
	r5 = r5 + r9;
	r6 = 2;
	r7 = r1->length;
	if( ((unsigned)r6) < ((unsigned)r7) ) goto label$6b32b94_11_29;
	r6 = 0;
	goto label$6b32b94_11_33;
	label$6b32b94_11_29:
	r8 = r1->bytes;
	r7 = 2;
	r7 = r6 << r7;
	r6 = *(int*)(r8 + r7);
	label$6b32b94_11_33:
	r9 = (double)r6;
	r9 = r9 * r4;
	r5 = r5 + r9;
	return r5;
}

void openfl_display__internal_AbstractNoise_calculateOctaves(openfl__display___internal__AbstractNoise r0,double r1) {
	hl__types__ArrayBytes_Float r3;
	double r6, r10, r11, r12;
	int r5, r7, r8, r9;
	vbyte *r4;
	r5 = 0;
	r4 = hl_alloc_bytes(r5);
	r5 = 0;
	r5 = 0;
	r3 = hl_types_ArrayBase_allocF64(r4,r5);
	r0->octaves_frequencies = r3;
	r5 = 0;
	r4 = hl_alloc_bytes(r5);
	r5 = 0;
	r5 = 0;
	r3 = hl_types_ArrayBase_allocF64(r4,r5);
	r0->octaves_persistences = r3;
	r6 = 0.;
	r0->persistence_max = r6;
	r5 = 0;
	r7 = r0->octaves;
	label$6b32b94_12_16:
	if( r5 >= r7 ) goto label$6b32b94_12_37;
	r8 = r5;
	++r5;
	r10 = 2.;
	r11 = (double)r8;
	r10 = hl_math_pow(r10,r11);
	r6 = r10;
	r12 = (double)r8;
	r11 = hl_math_pow(r1,r12);
	r10 = r11;
	r11 = r0->persistence_max;
	r11 = r11 + r10;
	r0->persistence_max = r11;
	r3 = r0->octaves_frequencies;
	if( r3 == NULL ) hl_null_access();
	r9 = hl_types_ArrayBytes_Float_push(r3,r6);
	r3 = r0->octaves_persistences;
	if( r3 == NULL ) hl_null_access();
	r9 = hl_types_ArrayBytes_Float_push(r3,r10);
	goto label$6b32b94_12_16;
	label$6b32b94_12_37:
	r11 = 1.;
	r12 = r0->persistence_max;
	r11 = r11 / r12;
	r0->persistence_max = r11;
	return;
}

