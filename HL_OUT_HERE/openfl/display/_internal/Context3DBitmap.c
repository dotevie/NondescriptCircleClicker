// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <openfl/display/_internal/Context3DBitmap.h>
#include <openfl/display/BitmapData.h>
#include <openfl/display3D/Context3D.h>
#include <openfl/display/Shader.h>
#include <hl/types/ArrayBytes_Float.h>
#include <openfl/geom/Matrix.h>
#include <openfl/geom/ColorTransform.h>
#include <openfl/display3D/VertexBuffer3D.h>
#include <openfl/geom/Rectangle.h>
#include <openfl/display/DisplayObject.h>
#include <openfl/display/ShaderParameter_Float.h>
#include <openfl/display3D/IndexBuffer3D.h>
void openfl_display_OpenGLRenderer___setBlendMode(openfl__display__OpenGLRenderer,vdynamic*);
void openfl_display_OpenGLRenderer___pushMaskObject(openfl__display__OpenGLRenderer,openfl__display__DisplayObject,bool*);
openfl__display__Shader openfl_display_OpenGLRenderer___initDisplayShader(openfl__display__OpenGLRenderer,openfl__display__Shader);
void openfl_display_OpenGLRenderer_setShader(openfl__display__OpenGLRenderer,openfl__display__Shader);
void openfl_display_OpenGLRenderer_applyBitmapData(openfl__display__OpenGLRenderer,openfl__display__BitmapData,bool,bool*);
hl__types__ArrayBytes_Float openfl_display_OpenGLRenderer___getMatrix(openfl__display__OpenGLRenderer,openfl__geom__Matrix,vdynamic*);
void openfl_display_OpenGLRenderer_applyMatrix(openfl__display__OpenGLRenderer,hl__types__ArrayBytes_Float);
void openfl_display_OpenGLRenderer_applyAlpha(openfl__display__OpenGLRenderer,double);
void openfl_display_OpenGLRenderer_applyColorTransform(openfl__display__OpenGLRenderer,openfl__geom__ColorTransform);
void openfl_display_OpenGLRenderer_updateShader(openfl__display__OpenGLRenderer);
openfl__display3D__VertexBuffer3D openfl_display_BitmapData_getVertexBuffer(openfl__display__BitmapData,openfl__display3D__Context3D,openfl__geom__Rectangle,openfl__display__DisplayObject);
extern hl_type t$_i32;
extern hl_type t$_dyn;
void openfl_display3D_Context3D_setVertexBufferAt(openfl__display3D__Context3D,int,openfl__display3D__VertexBuffer3D,int*,vdynamic*);
openfl__display3D__IndexBuffer3D openfl_display_BitmapData_getIndexBuffer(openfl__display__BitmapData,openfl__display3D__Context3D,openfl__geom__Rectangle);
void openfl_display3D_Context3D_drawTriangles(openfl__display3D__Context3D,openfl__display3D__IndexBuffer3D,int*,int*);
void openfl_display_OpenGLRenderer___clearShader(openfl__display__OpenGLRenderer);
void openfl_display_OpenGLRenderer___popMaskObject(openfl__display__OpenGLRenderer,openfl__display__DisplayObject,bool*);
#include <lime/graphics/Image.h>
#include <openfl/display/Graphics.h>
#include <lime/utils/ObjectPool.h>
#include <openfl/display/DisplayObjectRenderer.h>
bool openfl_display_DisplayObjectRenderer___updateCacheBitmap(openfl__display__DisplayObjectRenderer,openfl__display__DisplayObject,bool);
double openfl_display_DisplayObject_get_width(openfl__display__DisplayObject);
double openfl_display_DisplayObject_get_height(openfl__display__DisplayObject);
extern openfl__geom__$Rectangle g$_openfl_geom_Rectangle;
vdynamic* lime_utils_ObjectPool_get(lime__utils__ObjectPool);
void openfl_geom_Rectangle_setTo(openfl__geom__Rectangle,double,double,double,double);
void openfl_display_OpenGLRenderer___pushMaskRect(openfl__display__OpenGLRenderer,openfl__geom__Rectangle,openfl__geom__Matrix);
void openfl_display3D_Context3D_clear(openfl__display3D__Context3D,double*,double*,double*,double*,double*,int*,int*);
void openfl_display_OpenGLRenderer___popMaskRect(openfl__display__OpenGLRenderer);
void lime_utils_ObjectPool_release(lime__utils__ObjectPool,vdynamic*);
void openfl_display__internal_Context3DShape_render(openfl__display__DisplayObject,openfl__display__OpenGLRenderer);
void openfl_display_DisplayObjectRenderer___renderEvent(openfl__display__DisplayObjectRenderer,openfl__display__DisplayObject);
void openfl_display__internal_Context3DBitmap_renderMask(openfl__display__Bitmap,openfl__display__OpenGLRenderer);
#include <openfl/display/_internal/Context3DMaskShader.h>
extern openfl__display___internal__$Context3DMaskShader g$1af83db;

void openfl_display__internal_Context3DBitmap_render(openfl__display__Bitmap r0,openfl__display__OpenGLRenderer r1) {
	bool *r10;
	openfl__display3D__Context3D r8;
	openfl__geom__Rectangle r16;
	openfl__display__DisplayObject r17;
	bool r3;
	openfl__display3D__VertexBuffer3D r15;
	openfl__display__ShaderParameter_Float r18;
	openfl__geom__ColorTransform r14;
	openfl__geom__Matrix r13;
	openfl__display__Shader r11;
	hl__types__ArrayBytes_Float r12;
	openfl__display3D__IndexBuffer3D r24;
	double r4, r5;
	int *r21, *r25;
	vdynamic *r6, *r9;
	int r19, r20, r22, r23;
	openfl__display__BitmapData r7;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->__renderable;
	if( !r3 ) goto label$7ddce76_1_6;
	r4 = r0->__worldAlpha;
	r5 = 0.;
	if( !(r5 >= r4) ) goto label$7ddce76_1_7;
	label$7ddce76_1_6:
	return;
	label$7ddce76_1_7:
	r7 = r0->__bitmapData;
	if( !r7 ) goto label$7ddce76_1_84;
	r7 = r0->__bitmapData;
	if( r7 == NULL ) hl_null_access();
	r3 = r7->__isValid;
	if( !r3 ) goto label$7ddce76_1_84;
	if( r1 == NULL ) hl_null_access();
	r8 = r1->__context3D;
	r9 = r0->__worldBlendMode;
	openfl_display_OpenGLRenderer___setBlendMode(r1,r9);
	r10 = NULL;
	openfl_display_OpenGLRenderer___pushMaskObject(r1,((openfl__display__DisplayObject)r0),r10);
	r11 = r0->__worldShader;
	r11 = openfl_display_OpenGLRenderer___initDisplayShader(r1,r11);
	openfl_display_OpenGLRenderer_setShader(r1,r11);
	r7 = r0->__bitmapData;
	r3 = r1->__allowSmoothing;
	if( !r3 ) goto label$7ddce76_1_31;
	r3 = r0->smoothing;
	if( r3 ) goto label$7ddce76_1_29;
	r3 = r1->__upscaled;
	if( !r3 ) goto label$7ddce76_1_31;
	label$7ddce76_1_29:
	r3 = true;
	goto label$7ddce76_1_32;
	label$7ddce76_1_31:
	r3 = false;
	label$7ddce76_1_32:
	r10 = NULL;
	openfl_display_OpenGLRenderer_applyBitmapData(r1,r7,r3,r10);
	r13 = r0->__renderTransform;
	r9 = r0->pixelSnapping;
	r12 = openfl_display_OpenGLRenderer___getMatrix(r1,r13,r9);
	openfl_display_OpenGLRenderer_applyMatrix(r1,r12);
	r4 = r0->__worldAlpha;
	openfl_display_OpenGLRenderer_applyAlpha(r1,r4);
	r14 = r0->__worldColorTransform;
	openfl_display_OpenGLRenderer_applyColorTransform(r1,r14);
	openfl_display_OpenGLRenderer_updateShader(r1);
	r7 = r0->__bitmapData;
	if( r7 == NULL ) hl_null_access();
	r16 = NULL;
	r17 = NULL;
	r15 = openfl_display_BitmapData_getVertexBuffer(r7,r8,r16,r17);
	if( r11 == NULL ) hl_null_access();
	r18 = r11->__position;
	if( !r18 ) goto label$7ddce76_1_61;
	if( r8 == NULL ) hl_null_access();
	r18 = r11->__position;
	if( r18 == NULL ) hl_null_access();
	r6 = r18->index;
	r19 = (int)hl_dyn_casti(&r6,&t$_dyn,&t$_i32);
	r20 = 0;
	r21 = &r20;
	r22 = 3;
	r9 = hl_alloc_dynamic(&t$_i32);
	r9->v.i = r22;
	openfl_display3D_Context3D_setVertexBufferAt(r8,r19,r15,r21,r9);
	label$7ddce76_1_61:
	r18 = r11->__textureCoord;
	if( !r18 ) goto label$7ddce76_1_73;
	if( r8 == NULL ) hl_null_access();
	r18 = r11->__textureCoord;
	if( r18 == NULL ) hl_null_access();
	r6 = r18->index;
	r19 = (int)hl_dyn_casti(&r6,&t$_dyn,&t$_i32);
	r22 = 3;
	r21 = &r22;
	r23 = 2;
	r9 = hl_alloc_dynamic(&t$_i32);
	r9->v.i = r23;
	openfl_display3D_Context3D_setVertexBufferAt(r8,r19,r15,r21,r9);
	label$7ddce76_1_73:
	r7 = r0->__bitmapData;
	if( r7 == NULL ) hl_null_access();
	r16 = NULL;
	r24 = openfl_display_BitmapData_getIndexBuffer(r7,r8,r16);
	if( r8 == NULL ) hl_null_access();
	r21 = NULL;
	r25 = NULL;
	openfl_display3D_Context3D_drawTriangles(r8,r24,r21,r25);
	openfl_display_OpenGLRenderer___clearShader(r1);
	r10 = NULL;
	openfl_display_OpenGLRenderer___popMaskObject(r1,((openfl__display__DisplayObject)r0),r10);
	label$7ddce76_1_84:
	return;
}

void openfl_display__internal_Context3DBitmap_renderDrawable(openfl__display__Bitmap r0,openfl__display__OpenGLRenderer r1) {
	bool *r12;
	lime__graphics__Image r6;
	openfl__display3D__Context3D r13;
	openfl__geom__Rectangle r17;
	openfl__geom__$Rectangle r16;
	bool r2;
	openfl__geom__Matrix r20;
	openfl__display__Graphics r9;
	openfl__display__Bitmap r3;
	lime__utils__ObjectPool r15;
	double r10, r11, r18, r19, r27;
	int *r29, *r30;
	double *r23, *r24, *r25, *r26, *r28;
	vdynamic *r8, *r14;
	int r7, r21, r22;
	openfl__display__BitmapData r5;
	if( r1 == NULL ) hl_null_access();
	r2 = false;
	r2 = openfl_display_DisplayObjectRenderer___updateCacheBitmap(((openfl__display__DisplayObjectRenderer)r1),((openfl__display__DisplayObject)r0),r2);
	if( r0 == NULL ) hl_null_access();
	r5 = r0->__bitmapData;
	if( !r5 ) goto label$7ddce76_2_16;
	r5 = r0->__bitmapData;
	if( r5 == NULL ) hl_null_access();
	r6 = r5->image;
	if( !r6 ) goto label$7ddce76_2_16;
	r5 = r0->__bitmapData;
	if( r5 == NULL ) hl_null_access();
	r6 = r5->image;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->version;
	r0->__imageVersion = r7;
	label$7ddce76_2_16:
	r3 = r0->__cacheBitmap;
	if( !r3 ) goto label$7ddce76_2_23;
	r2 = r0->__isCacheBitmapRender;
	if( r2 ) goto label$7ddce76_2_23;
	r3 = r0->__cacheBitmap;
	openfl_display__internal_Context3DBitmap_render(r3,r1);
	goto label$7ddce76_2_107;
	label$7ddce76_2_23:
	r8 = r0->opaqueBackground;
	if( r8 ) goto label$7ddce76_2_27;
	r9 = r0->__graphics;
	if( !r9 ) goto label$7ddce76_2_106;
	label$7ddce76_2_27:
	r2 = r0->__renderable;
	if( !r2 ) goto label$7ddce76_2_106;
	r10 = r0->__worldAlpha;
	r11 = 0.;
	if( r11 >= r10 ) goto label$7ddce76_2_106;
	r8 = r0->opaqueBackground;
	if( !r8 ) goto label$7ddce76_2_103;
	r2 = r0->__isCacheBitmapRender;
	if( r2 ) goto label$7ddce76_2_103;
	r10 = openfl_display_DisplayObject_get_width(((openfl__display__DisplayObject)r0));
	r11 = 0.;
	if( !(r11 < r10) ) goto label$7ddce76_2_103;
	r10 = openfl_display_DisplayObject_get_height(((openfl__display__DisplayObject)r0));
	r11 = 0.;
	if( !(r11 < r10) ) goto label$7ddce76_2_103;
	r8 = r0->__worldBlendMode;
	openfl_display_OpenGLRenderer___setBlendMode(r1,r8);
	r12 = NULL;
	openfl_display_OpenGLRenderer___pushMaskObject(r1,((openfl__display__DisplayObject)r0),r12);
	r13 = r1->__context3D;
	r16 = (openfl__geom__$Rectangle)g$_openfl_geom_Rectangle;
	r15 = r16->__pool;
	if( r15 == NULL ) hl_null_access();
	r14 = lime_utils_ObjectPool_get(r15);
	r17 = (openfl__geom__Rectangle)r14;
	if( r17 == NULL ) hl_null_access();
	r10 = 0.;
	r11 = 0.;
	r18 = openfl_display_DisplayObject_get_width(((openfl__display__DisplayObject)r0));
	r19 = openfl_display_DisplayObject_get_height(((openfl__display__DisplayObject)r0));
	openfl_geom_Rectangle_setTo(r17,r10,r11,r18,r19);
	r20 = r0->__renderTransform;
	openfl_display_OpenGLRenderer___pushMaskRect(r1,r17,r20);
	r8 = r0->opaqueBackground;
	r7 = r8 ? r8->v.i : 0;
	if( r13 == NULL ) hl_null_access();
	r22 = 16;
	r21 = ((unsigned)r7) >> r22;
	r22 = 255;
	r21 = r21 & r22;
	r10 = (double)r21;
	r11 = 255.;
	r10 = r10 / r11;
	r23 = &r10;
	r22 = 8;
	r21 = ((unsigned)r7) >> r22;
	r22 = 255;
	r21 = r21 & r22;
	r11 = (double)r21;
	r18 = 255.;
	r11 = r11 / r18;
	r24 = &r11;
	r22 = 255;
	r21 = r7 & r22;
	r18 = (double)r21;
	r19 = 255.;
	r18 = r18 / r19;
	r25 = &r18;
	r21 = 1;
	r19 = (double)r21;
	r26 = &r19;
	r21 = 0;
	r27 = (double)r21;
	r28 = &r27;
	r21 = 0;
	r29 = &r21;
	r22 = 1;
	r30 = &r22;
	openfl_display3D_Context3D_clear(r13,r23,r24,r25,r26,r28,r29,r30);
	openfl_display_OpenGLRenderer___popMaskRect(r1);
	r12 = NULL;
	openfl_display_OpenGLRenderer___popMaskObject(r1,((openfl__display__DisplayObject)r0),r12);
	r16 = (openfl__geom__$Rectangle)g$_openfl_geom_Rectangle;
	r15 = r16->__pool;
	if( r15 == NULL ) hl_null_access();
	lime_utils_ObjectPool_release(r15,((vdynamic*)r17));
	label$7ddce76_2_103:
	r9 = r0->__graphics;
	if( !r9 ) goto label$7ddce76_2_106;
	openfl_display__internal_Context3DShape_render(((openfl__display__DisplayObject)r0),r1);
	label$7ddce76_2_106:
	openfl_display__internal_Context3DBitmap_render(r0,r1);
	label$7ddce76_2_107:
	openfl_display_DisplayObjectRenderer___renderEvent(((openfl__display__DisplayObjectRenderer)r1),((openfl__display__DisplayObject)r0));
	return;
}

void openfl_display__internal_Context3DBitmap_renderDrawableMask(openfl__display__Bitmap r0,openfl__display__OpenGLRenderer r1) {
	openfl_display__internal_Context3DBitmap_renderMask(r0,r1);
	return;
}

void openfl_display__internal_Context3DBitmap_renderMask(openfl__display__Bitmap r0,openfl__display__OpenGLRenderer r1) {
	bool *r8;
	openfl__display3D__Context3D r5;
	openfl__geom__Rectangle r13;
	openfl__display___internal__$Context3DMaskShader r7;
	openfl__display__DisplayObject r14;
	bool r4;
	openfl__display3D__VertexBuffer3D r12;
	openfl__display__ShaderParameter_Float r15;
	openfl__geom__Matrix r10;
	openfl__display___internal__Context3DMaskShader r6;
	hl__types__ArrayBytes_Float r9;
	openfl__display3D__IndexBuffer3D r22;
	int *r19, *r23;
	vdynamic *r11, *r16;
	int r17, r18, r20, r21;
	openfl__display__BitmapData r3;
	if( r0 == NULL ) hl_null_access();
	r3 = r0->__bitmapData;
	if( !r3 ) goto label$7ddce76_4_60;
	r3 = r0->__bitmapData;
	if( r3 == NULL ) hl_null_access();
	r4 = r3->__isValid;
	if( !r4 ) goto label$7ddce76_4_60;
	if( r1 == NULL ) hl_null_access();
	r5 = r1->__context3D;
	r6 = r1->__maskShader;
	openfl_display_OpenGLRenderer_setShader(r1,((openfl__display__Shader)r6));
	r7 = (openfl__display___internal__$Context3DMaskShader)g$1af83db;
	r3 = r7->opaqueBitmapData;
	r4 = true;
	r8 = NULL;
	openfl_display_OpenGLRenderer_applyBitmapData(r1,r3,r4,r8);
	r10 = r0->__renderTransform;
	r11 = r0->pixelSnapping;
	r9 = openfl_display_OpenGLRenderer___getMatrix(r1,r10,r11);
	openfl_display_OpenGLRenderer_applyMatrix(r1,r9);
	openfl_display_OpenGLRenderer_updateShader(r1);
	r3 = r0->__bitmapData;
	if( r3 == NULL ) hl_null_access();
	r13 = NULL;
	r14 = NULL;
	r12 = openfl_display_BitmapData_getVertexBuffer(r3,r5,r13,r14);
	if( r6 == NULL ) hl_null_access();
	r15 = r6->__position;
	if( !r15 ) goto label$7ddce76_4_39;
	if( r5 == NULL ) hl_null_access();
	r15 = r6->__position;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->index;
	r17 = (int)hl_dyn_casti(&r16,&t$_dyn,&t$_i32);
	r18 = 0;
	r19 = &r18;
	r20 = 3;
	r11 = hl_alloc_dynamic(&t$_i32);
	r11->v.i = r20;
	openfl_display3D_Context3D_setVertexBufferAt(r5,r17,r12,r19,r11);
	label$7ddce76_4_39:
	r15 = r6->__textureCoord;
	if( !r15 ) goto label$7ddce76_4_51;
	if( r5 == NULL ) hl_null_access();
	r15 = r6->__textureCoord;
	if( r15 == NULL ) hl_null_access();
	r16 = r15->index;
	r17 = (int)hl_dyn_casti(&r16,&t$_dyn,&t$_i32);
	r20 = 3;
	r19 = &r20;
	r21 = 2;
	r11 = hl_alloc_dynamic(&t$_i32);
	r11->v.i = r21;
	openfl_display3D_Context3D_setVertexBufferAt(r5,r17,r12,r19,r11);
	label$7ddce76_4_51:
	r3 = r0->__bitmapData;
	if( r3 == NULL ) hl_null_access();
	r13 = NULL;
	r22 = openfl_display_BitmapData_getIndexBuffer(r3,r5,r13);
	if( r5 == NULL ) hl_null_access();
	r19 = NULL;
	r23 = NULL;
	openfl_display3D_Context3D_drawTriangles(r5,r22,r19,r23);
	openfl_display_OpenGLRenderer___clearShader(r1);
	label$7ddce76_4_60:
	return;
}

