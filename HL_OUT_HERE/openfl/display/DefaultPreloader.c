// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <openfl/display/DefaultPreloader.h>
void openfl_display_Sprite_new(openfl__display__Sprite);
int openfl_display_DefaultPreloader_getBackgroundColor(openfl__display__DefaultPreloader);
double openfl_display_DefaultPreloader_getHeight(openfl__display__DefaultPreloader);
double openfl_display_DefaultPreloader_getWidth(openfl__display__DefaultPreloader);
extern hl_type t$openfl_display_Shape;
void openfl_display_Shape_new(openfl__display__Shape);
openfl__display__Graphics openfl_display_Shape_get_graphics(openfl__display__Shape);
void openfl_display_Graphics_beginFill(openfl__display__Graphics,int*,double*);
void openfl_display_Graphics_drawRect(openfl__display__Graphics,double,double,double,double);
double openfl_display_DisplayObject_set_x(openfl__display__DisplayObject,double);
double openfl_display_DisplayObject_set_y(openfl__display__DisplayObject,double);
double openfl_display_DisplayObject_set_alpha(openfl__display__DisplayObject,double);
openfl__display__DisplayObject openfl_display_DisplayObjectContainer_addChild(openfl__display__DisplayObjectContainer,openfl__display__DisplayObject);
double openfl_display_DisplayObject_set_scaleX(openfl__display__DisplayObject,double);
int openfl_Lib_getTimer(void);
extern String s$addedToStage;
void openfl_display_DefaultPreloader_this_onAddedToStage(openfl__display__DefaultPreloader,openfl__events__Event);
extern hl_type t$fun_5372b08;
void wrapt$fun_c6e0b11(vclosure*,vdynamic*);
extern hl_type t$fun_c6e0b11;
void openfl_display_DisplayObject_addEventListener(openfl__display__DisplayObject,String,vclosure*,bool*,int*,bool*);
#include <lime/graphics/RenderContext.h>
#include <lime/ui/Window.h>
#include <openfl/display/MovieClip.h>
openfl__display__MovieClip openfl_Lib_get_current(void);
extern String s$background;
bool Reflect_hasField(vdynamic*,String);
extern hl_type t$nul_i32;
extern String s$enterFrame;
void openfl_display_DefaultPreloader_this_onEnterFrame(openfl__display__DefaultPreloader,openfl__events__Event);
void openfl_display_DisplayObject_removeEventListener(openfl__display__DisplayObject,String,vclosure*,bool*);
extern hl_type t$openfl_events_Event;
extern String s$unload;
void openfl_events_Event_new(openfl__events__Event,String,bool*,bool*);
bool openfl_display_DisplayObject_dispatchEvent(openfl__display__DisplayObject,openfl__events__Event);
#include <openfl/events/ProgressEvent.h>
openfl__display__LoaderInfo openfl_display_DisplayObject_get_loaderInfo(openfl__display__DisplayObject);
extern String s$progress;
void openfl_display_DefaultPreloader_this_onProgress(openfl__display__DefaultPreloader,openfl__events__ProgressEvent);
extern hl_type t$fun_b157494;
void wrapt$fun_179010d(vclosure*,vdynamic*);
extern hl_type t$fun_179010d;
extern String s$complete;
void openfl_display_DefaultPreloader_this_onComplete(openfl__display__DefaultPreloader,openfl__events__Event);
void openfl_events_Event_preventDefault(openfl__events__Event);

void openfl_display_DefaultPreloader_new(openfl__display__DefaultPreloader r0) {
	bool *r32, *r33;
	String r29;
	openfl__display__DisplayObject r24;
	openfl__display__Graphics r16;
	vclosure *r30, *r31;
	double r7, r8, r9, r13, r19, r20, r21, r23, r27;
	double *r18;
	int *r17;
	openfl__display__Shape r15;
	int r2, r3, r4, r5, r6, r10, r11, r12, r14, r22, r25, r26, r28;
	openfl_display_Sprite_new(((openfl__display__Sprite)r0));
	r2 = openfl_display_DefaultPreloader_getBackgroundColor(r0);
	r4 = 16;
	r3 = r2 >> r4;
	r4 = 255;
	r3 = r3 & r4;
	r5 = 8;
	r4 = r2 >> r5;
	r5 = 255;
	r4 = r4 & r5;
	r6 = 255;
	r5 = r2 & r6;
	r7 = 0.29899999999999999;
	r8 = (double)r3;
	r7 = r7 * r8;
	r8 = 0.58699999999999997;
	r9 = (double)r4;
	r8 = r8 * r9;
	r7 = r7 + r8;
	r8 = 0.114;
	r9 = (double)r5;
	r8 = r8 * r9;
	r7 = r7 + r8;
	r6 = 0;
	r9 = 70.;
	if( !(r7 < r9) ) goto label$0f9dd07_1_28;
	r10 = 16777215;
	r6 = r10;
	label$0f9dd07_1_28:
	r10 = 30;
	r11 = 7;
	r8 = openfl_display_DefaultPreloader_getHeight(r0);
	r9 = 2.;
	r8 = r8 / r9;
	r9 = (double)r11;
	r13 = 2.;
	r9 = r9 / r13;
	r8 = r8 - r9;
	r9 = openfl_display_DefaultPreloader_getWidth(r0);
	r14 = 2;
	r12 = r10 * r14;
	r13 = (double)r12;
	r9 = r9 - r13;
	r12 = 2;
	r15 = (openfl__display__Shape)hl_alloc_obj(&t$openfl_display_Shape);
	openfl_display_Shape_new(r15);
	r0->outline = r15;
	r15 = r0->outline;
	if( r15 == NULL ) hl_null_access();
	r16 = openfl_display_Shape_get_graphics(r15);
	if( r16 == NULL ) hl_null_access();
	r14 = r6;
	r17 = &r14;
	r13 = 0.070000000000000007;
	r18 = &r13;
	openfl_display_Graphics_beginFill(r16,r17,r18);
	r15 = r0->outline;
	if( r15 == NULL ) hl_null_access();
	r16 = openfl_display_Shape_get_graphics(r15);
	if( r16 == NULL ) hl_null_access();
	r19 = 0.;
	r20 = 0.;
	r23 = (double)r11;
	openfl_display_Graphics_drawRect(r16,r19,r20,r9,r23);
	r15 = r0->outline;
	if( r15 == NULL ) hl_null_access();
	r19 = (double)r10;
	r19 = openfl_display_DisplayObject_set_x(((openfl__display__DisplayObject)r15),r19);
	r15 = r0->outline;
	if( r15 == NULL ) hl_null_access();
	r19 = openfl_display_DisplayObject_set_y(((openfl__display__DisplayObject)r15),r8);
	r15 = r0->outline;
	if( r15 == NULL ) hl_null_access();
	r19 = 0.;
	r19 = openfl_display_DisplayObject_set_alpha(((openfl__display__DisplayObject)r15),r19);
	r15 = r0->outline;
	r24 = openfl_display_DisplayObjectContainer_addChild(((openfl__display__DisplayObjectContainer)r0),((openfl__display__DisplayObject)r15));
	r15 = (openfl__display__Shape)hl_alloc_obj(&t$openfl_display_Shape);
	openfl_display_Shape_new(r15);
	r0->progress = r15;
	r15 = r0->progress;
	if( r15 == NULL ) hl_null_access();
	r16 = openfl_display_Shape_get_graphics(r15);
	if( r16 == NULL ) hl_null_access();
	r22 = r6;
	r17 = &r22;
	r19 = 0.34999999999999998;
	r18 = &r19;
	openfl_display_Graphics_beginFill(r16,r17,r18);
	r15 = r0->progress;
	if( r15 == NULL ) hl_null_access();
	r16 = openfl_display_Shape_get_graphics(r15);
	if( r16 == NULL ) hl_null_access();
	r20 = 0.;
	r21 = 0.;
	r26 = 2;
	r25 = r12 * r26;
	r27 = (double)r25;
	r23 = r9 - r27;
	r28 = 2;
	r26 = r12 * r28;
	r25 = r11 - r26;
	r27 = (double)r25;
	openfl_display_Graphics_drawRect(r16,r20,r21,r23,r27);
	r15 = r0->progress;
	if( r15 == NULL ) hl_null_access();
	r25 = r10 + r12;
	r20 = (double)r25;
	r20 = openfl_display_DisplayObject_set_x(((openfl__display__DisplayObject)r15),r20);
	r15 = r0->progress;
	if( r15 == NULL ) hl_null_access();
	r21 = (double)r12;
	r20 = r8 + r21;
	r20 = openfl_display_DisplayObject_set_y(((openfl__display__DisplayObject)r15),r20);
	r15 = r0->progress;
	if( r15 == NULL ) hl_null_access();
	r20 = 0.;
	r20 = openfl_display_DisplayObject_set_scaleX(((openfl__display__DisplayObject)r15),r20);
	r15 = r0->progress;
	if( r15 == NULL ) hl_null_access();
	r20 = 0.;
	r20 = openfl_display_DisplayObject_set_alpha(((openfl__display__DisplayObject)r15),r20);
	r15 = r0->progress;
	r24 = openfl_display_DisplayObjectContainer_addChild(((openfl__display__DisplayObjectContainer)r0),((openfl__display__DisplayObject)r15));
	r25 = openfl_Lib_getTimer();
	r26 = 100;
	r25 = r25 + r26;
	r0->startAnimation = r25;
	r25 = r0->startAnimation;
	r26 = 1000;
	r25 = r25 + r26;
	r0->endAnimation = r25;
	r29 = (String)s$addedToStage;
	r30 = hl_alloc_closure_ptr(&t$fun_5372b08,openfl_display_DefaultPreloader_this_onAddedToStage,r0);
	if( r30 ) goto label$0f9dd07_1_136;
	r31 = NULL;
	goto label$0f9dd07_1_137;
	label$0f9dd07_1_136:
	r31 = hl_alloc_closure_ptr(&t$fun_c6e0b11,wrapt$fun_c6e0b11,r30);
	label$0f9dd07_1_137:
	r32 = NULL;
	r17 = NULL;
	r33 = NULL;
	openfl_display_DisplayObject_addEventListener(((openfl__display__DisplayObject)r0),r29,r31,r32,r17,r33);
	return;
}

int openfl_display_DefaultPreloader_getBackgroundColor(openfl__display__DefaultPreloader r0) {
	String r7;
	vvirtual *r1;
	bool r6;
	lime__ui__Window r3;
	openfl__display__MovieClip r5;
	openfl__display__Stage r4;
	lime__graphics__RenderContext r2;
	vdynamic *r8;
	int r9;
	r5 = openfl_Lib_get_current();
	if( r5 == NULL ) hl_null_access();
	r4 = r5->stage;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->window;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->context;
	if( r2 == NULL ) hl_null_access();
	r1 = r2->attributes;
	r7 = (String)s$background;
	r6 = Reflect_hasField(((vdynamic*)r1),r7);
	if( !r6 ) goto label$0f9dd07_2_18;
	if( r1 == NULL ) hl_null_access();
	r8 = hl_vfields(r1)[1] ? (*(vdynamic**)(hl_vfields(r1)[1])) : (vdynamic*)hl_dyn_getp(r1->value,102601843/*background*/,&t$nul_i32);
	if( !r8 ) goto label$0f9dd07_2_18;
	r8 = hl_vfields(r1)[1] ? (*(vdynamic**)(hl_vfields(r1)[1])) : (vdynamic*)hl_dyn_getp(r1->value,102601843/*background*/,&t$nul_i32);
	r9 = r8 ? r8->v.i : 0;
	return r9;
	label$0f9dd07_2_18:
	r9 = 0;
	return r9;
}

double openfl_display_DefaultPreloader_getHeight(openfl__display__DefaultPreloader r0) {
	lime__ui__Window r2;
	openfl__display__MovieClip r4;
	openfl__display__Stage r3;
	double r7;
	int r1, r5, r6;
	r4 = openfl_Lib_get_current();
	if( r4 == NULL ) hl_null_access();
	r3 = r4->stage;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->window;
	if( r2 == NULL ) hl_null_access();
	r1 = r2->__height;
	r6 = 0;
	if( r6 >= r1 ) goto label$0f9dd07_3_11;
	r7 = (double)r1;
	return r7;
	label$0f9dd07_3_11:
	r4 = openfl_Lib_get_current();
	if( r4 == NULL ) hl_null_access();
	r3 = r4->stage;
	if( r3 == NULL ) hl_null_access();
	r5 = r3->stageHeight;
	r7 = (double)r5;
	return r7;
}

double openfl_display_DefaultPreloader_getWidth(openfl__display__DefaultPreloader r0) {
	lime__ui__Window r2;
	openfl__display__MovieClip r4;
	openfl__display__Stage r3;
	double r7;
	int r1, r5, r6;
	r4 = openfl_Lib_get_current();
	if( r4 == NULL ) hl_null_access();
	r3 = r4->stage;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->window;
	if( r2 == NULL ) hl_null_access();
	r1 = r2->__width;
	r6 = 0;
	if( r6 >= r1 ) goto label$0f9dd07_4_11;
	r7 = (double)r1;
	return r7;
	label$0f9dd07_4_11:
	r4 = openfl_Lib_get_current();
	if( r4 == NULL ) hl_null_access();
	r3 = r4->stage;
	if( r3 == NULL ) hl_null_access();
	r5 = r3->stageWidth;
	r7 = (double)r5;
	return r7;
}

void openfl_display_DefaultPreloader_onInit(openfl__display__DefaultPreloader r0) {
	bool *r5, *r7;
	String r2;
	vclosure *r3, *r4;
	int *r6;
	r2 = (String)s$enterFrame;
	r3 = hl_alloc_closure_ptr(&t$fun_5372b08,openfl_display_DefaultPreloader_this_onEnterFrame,r0);
	if( r3 ) goto label$0f9dd07_5_5;
	r4 = NULL;
	goto label$0f9dd07_5_6;
	label$0f9dd07_5_5:
	r4 = hl_alloc_closure_ptr(&t$fun_c6e0b11,wrapt$fun_c6e0b11,r3);
	label$0f9dd07_5_6:
	r5 = NULL;
	r6 = NULL;
	r7 = NULL;
	openfl_display_DisplayObject_addEventListener(((openfl__display__DisplayObject)r0),r2,r4,r5,r6,r7);
	return;
}

void openfl_display_DefaultPreloader_onLoaded(openfl__display__DefaultPreloader r0) {
	bool *r5, *r8;
	String r2;
	bool r6;
	openfl__events__Event r7;
	vclosure *r3, *r4;
	r2 = (String)s$enterFrame;
	r3 = hl_alloc_closure_ptr(&t$fun_5372b08,openfl_display_DefaultPreloader_this_onEnterFrame,r0);
	if( r3 ) goto label$0f9dd07_6_5;
	r4 = NULL;
	goto label$0f9dd07_6_6;
	label$0f9dd07_6_5:
	r4 = hl_alloc_closure_ptr(&t$fun_c6e0b11,wrapt$fun_c6e0b11,r3);
	label$0f9dd07_6_6:
	r5 = NULL;
	openfl_display_DisplayObject_removeEventListener(((openfl__display__DisplayObject)r0),r2,r4,r5);
	r7 = (openfl__events__Event)hl_alloc_obj(&t$openfl_events_Event);
	r2 = (String)s$unload;
	r5 = NULL;
	r8 = NULL;
	openfl_events_Event_new(r7,r2,r5,r8);
	r6 = openfl_display_DisplayObject_dispatchEvent(((openfl__display__DisplayObject)r0),r7);
	return;
}

void openfl_display_DefaultPreloader_onUpdate(openfl__display__DefaultPreloader r0,int r1,int r2) {
	double r3, r6, r7;
	openfl__display__Shape r8;
	int r5;
	r3 = 0.;
	r5 = 0;
	if( r5 >= r2 ) goto label$0f9dd07_7_11;
	r6 = (double)r1;
	r7 = (double)r2;
	r6 = r6 / r7;
	r3 = r6;
	r7 = 1.;
	if( !(r7 < r6) ) goto label$0f9dd07_7_11;
	r6 = 1.;
	r3 = r6;
	label$0f9dd07_7_11:
	r8 = r0->progress;
	if( r8 == NULL ) hl_null_access();
	r6 = openfl_display_DisplayObject_set_scaleX(((openfl__display__DisplayObject)r8),r3);
	return;
}

void openfl_display_DefaultPreloader_this_onAddedToStage(openfl__display__DefaultPreloader r0,openfl__events__Event r1) {
	bool *r6, *r12;
	String r3;
	openfl__display__LoaderInfo r8;
	vclosure *r4, *r5, *r10;
	int *r11;
	int r7, r9;
	r3 = (String)s$addedToStage;
	r4 = hl_alloc_closure_ptr(&t$fun_5372b08,openfl_display_DefaultPreloader_this_onAddedToStage,r0);
	if( r4 ) goto label$0f9dd07_8_5;
	r5 = NULL;
	goto label$0f9dd07_8_6;
	label$0f9dd07_8_5:
	r5 = hl_alloc_closure_ptr(&t$fun_c6e0b11,wrapt$fun_c6e0b11,r4);
	label$0f9dd07_8_6:
	r6 = NULL;
	openfl_display_DisplayObject_removeEventListener(((openfl__display__DisplayObject)r0),r3,r5,r6);
	openfl_display_DefaultPreloader_onInit(r0);
	r8 = openfl_display_DisplayObject_get_loaderInfo(((openfl__display__DisplayObject)r0));
	if( r8 == NULL ) hl_null_access();
	r7 = r8->bytesLoaded;
	r8 = openfl_display_DisplayObject_get_loaderInfo(((openfl__display__DisplayObject)r0));
	if( r8 == NULL ) hl_null_access();
	r9 = r8->bytesTotal;
	openfl_display_DefaultPreloader_onUpdate(r0,r7,r9);
	r3 = (String)s$progress;
	r10 = hl_alloc_closure_ptr(&t$fun_b157494,openfl_display_DefaultPreloader_this_onProgress,r0);
	if( r10 ) goto label$0f9dd07_8_21;
	r5 = NULL;
	goto label$0f9dd07_8_22;
	label$0f9dd07_8_21:
	r5 = hl_alloc_closure_ptr(&t$fun_179010d,wrapt$fun_179010d,r10);
	label$0f9dd07_8_22:
	r6 = NULL;
	r11 = NULL;
	r12 = NULL;
	openfl_display_DisplayObject_addEventListener(((openfl__display__DisplayObject)r0),r3,r5,r6,r11,r12);
	r3 = (String)s$complete;
	r4 = hl_alloc_closure_ptr(&t$fun_5372b08,openfl_display_DefaultPreloader_this_onComplete,r0);
	if( r4 ) goto label$0f9dd07_8_31;
	r5 = NULL;
	goto label$0f9dd07_8_32;
	label$0f9dd07_8_31:
	r5 = hl_alloc_closure_ptr(&t$fun_c6e0b11,wrapt$fun_c6e0b11,r4);
	label$0f9dd07_8_32:
	r6 = NULL;
	r11 = NULL;
	r12 = NULL;
	openfl_display_DisplayObject_addEventListener(((openfl__display__DisplayObject)r0),r3,r5,r6,r11,r12);
	return;
}

void openfl_display_DefaultPreloader_this_onComplete(openfl__display__DefaultPreloader r0,openfl__events__Event r1) {
	bool *r6;
	String r3;
	vclosure *r4, *r5, *r7;
	if( r1 == NULL ) hl_null_access();
	openfl_events_Event_preventDefault(r1);
	r3 = (String)s$progress;
	r4 = hl_alloc_closure_ptr(&t$fun_b157494,openfl_display_DefaultPreloader_this_onProgress,r0);
	if( r4 ) goto label$0f9dd07_9_7;
	r5 = NULL;
	goto label$0f9dd07_9_8;
	label$0f9dd07_9_7:
	r5 = hl_alloc_closure_ptr(&t$fun_179010d,wrapt$fun_179010d,r4);
	label$0f9dd07_9_8:
	r6 = NULL;
	openfl_display_DisplayObject_removeEventListener(((openfl__display__DisplayObject)r0),r3,r5,r6);
	r3 = (String)s$complete;
	r7 = hl_alloc_closure_ptr(&t$fun_5372b08,openfl_display_DefaultPreloader_this_onComplete,r0);
	if( r7 ) goto label$0f9dd07_9_15;
	r5 = NULL;
	goto label$0f9dd07_9_16;
	label$0f9dd07_9_15:
	r5 = hl_alloc_closure_ptr(&t$fun_c6e0b11,wrapt$fun_c6e0b11,r7);
	label$0f9dd07_9_16:
	r6 = NULL;
	openfl_display_DisplayObject_removeEventListener(((openfl__display__DisplayObject)r0),r3,r5,r6);
	openfl_display_DefaultPreloader_onLoaded(r0);
	return;
}

void openfl_display_DefaultPreloader_this_onEnterFrame(openfl__display__DefaultPreloader r0,openfl__events__Event r1) {
	double r6, r7, r8;
	openfl__display__Shape r9, r10;
	int r2, r3, r5;
	r2 = openfl_Lib_getTimer();
	r3 = r0->startAnimation;
	r2 = r2 - r3;
	r3 = r0->endAnimation;
	r5 = r0->startAnimation;
	r3 = r3 - r5;
	r6 = (double)r2;
	r7 = (double)r3;
	r6 = r6 / r7;
	r8 = 0.;
	if( !(r6 < r8) ) goto label$0f9dd07_10_13;
	r7 = 0.;
	r6 = r7;
	label$0f9dd07_10_13:
	r8 = 1.;
	if( !(r8 < r6) ) goto label$0f9dd07_10_17;
	r7 = 1.;
	r6 = r7;
	label$0f9dd07_10_17:
	r9 = r0->outline;
	if( r9 == NULL ) hl_null_access();
	r10 = r0->progress;
	if( r10 == NULL ) hl_null_access();
	r7 = openfl_display_DisplayObject_set_alpha(((openfl__display__DisplayObject)r10),r6);
	r7 = openfl_display_DisplayObject_set_alpha(((openfl__display__DisplayObject)r9),r7);
	return;
}

void openfl_display_DefaultPreloader_this_onProgress(openfl__display__DefaultPreloader r0,openfl__events__ProgressEvent r1) {
	double r2, r5;
	int r4, r6;
	if( r1 == NULL ) hl_null_access();
	r2 = r1->bytesLoaded;
	r4 = (int)r2;
	r5 = r1->bytesTotal;
	r6 = (int)r5;
	openfl_display_DefaultPreloader_onUpdate(r0,r4,r6);
	return;
}

