// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <openfl/display/Stage3D.h>
#include <openfl/_Vector/FloatVector.h>
void openfl_events_EventDispatcher_new(openfl__events__EventDispatcher,vvirtual*);
extern hl_type t$openfl_geom_Matrix3D;
void openfl_geom_Matrix3D_new(openfl__geom__Matrix3D,openfl___Vector__FloatVector);
void openfl_display_Stage3D___resize(openfl__display__Stage3D,int,int);
#include <haxe/Timer.h>
extern hl_type t$_i32;
void openfl_display_Stage3D___dispatchCreate(openfl__display__Stage3D);
extern hl_type t$fun_852abe3;
haxe__Timer haxe_Timer_delay(vclosure*,int);
void openfl_display_Stage3D___createContext(openfl__display__Stage3D);
#include <openfl/_Vector/ObjectVector.h>
#include <openfl/display/DisplayObjectRenderer.h>
#include <openfl/display3D/_internal/Context3DState.h>
extern String s$cairo;
int String___compare(String,vdynamic*);
extern String s$canvas;
void openfl_display_Stage3D___dispatchError(openfl__display__Stage3D);
extern String s$opengl;
extern hl_type t$openfl_display3D_Context3D;
void openfl_display3D_Context3D_new(openfl__display3D__Context3D,openfl__display__Stage,openfl__display3D___internal__Context3DState,openfl__display__Stage3D);
extern String s$dom;
#include <openfl/events/ErrorEvent.h>
extern hl_type t$openfl_events_ErrorEvent;
extern String s$error;
extern String s$Context3D_not_available;
void openfl_events_ErrorEvent_new(openfl__events__ErrorEvent,String,bool*,bool*,String,int*);
bool openfl_events_EventDispatcher_dispatchEvent(openfl__events__EventDispatcher,openfl__events__Event);
extern hl_type t$openfl_events_Event;
extern String s$context3DCreate;
void openfl_events_Event_new(openfl__events__Event,String,bool*,bool*);
void openfl_display3D_Context3D___dispose(openfl__display3D__Context3D);
#include <hl/types/ArrayBytes_Float.h>
#include <hl/types/ArrayDyn.h>
extern hl_type t$openfl__Vector_FloatVector;
#include <hl/natives.h>
hl__types__ArrayBytes_Float hl_types_ArrayBase_allocF64(vbyte*,int);
extern hl_type t$hl_types_ArrayDyn;
extern hl_type t$hl_types_ArrayBytes_Float;
void openfl__Vector_FloatVector_new(openfl___Vector__FloatVector,int*,bool*,hl__types__ArrayDyn,bool*);
void openfl_geom_Matrix3D_copyRawDataFrom(openfl__geom__Matrix3D,openfl___Vector__FloatVector,int*,bool*);
void openfl_geom_Matrix3D_identity(openfl__geom__Matrix3D);
void openfl_geom_Matrix3D_appendTranslation(openfl__geom__Matrix3D,double,double,double);
void openfl_geom_Matrix3D_append(openfl__geom__Matrix3D,openfl__geom__Matrix3D);

void openfl_display_Stage3D_new(openfl__display__Stage3D r0,openfl__display__Stage r1) {
	vvirtual *r3;
	bool r8;
	openfl__geom__Matrix3D r5;
	openfl___Vector__FloatVector r6;
	double r7;
	int r4, r9;
	r3 = NULL;
	openfl_events_EventDispatcher_new(((openfl__events__EventDispatcher)r0),r3);
	r0->__stage = r1;
	r4 = 0;
	r0->__height = r4;
	r5 = (openfl__geom__Matrix3D)hl_alloc_obj(&t$openfl_geom_Matrix3D);
	r6 = NULL;
	openfl_geom_Matrix3D_new(r5,r6);
	r0->__projectionTransform = r5;
	r5 = (openfl__geom__Matrix3D)hl_alloc_obj(&t$openfl_geom_Matrix3D);
	r6 = NULL;
	openfl_geom_Matrix3D_new(r5,r6);
	r0->__renderTransform = r5;
	r4 = 0;
	r0->__width = r4;
	r7 = 0.;
	r0->__x = r7;
	r7 = 0.;
	r0->__y = r7;
	r8 = true;
	r0->visible = r8;
	if( r1 == NULL ) hl_null_access();
	r4 = r1->stageWidth;
	r9 = 0;
	if( r9 >= r4 ) goto label$fc73f8b_1_31;
	r4 = r1->stageHeight;
	r9 = 0;
	if( r9 >= r4 ) goto label$fc73f8b_1_31;
	r4 = r1->stageWidth;
	r9 = r1->stageHeight;
	openfl_display_Stage3D___resize(r0,r4,r9);
	label$fc73f8b_1_31:
	return;
}

void openfl_display_Stage3D_requestContext3D(openfl__display__Stage3D r0,vdynamic* r1,vdynamic* r2) {
	openfl__display3D__Context3D r6;
	bool r5;
	haxe__Timer r7;
	vclosure *r8;
	int r3;
	if( r1 ) goto label$fc73f8b_2_3;
	r3 = 0;
	r1 = hl_alloc_dynamic(&t$_i32);
	r1->v.i = r3;
	label$fc73f8b_2_3:
	if( r2 ) goto label$fc73f8b_2_6;
	r3 = 0;
	r2 = hl_alloc_dynamic(&t$_i32);
	r2->v.i = r3;
	label$fc73f8b_2_6:
	r5 = r0->__contextLost;
	if( !r5 ) goto label$fc73f8b_2_11;
	r5 = true;
	r0->__contextRequested = r5;
	return;
	label$fc73f8b_2_11:
	r6 = r0->context3D;
	if( !r6 ) goto label$fc73f8b_2_19;
	r5 = true;
	r0->__contextRequested = r5;
	r8 = hl_alloc_closure_ptr(&t$fun_852abe3,openfl_display_Stage3D___dispatchCreate,r0);
	r3 = 1;
	r7 = haxe_Timer_delay(r8,r3);
	goto label$fc73f8b_2_26;
	label$fc73f8b_2_19:
	r5 = r0->__contextRequested;
	if( r5 ) goto label$fc73f8b_2_26;
	r5 = true;
	r0->__contextRequested = r5;
	r8 = hl_alloc_closure_ptr(&t$fun_852abe3,openfl_display_Stage3D___createContext,r0);
	r3 = 1;
	r7 = haxe_Timer_delay(r8,r3);
	label$fc73f8b_2_26:
	return;
}

void openfl_display_Stage3D_requestContext3DMatchingProfiles(openfl__display__Stage3D r0,openfl___Vector__ObjectVector r1) {
	vdynamic *r3, *r4;
	r3 = NULL;
	r4 = NULL;
	openfl_display_Stage3D_requestContext3D(r0,r3,r4);
	return;
}

void openfl_display_Stage3D___createContext(openfl__display__Stage3D r0) {
	String r4, r5;
	openfl__display3D__Context3D r6, r8;
	bool r9;
	openfl__display3D___internal__Context3DState r7;
	openfl__display__Stage r1;
	openfl__display__DisplayObjectRenderer r3;
	r1 = r0->__stage;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->__renderer;
	if( r3 == NULL ) hl_null_access();
	r4 = r3->__type;
	r5 = (String)s$cairo;
	if( r4 == r5 || (r4 && r5 && String___compare(r4,(vdynamic*)r5) == 0) ) goto label$fc73f8b_4_10;
	r4 = r3->__type;
	r5 = (String)s$canvas;
	if( r4 != r5 && (!r4 || !r5 || String___compare(r4,(vdynamic*)r5) != 0) ) goto label$fc73f8b_4_12;
	label$fc73f8b_4_10:
	openfl_display_Stage3D___dispatchError(r0);
	return;
	label$fc73f8b_4_12:
	r4 = r3->__type;
	r5 = (String)s$opengl;
	if( r4 != r5 && (!r4 || !r5 || String___compare(r4,(vdynamic*)r5) != 0) ) goto label$fc73f8b_4_23;
	r6 = (openfl__display3D__Context3D)hl_alloc_obj(&t$openfl_display3D_Context3D);
	r8 = r1->context3D;
	if( r8 == NULL ) hl_null_access();
	r7 = r8->__contextState;
	openfl_display3D_Context3D_new(r6,r1,r7,r0);
	r0->context3D = r6;
	openfl_display_Stage3D___dispatchCreate(r0);
	goto label$fc73f8b_4_29;
	label$fc73f8b_4_23:
	r4 = r3->__type;
	r5 = (String)s$dom;
	if( r4 == r5 || (r4 && r5 && String___compare(r4,(vdynamic*)r5) == 0) ) goto label$fc73f8b_4_28;
	r9 = false;
	goto label$fc73f8b_4_29;
	label$fc73f8b_4_28:
	r9 = true;
	label$fc73f8b_4_29:
	return;
}

void openfl_display_Stage3D___dispatchError(openfl__display__Stage3D r0) {
	bool *r4, *r6;
	String r3, r7;
	bool r1, r5;
	openfl__events__ErrorEvent r2;
	int *r8;
	r1 = false;
	r0->__contextRequested = r1;
	r2 = (openfl__events__ErrorEvent)hl_alloc_obj(&t$openfl_events_ErrorEvent);
	r3 = (String)s$error;
	r1 = false;
	r4 = &r1;
	r5 = false;
	r6 = &r5;
	r7 = (String)s$Context3D_not_available;
	r8 = NULL;
	openfl_events_ErrorEvent_new(r2,r3,r4,r6,r7,r8);
	r1 = openfl_events_EventDispatcher_dispatchEvent(((openfl__events__EventDispatcher)r0),((openfl__events__Event)r2));
	return;
}

void openfl_display_Stage3D___dispatchCreate(openfl__display__Stage3D r0) {
	bool *r5, *r6;
	String r4;
	bool r2;
	openfl__events__Event r3;
	r2 = r0->__contextRequested;
	if( !r2 ) goto label$fc73f8b_6_10;
	r2 = false;
	r0->__contextRequested = r2;
	r3 = (openfl__events__Event)hl_alloc_obj(&t$openfl_events_Event);
	r4 = (String)s$context3DCreate;
	r5 = NULL;
	r6 = NULL;
	openfl_events_Event_new(r3,r4,r5,r6);
	r2 = openfl_events_EventDispatcher_dispatchEvent(((openfl__events__EventDispatcher)r0),r3);
	label$fc73f8b_6_10:
	return;
}

void openfl_display_Stage3D___lostContext(openfl__display__Stage3D r0) {
	openfl__display3D__Context3D r3;
	bool r1;
	r1 = true;
	r0->__contextLost = r1;
	r3 = r0->context3D;
	if( !r3 ) goto label$fc73f8b_7_9;
	r3 = r0->context3D;
	if( r3 == NULL ) hl_null_access();
	openfl_display3D_Context3D___dispose(r3);
	r1 = true;
	r0->__contextRequested = r1;
	label$fc73f8b_7_9:
	return;
}

void openfl_display_Stage3D___resize(openfl__display__Stage3D r0,int r1,int r2) {
	bool *r12, *r21;
	bool r11, r20;
	openfl__geom__Matrix3D r6, r23;
	openfl___Vector__FloatVector r7;
	hl__types__ArrayBytes_Float r13;
	hl__types__ArrayDyn r19;
	double r15, r18, r22;
	int *r9;
	vdynamic *r8, *r10;
	vbyte *r14;
	int r4, r5, r16, r17;
	r5 = r0->__width;
	if( r1 != r5 ) goto label$fc73f8b_8_4;
	r5 = r0->__height;
	if( r2 == r5 ) goto label$fc73f8b_8_134;
	label$fc73f8b_8_4:
	r6 = r0->__projectionTransform;
	if( r6 == NULL ) hl_null_access();
	r7 = (openfl___Vector__FloatVector)hl_alloc_obj(&t$openfl__Vector_FloatVector);
	r8 = NULL;
	r4 = r8 ? r8->v.i : 0;
	r9 = &r4;
	r10 = NULL;
	r11 = r10 ? r10->v.b : 0;
	r12 = &r11;
	r5 = 128;
	r14 = hl_alloc_bytes(r5);
	r5 = 0;
	r15 = 2.;
	r17 = 0;
	if( r17 >= r1 ) goto label$fc73f8b_8_21;
	r16 = r1;
	goto label$fc73f8b_8_22;
	label$fc73f8b_8_21:
	r16 = 1;
	label$fc73f8b_8_22:
	r18 = (double)r16;
	r15 = r15 / r18;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r15 = 0.;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r15 = 0.;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r15 = 0.;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r15 = 0.;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r15 = -2.;
	r17 = 0;
	if( r17 >= r2 ) goto label$fc73f8b_8_53;
	r16 = r2;
	goto label$fc73f8b_8_54;
	label$fc73f8b_8_53:
	r16 = 1;
	label$fc73f8b_8_54:
	r18 = (double)r16;
	r15 = r15 / r18;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r15 = 0.;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r15 = 0.;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r15 = 0.;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r15 = 0.;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r15 = -0.001;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r15 = 0.;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r15 = -1.;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r15 = 1.;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r15 = 0.;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r15 = 1.;
	r16 = 3;
	r16 = r5 << r16;
	*(double*)(r14 + r16) = r15;
	++r5;
	r5 = 16;
	r13 = hl_types_ArrayBase_allocF64(r14,r5);
	r19 = (hl__types__ArrayDyn)hl_dyn_castp(&r13,&t$hl_types_ArrayBytes_Float,&t$hl_types_ArrayDyn);
	r20 = true;
	r21 = &r20;
	openfl__Vector_FloatVector_new(r7,r9,r12,r19,r21);
	r9 = NULL;
	r12 = NULL;
	openfl_geom_Matrix3D_copyRawDataFrom(r6,r7,r9,r12);
	r6 = r0->__renderTransform;
	if( r6 == NULL ) hl_null_access();
	openfl_geom_Matrix3D_identity(r6);
	r6 = r0->__renderTransform;
	if( r6 == NULL ) hl_null_access();
	r15 = r0->__x;
	r18 = r0->__y;
	r22 = 0.;
	openfl_geom_Matrix3D_appendTranslation(r6,r15,r18,r22);
	r6 = r0->__renderTransform;
	if( r6 == NULL ) hl_null_access();
	r23 = r0->__projectionTransform;
	openfl_geom_Matrix3D_append(r6,r23);
	r0->__width = r1;
	r0->__height = r2;
	label$fc73f8b_8_134:
	return;
}

void openfl_display_Stage3D___restoreContext(openfl__display__Stage3D r0) {
	bool r1;
	r1 = false;
	r0->__contextLost = r1;
	openfl_display_Stage3D___createContext(r0);
	return;
}

double openfl_display_Stage3D_get_x(openfl__display__Stage3D r0) {
	double r1;
	r1 = r0->__x;
	return r1;
}

double openfl_display_Stage3D_set_x(openfl__display__Stage3D r0,double r1) {
	openfl__geom__Matrix3D r5, r7;
	double r3, r4, r6;
	r3 = r0->__x;
	if( r3 != r1 ) goto label$fc73f8b_11_3;
	return r1;
	label$fc73f8b_11_3:
	r0->__x = r1;
	r5 = r0->__renderTransform;
	if( r5 == NULL ) hl_null_access();
	openfl_geom_Matrix3D_identity(r5);
	r5 = r0->__renderTransform;
	if( r5 == NULL ) hl_null_access();
	r3 = r0->__x;
	r4 = r0->__y;
	r6 = 0.;
	openfl_geom_Matrix3D_appendTranslation(r5,r3,r4,r6);
	r5 = r0->__renderTransform;
	if( r5 == NULL ) hl_null_access();
	r7 = r0->__projectionTransform;
	openfl_geom_Matrix3D_append(r5,r7);
	return r1;
}

double openfl_display_Stage3D_get_y(openfl__display__Stage3D r0) {
	double r1;
	r1 = r0->__y;
	return r1;
}

double openfl_display_Stage3D_set_y(openfl__display__Stage3D r0,double r1) {
	openfl__geom__Matrix3D r5, r7;
	double r3, r4, r6;
	r3 = r0->__y;
	if( r3 != r1 ) goto label$fc73f8b_13_3;
	return r1;
	label$fc73f8b_13_3:
	r0->__y = r1;
	r5 = r0->__renderTransform;
	if( r5 == NULL ) hl_null_access();
	openfl_geom_Matrix3D_identity(r5);
	r5 = r0->__renderTransform;
	if( r5 == NULL ) hl_null_access();
	r3 = r0->__x;
	r4 = r0->__y;
	r6 = 0.;
	openfl_geom_Matrix3D_appendTranslation(r5,r3,r4,r6);
	r5 = r0->__renderTransform;
	if( r5 == NULL ) hl_null_access();
	r7 = r0->__projectionTransform;
	openfl_geom_Matrix3D_append(r5,r7);
	return r1;
}

