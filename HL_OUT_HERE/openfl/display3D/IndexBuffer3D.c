// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <openfl/display3D/IndexBuffer3D.h>
#include <lime/_internal/backend/native/NativeOpenGLRenderContext.h>
extern hl_type t$fun_1532d29;
extern hl_type t$_i32;
extern hl_type t$fun_9a74d20;
#include <openfl/utils/ByteArrayData.h>
#include <haxe/io/Bytes.h>
#include <hl/types/ArrayDyn.h>
#include <openfl/_Vector/IntVector.h>
#include <lime/utils/TAError.h>
haxe__io__Bytes openfl_utils__ByteArray_ByteArray_Impl__toArrayBuffer(openfl__utils__ByteArrayData);
extern hl_type t$lime_utils_ArrayBufferView;
void lime_utils_ArrayBufferView_new(lime__utils__ArrayBufferView,vdynamic*,int);
int hl_types_ArrayDyn_get_length(hl__types__ArrayDyn);
haxe__io__Bytes haxe_io_Bytes_alloc(int);
void lime_utils_ArrayBufferView_copyFromArray(lime__utils__ArrayBufferView,hl__types__ArrayDyn,int*);
extern hl_type t$_dyn;
extern hl_type t$hl_types_ArrayDyn;
void haxe_io_Bytes_blit(haxe__io__Bytes,int,haxe__io__Bytes,int,int);
extern String s$unimplemented;
extern venum* g$lime_utils_TAError_RangeError;
extern String s$7584283;
void openfl_display3D_IndexBuffer3D_uploadFromTypedArray(openfl__display3D__IndexBuffer3D,lime__utils__ArrayBufferView,int*);
void openfl_display3D_Context3D___bindGLElementArrayBuffer(openfl__display3D__Context3D,lime__graphics__opengl__GLObject);
void lime_graphics__WebGLRenderContext_WebGLRenderContext_Impl__bufferData(lime___internal__backend__native__NativeOpenGLRenderContext,int,lime__utils__ArrayBufferView,int);
extern String s$53c6d62;
int openfl__Vector_IntVector_get(openfl___Vector__IntVector,int);
void lime_utils_ArrayBufferIO_setInt16(haxe__io__Bytes,int,int);

void openfl_display3D_IndexBuffer3D_new(openfl__display3D__IndexBuffer3D r0,openfl__display3D__Context3D r1,int r2,vdynamic* r3) {
	openfl__display3D__Context3D r4;
	lime___internal__backend__native__NativeOpenGLRenderContext r6;
	lime__graphics__opengl__GLObject r8;
	vclosure *r9;
	vdynamic *r10;
	int r5;
	r0->__context = r1;
	r0->__numIndices = r2;
	r4 = r0->__context;
	if( r4 == NULL ) hl_null_access();
	r6 = r4->gl;
	if( r6 == NULL ) hl_null_access();
	r9 = (vclosure*)hl_dyn_getp((vdynamic*)r6,-219546340/*createBuffer*/,&t$fun_1532d29);
	if( r9 == NULL ) hl_null_access();
	r8 = r9->hasValue ? ((lime__graphics__opengl__GLObject (*)(vdynamic*))r9->fun)((vdynamic*)r9->value) : ((lime__graphics__opengl__GLObject (*)(void))r9->fun)();
	r0->__id = r8;
	r5 = 0;
	r10 = hl_alloc_dynamic(&t$_i32);
	r10->v.i = r5;
	if( r3 != r10 && (!r3 || !r10 || (r3->v.i != r10->v.i)) ) goto label$47bfdcf_1_15;
	r5 = r6->DYNAMIC_DRAW;
	goto label$47bfdcf_1_16;
	label$47bfdcf_1_15:
	r5 = r6->STATIC_DRAW;
	label$47bfdcf_1_16:
	r0->__usage = r5;
	return;
}

void openfl_display3D_IndexBuffer3D_dispose(openfl__display3D__IndexBuffer3D r0) {
	openfl__display3D__Context3D r2;
	lime___internal__backend__native__NativeOpenGLRenderContext r1;
	lime__graphics__opengl__GLObject r5;
	vclosure *r4;
	r2 = r0->__context;
	if( r2 == NULL ) hl_null_access();
	r1 = r2->gl;
	if( r1 == NULL ) hl_null_access();
	r4 = (vclosure*)hl_dyn_getp((vdynamic*)r1,388817936/*deleteBuffer*/,&t$fun_9a74d20);
	if( r4 == NULL ) hl_null_access();
	r5 = r0->__id;
	r4->hasValue ? ((void (*)(vdynamic*,lime__graphics__opengl__GLObject))r4->fun)((vdynamic*)r4->value,r5) : ((void (*)(lime__graphics__opengl__GLObject))r4->fun)(r5);
	return;
}

void openfl_display3D_IndexBuffer3D_uploadFromByteArray(openfl__display3D__IndexBuffer3D r0,openfl__utils__ByteArrayData r1,int r2,int r3,int r4) {
	String r27;
	openfl___Vector__IntVector r12;
	venum *r28;
	haxe__io__Bytes r10, r18, r25;
	double r29, r30;
	lime__utils__ArrayBufferView r13, r16;
	hl__types__ArrayDyn r11, r17;
	int *r19;
	vdynamic *r9, *r14, *r15, *r20;
	int r5, r6, r7, r21, r22, r23, r24, r26;
	r7 = 2;
	r6 = r3 * r7;
	r5 = r2 + r6;
	r9 = NULL;
	r10 = openfl_utils__ByteArray_ByteArray_Impl__toArrayBuffer(r1);
	r11 = NULL;
	r12 = NULL;
	r13 = NULL;
	r14 = hl_alloc_dynamic(&t$_i32);
	r14->v.i = r5;
	if( r14 ) goto label$47bfdcf_3_13;
	r6 = 0;
	r15 = hl_alloc_dynamic(&t$_i32);
	r15->v.i = r6;
	r14 = r15;
	label$47bfdcf_3_13:
	if( !r9 ) goto label$47bfdcf_3_18;
	r16 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r6 = 6;
	lime_utils_ArrayBufferView_new(r16,r9,r6);
	goto label$47bfdcf_3_136;
	label$47bfdcf_3_18:
	if( !r11 ) goto label$47bfdcf_3_39;
	r16 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r6 = 0;
	r15 = hl_alloc_dynamic(&t$_i32);
	r15->v.i = r6;
	r6 = 6;
	lime_utils_ArrayBufferView_new(r16,r15,r6);
	r6 = 0;
	r16->byteOffset = r6;
	if( r11 == NULL ) hl_null_access();
	r6 = hl_types_ArrayDyn_get_length(r11);
	r16->length = r6;
	r6 = r16->length;
	r7 = r16->bytesPerElement;
	r6 = r6 * r7;
	r16->byteLength = r6;
	r6 = r16->byteLength;
	r18 = haxe_io_Bytes_alloc(r6);
	r16->buffer = r18;
	r19 = NULL;
	lime_utils_ArrayBufferView_copyFromArray(r16,r11,r19);
	goto label$47bfdcf_3_136;
	label$47bfdcf_3_39:
	if( !r12 ) goto label$47bfdcf_3_63;
	r16 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r6 = 0;
	r15 = hl_alloc_dynamic(&t$_i32);
	r15->v.i = r6;
	r6 = 6;
	lime_utils_ArrayBufferView_new(r16,r15,r6);
	if( r12 == NULL ) hl_null_access();
	r20 = (vdynamic*)hl_dyn_getp((vdynamic*)r12,-269630230/*__array*/,&t$_dyn);
	r17 = (hl__types__ArrayDyn)hl_dyn_castp(&r20,&t$_dyn,&t$hl_types_ArrayDyn);
	r6 = 0;
	r16->byteOffset = r6;
	if( r17 == NULL ) hl_null_access();
	r6 = hl_types_ArrayDyn_get_length(r17);
	r16->length = r6;
	r6 = r16->length;
	r7 = r16->bytesPerElement;
	r6 = r6 * r7;
	r16->byteLength = r6;
	r6 = r16->byteLength;
	r18 = haxe_io_Bytes_alloc(r6);
	r16->buffer = r18;
	r19 = NULL;
	lime_utils_ArrayBufferView_copyFromArray(r16,r17,r19);
	goto label$47bfdcf_3_136;
	label$47bfdcf_3_63:
	if( !r13 ) goto label$47bfdcf_3_97;
	r16 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r6 = 0;
	r15 = hl_alloc_dynamic(&t$_i32);
	r15->v.i = r6;
	r6 = 6;
	lime_utils_ArrayBufferView_new(r16,r15,r6);
	if( r13 == NULL ) hl_null_access();
	r18 = r13->buffer;
	r6 = r13->length;
	r7 = r13->byteOffset;
	r21 = r13->bytesPerElement;
	r22 = r16->bytesPerElement;
	r23 = r13->type;
	r24 = r16->type;
	if( r23 != r24 ) goto label$47bfdcf_3_88;
	if( r18 == NULL ) hl_null_access();
	r23 = r18->length;
	r24 = r23 - r7;
	r25 = haxe_io_Bytes_alloc(r24);
	r16->buffer = r25;
	r25 = r16->buffer;
	if( r25 == NULL ) hl_null_access();
	r26 = 0;
	haxe_io_Bytes_blit(r25,r26,r18,r7,r24);
	goto label$47bfdcf_3_90;
	label$47bfdcf_3_88:
	r27 = (String)s$unimplemented;
	hl_throw((vdynamic*)r27);
	label$47bfdcf_3_90:
	r23 = r16->bytesPerElement;
	r23 = r23 * r6;
	r16->byteLength = r23;
	r23 = 0;
	r16->byteOffset = r23;
	r16->length = r6;
	goto label$47bfdcf_3_136;
	label$47bfdcf_3_97:
	if( !r10 ) goto label$47bfdcf_3_134;
	r16 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r6 = 0;
	r15 = hl_alloc_dynamic(&t$_i32);
	r15->v.i = r6;
	r6 = 6;
	lime_utils_ArrayBufferView_new(r16,r15,r6);
	r6 = r14 ? r14->v.i : 0;
	r21 = 0;
	if( r6 >= r21 ) goto label$47bfdcf_3_108;
	r28 = (venum*)g$lime_utils_TAError_RangeError;
	hl_throw((vdynamic*)r28);
	label$47bfdcf_3_108:
	r21 = r16->bytesPerElement;
	r7 = r21 == 0 ? 0 : r6 % r21;
	r21 = 0;
	if( r7 == r21 ) goto label$47bfdcf_3_114;
	r28 = (venum*)g$lime_utils_TAError_RangeError;
	hl_throw((vdynamic*)r28);
	label$47bfdcf_3_114:
	if( r10 == NULL ) hl_null_access();
	r7 = r10->length;
	r21 = r16->bytesPerElement;
	r24 = r16->bytesPerElement;
	r23 = r4 * r24;
	r22 = r23;
	r23 = r6 + r22;
	if( r7 >= r23 ) goto label$47bfdcf_3_124;
	r28 = (venum*)g$lime_utils_TAError_RangeError;
	hl_throw((vdynamic*)r28);
	label$47bfdcf_3_124:
	r16->buffer = r10;
	r16->byteOffset = r6;
	r16->byteLength = r22;
	r29 = (double)r22;
	r23 = r16->bytesPerElement;
	r30 = (double)r23;
	r29 = r29 / r30;
	r23 = (int)r29;
	r16->length = r23;
	goto label$47bfdcf_3_136;
	label$47bfdcf_3_134:
	r27 = (String)s$7584283;
	hl_throw((vdynamic*)r27);
	label$47bfdcf_3_136:
	r19 = NULL;
	openfl_display3D_IndexBuffer3D_uploadFromTypedArray(r0,r16,r19);
	return;
}

void openfl_display3D_IndexBuffer3D_uploadFromTypedArray(openfl__display3D__IndexBuffer3D r0,lime__utils__ArrayBufferView r1,int* r2) {
	openfl__display3D__Context3D r6;
	lime___internal__backend__native__NativeOpenGLRenderContext r5;
	lime__graphics__opengl__GLObject r7;
	int r3, r8, r9;
	if( r2 ) goto label$47bfdcf_4_3;
	r3 = -1;
	goto label$47bfdcf_4_4;
	label$47bfdcf_4_3:
	r3 = *r2;
	label$47bfdcf_4_4:
	if( r1 ) goto label$47bfdcf_4_6;
	return;
	label$47bfdcf_4_6:
	r6 = r0->__context;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->gl;
	r6 = r0->__context;
	if( r6 == NULL ) hl_null_access();
	r7 = r0->__id;
	openfl_display3D_Context3D___bindGLElementArrayBuffer(r6,r7);
	if( r5 == NULL ) hl_null_access();
	r8 = r5->ELEMENT_ARRAY_BUFFER;
	r9 = r0->__usage;
	lime_graphics__WebGLRenderContext_WebGLRenderContext_Impl__bufferData(r5,r8,r1,r9);
	return;
}

void openfl_display3D_IndexBuffer3D_uploadFromVector(openfl__display3D__IndexBuffer3D r0,openfl___Vector__IntVector r1,int r2,int r3) {
	String r28;
	openfl___Vector__IntVector r5;
	openfl__display3D__Context3D r7;
	haxe__io__Bytes r13, r19, r25;
	lime___internal__backend__native__NativeOpenGLRenderContext r6;
	hl__types__ArrayDyn r14, r18;
	lime__utils__ArrayBufferView r10, r11, r16;
	int *r20;
	vdynamic *r15, *r17;
	int r8, r9, r12, r21, r22, r23, r24, r26, r27;
	if( r1 ) goto label$47bfdcf_5_2;
	return;
	label$47bfdcf_5_2:
	r7 = r0->__context;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->gl;
	r8 = r2 + r3;
	r10 = r0->__tempUInt16Array;
	r11 = r0->__tempUInt16Array;
	if( !r11 ) goto label$47bfdcf_5_13;
	r11 = r0->__tempUInt16Array;
	if( r11 == NULL ) hl_null_access();
	r9 = r11->length;
	if( r9 >= r3 ) goto label$47bfdcf_5_49;
	label$47bfdcf_5_13:
	r13 = NULL;
	r14 = NULL;
	r5 = NULL;
	r11 = NULL;
	r15 = NULL;
	r16 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r17 = hl_alloc_dynamic(&t$_i32);
	r17->v.i = r3;
	r9 = 6;
	lime_utils_ArrayBufferView_new(r16,r17,r9);
	r0->__tempUInt16Array = r16;
	if( !r10 ) goto label$47bfdcf_5_49;
	r16 = r0->__tempUInt16Array;
	r18 = NULL;
	r9 = 0;
	if( !r10 ) goto label$47bfdcf_5_40;
	if( r18 ) goto label$47bfdcf_5_40;
	if( r16 == NULL ) hl_null_access();
	r19 = r16->buffer;
	if( r19 == NULL ) hl_null_access();
	r21 = r16->bytesPerElement;
	r12 = r9 * r21;
	if( r10 == NULL ) hl_null_access();
	r25 = r10->buffer;
	r21 = r10->byteOffset;
	r22 = r10->byteLength;
	haxe_io_Bytes_blit(r19,r12,r25,r21,r22);
	goto label$47bfdcf_5_49;
	label$47bfdcf_5_40:
	if( !r18 ) goto label$47bfdcf_5_47;
	if( r10 ) goto label$47bfdcf_5_47;
	if( r16 == NULL ) hl_null_access();
	r12 = r9;
	r20 = &r12;
	lime_utils_ArrayBufferView_copyFromArray(r16,r18,r20);
	goto label$47bfdcf_5_49;
	label$47bfdcf_5_47:
	r28 = (String)s$53c6d62;
	hl_throw((vdynamic*)r28);
	label$47bfdcf_5_49:
	r9 = r2;
	r21 = r8;
	label$47bfdcf_5_51:
	if( r9 >= r21 ) goto label$47bfdcf_5_67;
	r22 = r9;
	++r9;
	r11 = r0->__tempUInt16Array;
	if( r1 == NULL ) hl_null_access();
	r23 = openfl__Vector_IntVector_get(r1,r22);
	if( r11 == NULL ) hl_null_access();
	r13 = r11->buffer;
	r24 = r11->byteOffset;
	r26 = r22 - r2;
	r27 = 2;
	r26 = r26 * r27;
	r24 = r24 + r26;
	lime_utils_ArrayBufferIO_setInt16(r13,r24,r23);
	goto label$47bfdcf_5_51;
	label$47bfdcf_5_67:
	r11 = r0->__tempUInt16Array;
	r20 = NULL;
	openfl_display3D_IndexBuffer3D_uploadFromTypedArray(r0,r11,r20);
	return;
}

