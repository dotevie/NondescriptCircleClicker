// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <openfl/display3D/textures/RectangleTexture.h>
#include <lime/_internal/backend/native/NativeOpenGLRenderContext.h>
#include <lime/utils/ArrayBufferView.h>
void openfl_display3D_textures_TextureBase_new(openfl__display3D__textures__TextureBase,openfl__display3D__Context3D);
void openfl_display3D_textures_RectangleTexture_uploadFromTypedArray(openfl__display3D__textures__RectangleTexture,lime__utils__ArrayBufferView);
lime__graphics__opengl__GLObject openfl_display3D_textures_TextureBase___getGLFramebuffer(openfl__display3D__textures__TextureBase,bool,int,int);
#include <openfl/display/BitmapData.h>
#include <lime/graphics/Image.h>
lime__graphics__Image openfl_display3D_textures_TextureBase___getImage(openfl__display3D__textures__TextureBase,openfl__display__BitmapData);
lime__utils__ArrayBufferView lime_graphics_Image_get_data(lime__graphics__Image);
#include <openfl/utils/ByteArrayData.h>
#include <haxe/io/Bytes.h>
#include <hl/types/ArrayDyn.h>
#include <openfl/_Vector/IntVector.h>
#include <lime/utils/TAError.h>
haxe__io__Bytes openfl_utils__ByteArray_ByteArray_Impl__toArrayBuffer(openfl__utils__ByteArrayData);
extern hl_type t$_i32;
extern hl_type t$lime_utils_ArrayBufferView;
void lime_utils_ArrayBufferView_new(lime__utils__ArrayBufferView,vdynamic*,int);
int hl_types_ArrayDyn_get_length(hl__types__ArrayDyn);
haxe__io__Bytes haxe_io_Bytes_alloc(int);
void lime_utils_ArrayBufferView_copyFromArray(lime__utils__ArrayBufferView,hl__types__ArrayDyn,int*);
extern hl_type t$_dyn;
extern hl_type t$hl_types_ArrayDyn;
void haxe_io_Bytes_blit(haxe__io__Bytes,int,haxe__io__Bytes,int,int);
extern String s$unimplemented;
extern venum* g$lime_utils_TAError_RangeError;
extern String s$ac96fc9;
#include <lime/utils/BytePointerData.h>
#include <lime/graphics/_WebGL2RenderContext/WebGL2RenderContext_Impl_.h>
void openfl_display3D_Context3D___bindGLTexture2D(openfl__display3D__Context3D,lime__graphics__opengl__GLObject);
extern lime__graphics___WebGL2RenderContext__$WebGL2RenderContext_Impl_ g$05c85d7;
void lime_utils__BytePointer_BytePointer_Impl__set(lime__utils__BytePointerData,haxe__io__Bytes,lime__utils__ArrayBufferView,haxe__io__Bytes,vdynamic*);
extern hl_type t$fun_d4d7b42;
double lime_utils__DataPointer_DataPointer_Impl__fromBytesPointer(lime__utils__BytePointerData);
#include <openfl/display3D/Context3D.h>
bool openfl_display3D_textures_TextureBase___setSamplerState(openfl__display3D__textures__TextureBase,openfl__display___internal__SamplerState);
extern openfl__display3D__$Context3D g$_openfl_display3D_Context3D;
extern hl_type t$fun_589d191;

void openfl_display3D_textures_RectangleTexture_new(openfl__display3D__textures__RectangleTexture r0,openfl__display3D__Context3D r1,int r2,int r3,String r4,bool r5) {
	openfl__display3D__Context3D r7;
	bool r9;
	lime___internal__backend__native__NativeOpenGLRenderContext r10;
	lime__graphics__opengl__GLObject r12;
	lime__utils__ArrayBufferView r11;
	int r8, r13;
	openfl_display3D_textures_TextureBase_new(((openfl__display3D__textures__TextureBase)r0),r1);
	r0->__width = r2;
	r0->__height = r3;
	r0->__optimizeForRenderToTexture = r5;
	r7 = r0->__context;
	if( r7 == NULL ) hl_null_access();
	r10 = r7->gl;
	if( r10 == NULL ) hl_null_access();
	r8 = r10->TEXTURE_2D;
	r0->__textureTarget = r8;
	r11 = NULL;
	openfl_display3D_textures_RectangleTexture_uploadFromTypedArray(r0,r11);
	if( !r5 ) goto label$676cccf_1_17;
	r9 = true;
	r8 = 0;
	r13 = 0;
	r12 = openfl_display3D_textures_TextureBase___getGLFramebuffer(((openfl__display3D__textures__TextureBase)r0),r9,r8,r13);
	label$676cccf_1_17:
	return;
}

void openfl_display3D_textures_RectangleTexture_uploadFromBitmapData(openfl__display3D__textures__RectangleTexture r0,openfl__display__BitmapData r1) {
	lime__graphics__Image r3;
	lime__utils__ArrayBufferView r4;
	if( r1 ) goto label$676cccf_2_2;
	return;
	label$676cccf_2_2:
	r3 = openfl_display3D_textures_TextureBase___getImage(((openfl__display3D__textures__TextureBase)r0),r1);
	if( r3 ) goto label$676cccf_2_5;
	return;
	label$676cccf_2_5:
	if( r3 == NULL ) hl_null_access();
	r4 = lime_graphics_Image_get_data(r3);
	openfl_display3D_textures_RectangleTexture_uploadFromTypedArray(r0,r4);
	return;
}

void openfl_display3D_textures_RectangleTexture_uploadFromByteArray(openfl__display3D__textures__RectangleTexture r0,openfl__utils__ByteArrayData r1,int r2) {
	String r25;
	openfl___Vector__IntVector r7;
	venum *r26;
	haxe__io__Bytes r5, r16, r23;
	double r27, r28;
	lime__utils__ArrayBufferView r8, r13;
	hl__types__ArrayDyn r6, r14;
	int *r17;
	vdynamic *r3, *r10, *r11, *r12, *r18;
	int r9, r15, r19, r20, r21, r22, r24;
	r3 = NULL;
	r5 = openfl_utils__ByteArray_ByteArray_Impl__toArrayBuffer(r1);
	r6 = NULL;
	r7 = NULL;
	r8 = NULL;
	r10 = hl_alloc_dynamic(&t$_i32);
	r10->v.i = r2;
	r11 = NULL;
	if( r10 ) goto label$676cccf_3_11;
	r9 = 0;
	r12 = hl_alloc_dynamic(&t$_i32);
	r12->v.i = r9;
	r10 = r12;
	label$676cccf_3_11:
	if( !r3 ) goto label$676cccf_3_16;
	r13 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r9 = 4;
	lime_utils_ArrayBufferView_new(r13,r3,r9);
	goto label$676cccf_3_149;
	label$676cccf_3_16:
	if( !r6 ) goto label$676cccf_3_37;
	r13 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r9 = 0;
	r12 = hl_alloc_dynamic(&t$_i32);
	r12->v.i = r9;
	r9 = 4;
	lime_utils_ArrayBufferView_new(r13,r12,r9);
	r9 = 0;
	r13->byteOffset = r9;
	if( r6 == NULL ) hl_null_access();
	r9 = hl_types_ArrayDyn_get_length(r6);
	r13->length = r9;
	r9 = r13->length;
	r15 = r13->bytesPerElement;
	r9 = r9 * r15;
	r13->byteLength = r9;
	r9 = r13->byteLength;
	r16 = haxe_io_Bytes_alloc(r9);
	r13->buffer = r16;
	r17 = NULL;
	lime_utils_ArrayBufferView_copyFromArray(r13,r6,r17);
	goto label$676cccf_3_149;
	label$676cccf_3_37:
	if( !r7 ) goto label$676cccf_3_61;
	r13 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r9 = 0;
	r12 = hl_alloc_dynamic(&t$_i32);
	r12->v.i = r9;
	r9 = 4;
	lime_utils_ArrayBufferView_new(r13,r12,r9);
	if( r7 == NULL ) hl_null_access();
	r18 = (vdynamic*)hl_dyn_getp((vdynamic*)r7,-269630230/*__array*/,&t$_dyn);
	r14 = (hl__types__ArrayDyn)hl_dyn_castp(&r18,&t$_dyn,&t$hl_types_ArrayDyn);
	r9 = 0;
	r13->byteOffset = r9;
	if( r14 == NULL ) hl_null_access();
	r9 = hl_types_ArrayDyn_get_length(r14);
	r13->length = r9;
	r9 = r13->length;
	r15 = r13->bytesPerElement;
	r9 = r9 * r15;
	r13->byteLength = r9;
	r9 = r13->byteLength;
	r16 = haxe_io_Bytes_alloc(r9);
	r13->buffer = r16;
	r17 = NULL;
	lime_utils_ArrayBufferView_copyFromArray(r13,r14,r17);
	goto label$676cccf_3_149;
	label$676cccf_3_61:
	if( !r8 ) goto label$676cccf_3_95;
	r13 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r9 = 0;
	r12 = hl_alloc_dynamic(&t$_i32);
	r12->v.i = r9;
	r9 = 4;
	lime_utils_ArrayBufferView_new(r13,r12,r9);
	if( r8 == NULL ) hl_null_access();
	r16 = r8->buffer;
	r9 = r8->length;
	r15 = r8->byteOffset;
	r19 = r8->bytesPerElement;
	r20 = r13->bytesPerElement;
	r21 = r8->type;
	r22 = r13->type;
	if( r21 != r22 ) goto label$676cccf_3_86;
	if( r16 == NULL ) hl_null_access();
	r21 = r16->length;
	r22 = r21 - r15;
	r23 = haxe_io_Bytes_alloc(r22);
	r13->buffer = r23;
	r23 = r13->buffer;
	if( r23 == NULL ) hl_null_access();
	r24 = 0;
	haxe_io_Bytes_blit(r23,r24,r16,r15,r22);
	goto label$676cccf_3_88;
	label$676cccf_3_86:
	r25 = (String)s$unimplemented;
	hl_throw((vdynamic*)r25);
	label$676cccf_3_88:
	r21 = r13->bytesPerElement;
	r21 = r21 * r9;
	r13->byteLength = r21;
	r21 = 0;
	r13->byteOffset = r21;
	r13->length = r9;
	goto label$676cccf_3_149;
	label$676cccf_3_95:
	if( !r5 ) goto label$676cccf_3_147;
	r13 = (lime__utils__ArrayBufferView)hl_alloc_obj(&t$lime_utils_ArrayBufferView);
	r9 = 0;
	r12 = hl_alloc_dynamic(&t$_i32);
	r12->v.i = r9;
	r9 = 4;
	lime_utils_ArrayBufferView_new(r13,r12,r9);
	r9 = r10 ? r10->v.i : 0;
	r19 = 0;
	if( r9 >= r19 ) goto label$676cccf_3_106;
	r26 = (venum*)g$lime_utils_TAError_RangeError;
	hl_throw((vdynamic*)r26);
	label$676cccf_3_106:
	r19 = r13->bytesPerElement;
	r15 = r19 == 0 ? 0 : r9 % r19;
	r19 = 0;
	if( r15 == r19 ) goto label$676cccf_3_112;
	r26 = (venum*)g$lime_utils_TAError_RangeError;
	hl_throw((vdynamic*)r26);
	label$676cccf_3_112:
	if( r5 == NULL ) hl_null_access();
	r15 = r5->length;
	r19 = r13->bytesPerElement;
	if( r11 ) goto label$676cccf_3_129;
	r21 = r15 - r9;
	r20 = r21;
	r22 = r13->bytesPerElement;
	r21 = r22 == 0 ? 0 : r15 % r22;
	r22 = 0;
	if( r21 == r22 ) goto label$676cccf_3_124;
	r26 = (venum*)g$lime_utils_TAError_RangeError;
	hl_throw((vdynamic*)r26);
	label$676cccf_3_124:
	r22 = 0;
	if( r20 >= r22 ) goto label$676cccf_3_128;
	r26 = (venum*)g$lime_utils_TAError_RangeError;
	hl_throw((vdynamic*)r26);
	label$676cccf_3_128:
	goto label$676cccf_3_137;
	label$676cccf_3_129:
	r21 = r11 ? r11->v.i : 0;
	r22 = r13->bytesPerElement;
	r21 = r21 * r22;
	r20 = r21;
	r21 = r9 + r20;
	if( r15 >= r21 ) goto label$676cccf_3_137;
	r26 = (venum*)g$lime_utils_TAError_RangeError;
	hl_throw((vdynamic*)r26);
	label$676cccf_3_137:
	r13->buffer = r5;
	r13->byteOffset = r9;
	r13->byteLength = r20;
	r27 = (double)r20;
	r21 = r13->bytesPerElement;
	r28 = (double)r21;
	r27 = r27 / r28;
	r21 = (int)r27;
	r13->length = r21;
	goto label$676cccf_3_149;
	label$676cccf_3_147:
	r25 = (String)s$ac96fc9;
	hl_throw((vdynamic*)r25);
	label$676cccf_3_149:
	openfl_display3D_textures_RectangleTexture_uploadFromTypedArray(r0,r13);
	return;
}

void openfl_display3D_textures_RectangleTexture_uploadFromTypedArray(openfl__display3D__textures__RectangleTexture r0,lime__utils__ArrayBufferView r1) {
	lime__graphics___WebGL2RenderContext__$WebGL2RenderContext_Impl_ r13;
	lime__utils__BytePointerData r12;
	openfl__display3D__Context3D r3;
	haxe__io__Bytes r14, r15;
	lime___internal__backend__native__NativeOpenGLRenderContext r2;
	lime__graphics__opengl__GLObject r5;
	double r21;
	vclosure *r18;
	vdynamic *r17;
	int r6, r7, r8, r9, r10, r11, r16, r19, r20;
	r3 = r0->__context;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->gl;
	r3 = r0->__context;
	if( r3 == NULL ) hl_null_access();
	r5 = r0->__textureID;
	openfl_display3D_Context3D___bindGLTexture2D(r3,r5);
	r6 = r0->__textureTarget;
	r7 = r0->__internalFormat;
	r8 = r0->__width;
	r9 = r0->__height;
	r10 = r0->__format;
	if( r2 == NULL ) hl_null_access();
	r11 = r2->UNSIGNED_BYTE;
	r13 = (lime__graphics___WebGL2RenderContext__$WebGL2RenderContext_Impl_)g$05c85d7;
	r12 = r13->__tempPointer;
	r14 = NULL;
	r15 = NULL;
	r16 = 0;
	r17 = hl_alloc_dynamic(&t$_i32);
	r17->v.i = r16;
	lime_utils__BytePointer_BytePointer_Impl__set(r12,r14,r1,r15,r17);
	r18 = (vclosure*)hl_dyn_getp((vdynamic*)r2,-110658628/*texImage2D*/,&t$fun_d4d7b42);
	if( r18 == NULL ) hl_null_access();
	r19 = 0;
	r20 = 0;
	r13 = (lime__graphics___WebGL2RenderContext__$WebGL2RenderContext_Impl_)g$05c85d7;
	r12 = r13->__tempPointer;
	r21 = lime_utils__DataPointer_DataPointer_Impl__fromBytesPointer(r12);
	r18->hasValue ? ((void (*)(vdynamic*,int,int,int,int,int,int,int,int,double))r18->fun)((vdynamic*)r18->value,r6,r19,r7,r8,r9,r20,r10,r11,r21) : ((void (*)(int,int,int,int,int,int,int,int,double))r18->fun)(r6,r19,r7,r8,r9,r20,r10,r11,r21);
	r3 = r0->__context;
	if( r3 == NULL ) hl_null_access();
	r5 = NULL;
	openfl_display3D_Context3D___bindGLTexture2D(r3,r5);
	return;
}

bool openfl_display3D_textures_RectangleTexture___setSamplerState(openfl__display3D__textures__RectangleTexture r0,openfl__display___internal__SamplerState r1) {
	openfl__display3D__$Context3D r7;
	openfl__display3D__Context3D r5;
	bool r3;
	lime___internal__backend__native__NativeOpenGLRenderContext r4;
	double r12;
	vclosure *r11;
	vdynamic *r9;
	int r6, r8, r10;
	r3 = openfl_display3D_textures_TextureBase___setSamplerState(((openfl__display3D__textures__TextureBase)r0),r1);
	if( !r3 ) goto label$676cccf_5_43;
	r5 = r0->__context;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->gl;
	r7 = (openfl__display3D__$Context3D)g$_openfl_display3D_Context3D;
	r6 = r7->__glMaxTextureMaxAnisotropy;
	r8 = 0;
	if( r6 == r8 ) goto label$676cccf_5_41;
	if( r1 == NULL ) hl_null_access();
	r9 = r1->filter;
	r6 = r9 ? r9->v.i : 0;
	switch(r6) {
		default:
			r8 = 1;
			r6 = r8;
			goto label$676cccf_5_27;
		case 0:
			r8 = 16;
			r6 = r8;
			goto label$676cccf_5_27;
		case 1:
			r8 = 2;
			r6 = r8;
			goto label$676cccf_5_27;
		case 2:
			r8 = 4;
			r6 = r8;
			goto label$676cccf_5_27;
		case 3:
			r8 = 8;
			r6 = r8;
	}
	label$676cccf_5_27:
	r7 = (openfl__display3D__$Context3D)g$_openfl_display3D_Context3D;
	r10 = r7->__glMaxTextureMaxAnisotropy;
	if( r10 >= r8 ) goto label$676cccf_5_33;
	r7 = (openfl__display3D__$Context3D)g$_openfl_display3D_Context3D;
	r8 = r7->__glMaxTextureMaxAnisotropy;
	r6 = r8;
	label$676cccf_5_33:
	if( r4 == NULL ) hl_null_access();
	r11 = (vclosure*)hl_dyn_getp((vdynamic*)r4,472983529/*texParameterf*/,&t$fun_589d191);
	if( r11 == NULL ) hl_null_access();
	r8 = r4->TEXTURE_2D;
	r7 = (openfl__display3D__$Context3D)g$_openfl_display3D_Context3D;
	r10 = r7->__glTextureMaxAnisotropy;
	r12 = (double)r6;
	r11->hasValue ? ((void (*)(vdynamic*,int,int,double))r11->fun)((vdynamic*)r11->value,r8,r10,r12) : ((void (*)(int,int,double))r11->fun)(r8,r10,r12);
	label$676cccf_5_41:
	r3 = true;
	return r3;
	label$676cccf_5_43:
	r3 = false;
	return r3;
}

