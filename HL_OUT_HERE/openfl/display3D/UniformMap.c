// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <openfl/display3D/UniformMap.h>
#include <openfl/display3D/Uniform.h>
extern hl_type t$openfl_display3D_Uniform;
extern hl_type t$_dyn;
extern hl_type t$_i32;
#include <hl/natives.h>
#include <hl/types/ArrayDyn.h>
extern hl_type t$fun_c618eb8;
extern hl_type t$fun_0e57640;
void hl_types_ArrayObj_sort(hl__types__ArrayObj,vclosure*);
extern hl_type t$openfl__Vector_ObjectVector;
extern hl_type t$hl_types_ArrayDyn;
extern hl_type t$hl_types_ArrayObj;
void openfl__Vector_ObjectVector_new(openfl___Vector__ObjectVector,int*,bool*,hl__types__ArrayDyn,bool*);
vdynamic* openfl__Vector_ObjectVector_set(openfl___Vector__ObjectVector,int,vdynamic*);
void openfl_display3D_Uniform_flush(openfl__display3D__Uniform);
int openfl__Vector_ObjectVector_get_length(openfl___Vector__ObjectVector);
vdynamic* openfl__Vector_ObjectVector_get(openfl___Vector__ObjectVector,int);

int openfl_display3D_UniformMap_new__$2(vclosure* r0,vdynamic* r1,vdynamic* r2) {
	openfl__display3D__Uniform r3, r4;
	int r5;
	r3 = (openfl__display3D__Uniform)hl_dyn_castp(&r1,&t$_dyn,&t$openfl_display3D_Uniform);
	r4 = (openfl__display3D__Uniform)hl_dyn_castp(&r2,&t$_dyn,&t$openfl_display3D_Uniform);
	r5 = r0->hasValue ? ((int (*)(vdynamic*,openfl__display3D__Uniform,openfl__display3D__Uniform))r0->fun)((vdynamic*)r0->value,r3,r4) : ((int (*)(openfl__display3D__Uniform,openfl__display3D__Uniform))r0->fun)(r3,r4);
	return r5;
}

int openfl_display3D_UniformMap_new__$1(openfl__display3D__Uniform r0,openfl__display3D__Uniform r1) {
	vdynamic *r3, *r4;
	int r2;
	if( r0 == NULL ) hl_null_access();
	r2 = r0->regIndex;
	r3 = hl_alloc_dynamic(&t$_i32);
	r3->v.i = r2;
	if( r1 == NULL ) hl_null_access();
	r2 = r1->regIndex;
	r4 = hl_alloc_dynamic(&t$_i32);
	r4->v.i = r2;
	r2 = hl_dyn_compare(((vdynamic*)r3),((vdynamic*)r4));
	return r2;
}

void openfl_display3D_UniformMap_new(openfl__display3D__UniformMap r0,hl__types__ArrayObj r1) {
	bool *r18, *r21;
	openfl__display3D__Uniform r10, r13;
	hl__types__ArrayObj r2;
	bool r17, r20, r25;
	hl__types__ArrayDyn r19;
	vclosure *r4, *r5;
	int *r15;
	vdynamic *r11, *r16;
	openfl___Vector__ObjectVector r14;
	varray *r12;
	int r6, r7, r8, r9, r22, r23, r24;
	static vclosure cl$0 = { &t$fun_c618eb8, openfl_display3D_UniformMap_new__$1, 0 };
	r0->__uniforms = r1;
	r2 = r0->__uniforms;
	if( r2 == NULL ) hl_null_access();
	r4 = &cl$0;
	if( r4 ) goto label$bb99d1f_3_7;
	r5 = NULL;
	goto label$bb99d1f_3_8;
	label$bb99d1f_3_7:
	r5 = hl_alloc_closure_ptr(&t$fun_0e57640,openfl_display3D_UniformMap_new__$2,r4);
	label$bb99d1f_3_8:
	hl_types_ArrayObj_sort(r2,r5);
	r6 = 0;
	r7 = 0;
	r2 = r0->__uniforms;
	label$bb99d1f_3_12:
	if( r2 == NULL ) hl_null_access();
	r9 = r2->length;
	if( r7 >= r9 ) goto label$bb99d1f_3_34;
	r9 = r2->length;
	if( ((unsigned)r7) < ((unsigned)r9) ) goto label$bb99d1f_3_20;
	r10 = NULL;
	goto label$bb99d1f_3_23;
	label$bb99d1f_3_20:
	r12 = r2->array;
	r11 = ((vdynamic**)(r12 + 1))[r7];
	r10 = (openfl__display3D__Uniform)r11;
	label$bb99d1f_3_23:
	++r7;
	if( r10 == NULL ) hl_null_access();
	r8 = r10->regIndex;
	r9 = r10->regCount;
	r8 = r8 + r9;
	if( r6 >= r8 ) goto label$bb99d1f_3_33;
	r8 = r10->regIndex;
	r9 = r10->regCount;
	r8 = r8 + r9;
	r6 = r8;
	label$bb99d1f_3_33:
	goto label$bb99d1f_3_12;
	label$bb99d1f_3_34:
	r14 = (openfl___Vector__ObjectVector)hl_alloc_obj(&t$openfl__Vector_ObjectVector);
	r7 = r6;
	r15 = &r7;
	r16 = NULL;
	r17 = r16 ? r16->v.b : 0;
	r18 = &r17;
	r2 = NULL;
	r19 = (hl__types__ArrayDyn)hl_dyn_castp(&r2,&t$hl_types_ArrayObj,&t$hl_types_ArrayDyn);
	r20 = true;
	r21 = &r20;
	openfl__Vector_ObjectVector_new(r14,r15,r18,r19,r21);
	r0->__registerLookup = r14;
	r8 = 0;
	r2 = r0->__uniforms;
	label$bb99d1f_3_48:
	if( r2 == NULL ) hl_null_access();
	r22 = r2->length;
	if( r8 >= r22 ) goto label$bb99d1f_3_76;
	r22 = r2->length;
	if( ((unsigned)r8) < ((unsigned)r22) ) goto label$bb99d1f_3_56;
	r10 = NULL;
	goto label$bb99d1f_3_59;
	label$bb99d1f_3_56:
	r12 = r2->array;
	r11 = ((vdynamic**)(r12 + 1))[r8];
	r10 = (openfl__display3D__Uniform)r11;
	label$bb99d1f_3_59:
	++r8;
	r9 = 0;
	if( r10 == NULL ) hl_null_access();
	r22 = r10->regCount;
	label$bb99d1f_3_63:
	if( r9 >= r22 ) goto label$bb99d1f_3_75;
	r23 = r9;
	++r9;
	r14 = r0->__registerLookup;
	if( r14 == NULL ) hl_null_access();
	if( r10 == NULL ) hl_null_access();
	r24 = r10->regIndex;
	r24 = r24 + r23;
	r11 = openfl__Vector_ObjectVector_set(r14,r24,((vdynamic*)r10));
	r13 = (openfl__display3D__Uniform)r11;
	goto label$bb99d1f_3_63;
	label$bb99d1f_3_75:
	goto label$bb99d1f_3_48;
	label$bb99d1f_3_76:
	r25 = true;
	r0->__allDirty = r25;
	r0->__anyDirty = r25;
	return;
}

void openfl_display3D_UniformMap_flush(openfl__display3D__UniformMap r0) {
	openfl__display3D__Uniform r6;
	hl__types__ArrayObj r4;
	bool r2;
	vdynamic *r7;
	varray *r8;
	int r3, r5;
	r2 = r0->__anyDirty;
	if( !r2 ) goto label$bb99d1f_4_29;
	r3 = 0;
	r4 = r0->__uniforms;
	label$bb99d1f_4_4:
	if( r4 == NULL ) hl_null_access();
	r5 = r4->length;
	if( r3 >= r5 ) goto label$bb99d1f_4_26;
	r5 = r4->length;
	if( ((unsigned)r3) < ((unsigned)r5) ) goto label$bb99d1f_4_12;
	r6 = NULL;
	goto label$bb99d1f_4_15;
	label$bb99d1f_4_12:
	r8 = r4->array;
	r7 = ((vdynamic**)(r8 + 1))[r3];
	r6 = (openfl__display3D__Uniform)r7;
	label$bb99d1f_4_15:
	++r3;
	r2 = r0->__allDirty;
	if( r2 ) goto label$bb99d1f_4_21;
	if( r6 == NULL ) hl_null_access();
	r2 = r6->isDirty;
	if( !r2 ) goto label$bb99d1f_4_25;
	label$bb99d1f_4_21:
	if( r6 == NULL ) hl_null_access();
	openfl_display3D_Uniform_flush(r6);
	r2 = false;
	r6->isDirty = r2;
	label$bb99d1f_4_25:
	goto label$bb99d1f_4_4;
	label$bb99d1f_4_26:
	r2 = false;
	r0->__allDirty = r2;
	r0->__anyDirty = r2;
	label$bb99d1f_4_29:
	return;
}

void openfl_display3D_UniformMap_markAllDirty(openfl__display3D__UniformMap r0) {
	bool r1;
	r1 = true;
	r0->__allDirty = r1;
	r1 = true;
	r0->__anyDirty = r1;
	return;
}

void openfl_display3D_UniformMap_markDirty(openfl__display3D__UniformMap r0,int r1,int r2) {
	openfl__display3D__Uniform r11;
	bool r4;
	vdynamic *r5;
	openfl___Vector__ObjectVector r9;
	int r6, r7, r8, r10;
	r4 = r0->__allDirty;
	if( !r4 ) goto label$bb99d1f_6_3;
	return;
	label$bb99d1f_6_3:
	r6 = r1 + r2;
	r9 = r0->__registerLookup;
	if( r9 == NULL ) hl_null_access();
	r8 = openfl__Vector_ObjectVector_get_length(r9);
	if( r8 >= r6 ) goto label$bb99d1f_6_12;
	r9 = r0->__registerLookup;
	if( r9 == NULL ) hl_null_access();
	r7 = openfl__Vector_ObjectVector_get_length(r9);
	r6 = r7;
	label$bb99d1f_6_12:
	r7 = r1;
	label$bb99d1f_6_13:
	if( r7 >= r6 ) goto label$bb99d1f_6_32;
	r9 = r0->__registerLookup;
	if( r9 == NULL ) hl_null_access();
	r5 = openfl__Vector_ObjectVector_get(r9,r7);
	r11 = (openfl__display3D__Uniform)r5;
	if( !r11 ) goto label$bb99d1f_6_30;
	if( r11 == NULL ) hl_null_access();
	r4 = true;
	r11->isDirty = r4;
	r4 = true;
	r0->__anyDirty = r4;
	r8 = r11->regIndex;
	r10 = r11->regCount;
	r8 = r8 + r10;
	r7 = r8;
	goto label$bb99d1f_6_31;
	label$bb99d1f_6_30:
	++r7;
	label$bb99d1f_6_31:
	goto label$bb99d1f_6_13;
	label$bb99d1f_6_32:
	return;
}

