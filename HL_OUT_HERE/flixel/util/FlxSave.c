// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <flixel/util/FlxSave.h>
extern flixel__util__$FlxSave g$_flixel_util_FlxSave;
bool EReg_match(EReg,String);
#include <hl/types/ArrayObj.h>
hl__types__ArrayObj EReg_split(EReg,String);
extern String s$336d5eb;
String hl_types_ArrayObj_join(hl__types__ArrayObj,String);
extern venum* g$flixel_util_FlxSaveStatus_EMPTY;
#include <openfl/errors/Error.h>
#include <flixel/system/frontEnds/LogFrontEnd.h>
#include <flixel/FlxG.h>
extern String s$name;
extern String s$path;
openfl__net__SharedObject flixel_util__FlxSave_FlxSharedObject_getLocal(String,String);
extern hl_type t$flixel_util_FlxSaveStatus;
extern openfl__errors__$Error g$_openfl_errors_Error;
bool hl_BaseType_check(hl__BaseType,vdynamic*);
extern flixel__$FlxG g$_flixel_FlxG;
extern String s$3d9f514;
#include <haxe/Exception.h>
String haxe_Exception_get_message(haxe__Exception);
String String___add__(String,String);
extern String s$48ef324;
extern String s$_path_;
extern String s$4e17057;
bool flixel_util_FlxSave_checkStatus(flixel__util__FlxSave);
extern hl_type t$flixel_util_FlxSave;
bool flixel_util_FlxSave_mergeData(flixel__util__FlxSave,vdynamic*,bool*,int*);
bool flixel_util_FlxSave_erase(flixel__util__FlxSave);
hl__types__ArrayObj Reflect_fields(vdynamic*);
bool Reflect_hasField(vdynamic*,String);
vdynamic* Reflect_field(vdynamic*,String);
void Reflect_setField(vdynamic*,String,vdynamic*);
bool flixel_util_FlxSave_flush(flixel__util__FlxSave,int*);
extern hl_type t$_i32;
extern String s$b3dbb57;
extern String s$bb372bc;

bool flixel_util_FlxSave_hasInvalidChars(String r0) {
	bool r1;
	EReg r2;
	flixel__util__$FlxSave r3;
	r3 = (flixel__util__$FlxSave)g$_flixel_util_FlxSave;
	r2 = r3->invalidChars;
	if( r2 == NULL ) hl_null_access();
	r1 = EReg_match(r2,r0);
	return r1;
}

String flixel_util_FlxSave_validate(String r0) {
	String r1;
	hl__types__ArrayObj r2;
	EReg r3;
	flixel__util__$FlxSave r4;
	r4 = (flixel__util__$FlxSave)g$_flixel_util_FlxSave;
	r3 = r4->invalidChars;
	if( r3 == NULL ) hl_null_access();
	r2 = EReg_split(r3,r0);
	if( r2 == NULL ) hl_null_access();
	r1 = (String)s$336d5eb;
	r1 = hl_types_ArrayObj_join(r2,r1);
	return r1;
}

String flixel_util_FlxSave_validateAndWarn(String r0,String r1) {
	String r2;
	r2 = flixel_util_FlxSave_validate(r0);
	return r2;
}

void flixel_util_FlxSave_new(flixel__util__FlxSave r0) {
	venum *r1;
	r1 = (venum*)g$flixel_util_FlxSaveStatus_EMPTY;
	r0->status = r1;
	return;
}

void flixel_util_FlxSave_destroy(flixel__util__FlxSave r0) {
	venum *r2;
	openfl__net__SharedObject r1;
	vdynamic *r3;
	r1 = NULL;
	r0->_sharedObject = r1;
	r2 = (venum*)g$flixel_util_FlxSaveStatus_EMPTY;
	r0->status = r2;
	r3 = NULL;
	r0->data = r3;
	return;
}

bool flixel_util_FlxSave_bind(flixel__util__FlxSave r0,String r1,String r2) {
	String r4, r5;
	flixel__system__frontEnds__LogFrontEnd r12;
	venum *r8;
	bool r10;
	flixel__$FlxG r13;
	openfl__errors__$Error r9;
	openfl__net__SharedObject r7;
	openfl__errors__Error r11;
	vdynamic *r6;
	hl_trap_ctx trap$0;
	flixel_util_FlxSave_destroy(r0);
	r5 = (String)s$name;
	r4 = flixel_util_FlxSave_validateAndWarn(r1,r5);
	r1 = r4;
	if( !r2 ) goto label$6d7dd97_6_8;
	r5 = (String)s$path;
	r4 = flixel_util_FlxSave_validateAndWarn(r2,r5);
	r2 = r4;
	label$6d7dd97_6_8:
	hl_trap(trap$0,r6,label$6d7dd97_6_15);
	r7 = flixel_util__FlxSave_FlxSharedObject_getLocal(r1,r2);
	r0->_sharedObject = r7;
	r8 = hl_alloc_enum(&t$flixel_util_FlxSaveStatus,1);
	((flixel_util_FlxSaveStatus_BOUND*)r8)->p0 = r1;
	((flixel_util_FlxSaveStatus_BOUND*)r8)->p1 = r2;
	r0->status = r8;
	hl_endtrap(trap$0);
	goto label$6d7dd97_6_37;
	label$6d7dd97_6_15:
	r9 = (openfl__errors__$Error)g$_openfl_errors_Error;
	r10 = hl_BaseType_check(((hl__BaseType)r9),r6);
	if( !r10 ) goto label$6d7dd97_6_36;
	r11 = (openfl__errors__Error)r6;
	r13 = (flixel__$FlxG)g$_flixel_FlxG;
	r12 = r13->log;
	r4 = (String)s$3d9f514;
	if( r11 == NULL ) hl_null_access();
	r5 = haxe_Exception_get_message(((haxe__Exception)r11));
	r4 = String___add__(r4,r5);
	r5 = (String)s$48ef324;
	r4 = String___add__(r4,r5);
	r4 = String___add__(r4,r1);
	r5 = (String)s$_path_;
	r4 = String___add__(r4,r5);
	r4 = String___add__(r4,r2);
	r5 = (String)s$4e17057;
	r4 = String___add__(r4,r5);
	flixel_util_FlxSave_destroy(r0);
	r10 = false;
	return r10;
	label$6d7dd97_6_36:
	hl_rethrow((vdynamic*)r6);
	label$6d7dd97_6_37:
	r7 = r0->_sharedObject;
	if( r7 == NULL ) hl_null_access();
	r6 = r7->data;
	r0->data = r6;
	r10 = true;
	return r10;
}

bool flixel_util_FlxSave_mergeDataFrom(flixel__util__FlxSave r0,String r1,String r2,bool* r3,bool* r4,int* r5) {
	bool r6, r7, r10, r14, r15;
	flixel__util__FlxSave r12;
	vdynamic *r11;
	int r8, r13;
	if( r3 ) goto label$6d7dd97_7_3;
	r6 = false;
	goto label$6d7dd97_7_4;
	label$6d7dd97_7_3:
	r6 = *r3;
	label$6d7dd97_7_4:
	if( r4 ) goto label$6d7dd97_7_7;
	r7 = true;
	goto label$6d7dd97_7_8;
	label$6d7dd97_7_7:
	r7 = *r4;
	label$6d7dd97_7_8:
	if( r5 ) goto label$6d7dd97_7_11;
	r8 = 0;
	goto label$6d7dd97_7_12;
	label$6d7dd97_7_11:
	r8 = *r5;
	label$6d7dd97_7_12:
	r10 = flixel_util_FlxSave_checkStatus(r0);
	if( r10 ) goto label$6d7dd97_7_16;
	r10 = false;
	return r10;
	label$6d7dd97_7_16:
	r12 = (flixel__util__FlxSave)hl_alloc_obj(&t$flixel_util_FlxSave);
	flixel_util_FlxSave_new(r12);
	r10 = flixel_util_FlxSave_bind(r12,r1,r2);
	if( !r10 ) goto label$6d7dd97_7_30;
	r11 = r12->data;
	r10 = r6;
	r3 = &r10;
	r13 = r8;
	r5 = &r13;
	r10 = flixel_util_FlxSave_mergeData(r0,r11,r3,r5);
	if( !r7 ) goto label$6d7dd97_7_28;
	r15 = flixel_util_FlxSave_erase(r12);
	label$6d7dd97_7_28:
	flixel_util_FlxSave_destroy(r12);
	return r10;
	label$6d7dd97_7_30:
	flixel_util_FlxSave_destroy(r12);
	r14 = false;
	return r14;
}

bool flixel_util_FlxSave_mergeData(flixel__util__FlxSave r0,vdynamic* r1,bool* r2,int* r3) {
	String r12;
	hl__types__ArrayObj r9;
	bool r4, r6, r14;
	vdynamic *r10, *r15;
	varray *r13;
	int r5, r8, r11;
	if( r2 ) goto label$6d7dd97_8_3;
	r4 = false;
	goto label$6d7dd97_8_4;
	label$6d7dd97_8_3:
	r4 = *r2;
	label$6d7dd97_8_4:
	if( r3 ) goto label$6d7dd97_8_7;
	r5 = 0;
	goto label$6d7dd97_8_8;
	label$6d7dd97_8_7:
	r5 = *r3;
	label$6d7dd97_8_8:
	r6 = false;
	r8 = 0;
	r9 = Reflect_fields(r1);
	label$6d7dd97_8_11:
	if( r9 == NULL ) hl_null_access();
	r11 = r9->length;
	if( r8 >= r11 ) goto label$6d7dd97_8_33;
	r11 = r9->length;
	if( ((unsigned)r8) < ((unsigned)r11) ) goto label$6d7dd97_8_19;
	r12 = NULL;
	goto label$6d7dd97_8_22;
	label$6d7dd97_8_19:
	r13 = r9->array;
	r10 = ((vdynamic**)(r13 + 1))[r8];
	r12 = (String)r10;
	label$6d7dd97_8_22:
	++r8;
	r14 = true;
	r6 = r14;
	if( r4 ) goto label$6d7dd97_8_29;
	r10 = r0->data;
	r14 = Reflect_hasField(r10,r12);
	if( r14 ) goto label$6d7dd97_8_32;
	label$6d7dd97_8_29:
	r10 = r0->data;
	r15 = Reflect_field(r1,r12);
	Reflect_setField(r10,r12,r15);
	label$6d7dd97_8_32:
	goto label$6d7dd97_8_11;
	label$6d7dd97_8_33:
	if( !r6 ) goto label$6d7dd97_8_38;
	r8 = r5;
	r3 = &r8;
	r14 = flixel_util_FlxSave_flush(r0,r3);
	return r14;
	label$6d7dd97_8_38:
	r14 = true;
	return r14;
}

bool flixel_util_FlxSave_close(flixel__util__FlxSave r0,int* r1) {
	bool r3;
	int r2, r4;
	if( r1 ) goto label$6d7dd97_9_3;
	r2 = 0;
	goto label$6d7dd97_9_4;
	label$6d7dd97_9_3:
	r2 = *r1;
	label$6d7dd97_9_4:
	r4 = r2;
	r1 = &r4;
	r3 = flixel_util_FlxSave_flush(r0,r1);
	flixel_util_FlxSave_destroy(r0);
	return r3;
}

bool flixel_util_FlxSave_flush(flixel__util__FlxSave r0,int* r1) {
	String r11, r15;
	venum *r10;
	bool r3;
	openfl__errors__$Error r12;
	openfl__net__SharedObject r6;
	openfl__errors__Error r13;
	vdynamic *r4, *r5, *r9;
	int r2, r7, r8, r14;
	hl_trap_ctx trap$0;
	if( r1 ) goto label$6d7dd97_10_3;
	r2 = 0;
	goto label$6d7dd97_10_4;
	label$6d7dd97_10_3:
	r2 = *r1;
	label$6d7dd97_10_4:
	r3 = flixel_util_FlxSave_checkStatus(r0);
	if( r3 ) goto label$6d7dd97_10_8;
	r3 = false;
	return r3;
	label$6d7dd97_10_8:
	hl_trap(trap$0,r4,label$6d7dd97_10_22);
	r6 = r0->_sharedObject;
	if( r6 == NULL ) hl_null_access();
	r7 = r2;
	r1 = &r7;
	r5 = ((vdynamic* (*)(openfl__net__SharedObject,int*))r6->$type->vobj_proto[5])(r6,r1);
	r8 = 0;
	r9 = hl_alloc_dynamic(&t$_i32);
	r9->v.i = r8;
	if( r5 == r9 || (r5 && r9 && (r5->v.i == r9->v.i)) ) goto label$6d7dd97_10_20;
	r11 = (String)s$b3dbb57;
	r10 = hl_alloc_enum(&t$flixel_util_FlxSaveStatus,2);
	((flixel_util_FlxSaveStatus_ERROR*)r10)->p0 = r11;
	r0->status = r10;
	label$6d7dd97_10_20:
	hl_endtrap(trap$0);
	goto label$6d7dd97_10_31;
	label$6d7dd97_10_22:
	r12 = (openfl__errors__$Error)g$_openfl_errors_Error;
	r3 = hl_BaseType_check(((hl__BaseType)r12),r4);
	if( !r3 ) goto label$6d7dd97_10_30;
	r13 = (openfl__errors__Error)r4;
	r11 = (String)s$bb372bc;
	r10 = hl_alloc_enum(&t$flixel_util_FlxSaveStatus,2);
	((flixel_util_FlxSaveStatus_ERROR*)r10)->p0 = r11;
	r0->status = r10;
	goto label$6d7dd97_10_31;
	label$6d7dd97_10_30:
	hl_rethrow((vdynamic*)r4);
	label$6d7dd97_10_31:
	r3 = flixel_util_FlxSave_checkStatus(r0);
	r10 = r0->status;
	if( r10 == NULL ) hl_null_access();
	r8 = HL__ENUM_INDEX__(r10);
	r14 = 1;
	if( r8 != r14 ) goto label$6d7dd97_10_41;
	r11 = ((flixel_util_FlxSaveStatus_BOUND*)r10)->p0;
	r15 = ((flixel_util_FlxSaveStatus_BOUND*)r10)->p1;
	r3 = true;
	return r3;
	label$6d7dd97_10_41:
	r3 = false;
	return r3;
}

bool flixel_util_FlxSave_erase(flixel__util__FlxSave r0) {
	vdynobj *r4;
	bool r2;
	openfl__net__SharedObject r3;
	r2 = flixel_util_FlxSave_checkStatus(r0);
	if( r2 ) goto label$6d7dd97_11_4;
	r2 = false;
	return r2;
	label$6d7dd97_11_4:
	r3 = r0->_sharedObject;
	if( r3 == NULL ) hl_null_access();
	((void (*)(openfl__net__SharedObject))r3->$type->vobj_proto[4])(r3);
	r4 = hl_alloc_dynobj();
	r0->data = ((vdynamic*)r4);
	r2 = true;
	return r2;
}

bool flixel_util_FlxSave_checkStatus(flixel__util__FlxSave r0) {
	String r4;
	venum *r1;
	bool r3;
	int r2;
	r1 = r0->status;
	if( r1 == NULL ) hl_null_access();
	r2 = HL__ENUM_INDEX__(r1);
	switch(r2) {
		default:
		case 1:
			r3 = true;
			return r3;
		case 0:
			goto label$6d7dd97_12_8;
		case 2:
			r4 = ((flixel_util_FlxSaveStatus_ERROR*)r1)->p0;
	}
	label$6d7dd97_12_8:
	r3 = false;
	return r3;
}

String flixel_util_FlxSave_get_name(flixel__util__FlxSave r0) {
	String r4, r5;
	venum *r1;
	int r2, r3;
	r1 = r0->status;
	if( r1 == NULL ) hl_null_access();
	r2 = HL__ENUM_INDEX__(r1);
	r3 = 1;
	if( r2 != r3 ) goto label$6d7dd97_13_8;
	r4 = ((flixel_util_FlxSaveStatus_BOUND*)r1)->p1;
	r5 = ((flixel_util_FlxSaveStatus_BOUND*)r1)->p0;
	return r5;
	label$6d7dd97_13_8:
	r4 = NULL;
	return r4;
}

String flixel_util_FlxSave_get_path(flixel__util__FlxSave r0) {
	String r4, r5;
	venum *r1;
	int r2, r3;
	r1 = r0->status;
	if( r1 == NULL ) hl_null_access();
	r2 = HL__ENUM_INDEX__(r1);
	r3 = 1;
	if( r2 != r3 ) goto label$6d7dd97_14_8;
	r4 = ((flixel_util_FlxSaveStatus_BOUND*)r1)->p0;
	r5 = ((flixel_util_FlxSaveStatus_BOUND*)r1)->p1;
	return r5;
	label$6d7dd97_14_8:
	r4 = NULL;
	return r4;
}

bool flixel_util_FlxSave_get_isBound(flixel__util__FlxSave r0) {
	String r4, r5;
	venum *r1;
	bool r6;
	int r2, r3;
	r1 = r0->status;
	if( r1 == NULL ) hl_null_access();
	r2 = HL__ENUM_INDEX__(r1);
	r3 = 1;
	if( r2 != r3 ) goto label$6d7dd97_15_9;
	r4 = ((flixel_util_FlxSaveStatus_BOUND*)r1)->p0;
	r5 = ((flixel_util_FlxSaveStatus_BOUND*)r1)->p1;
	r6 = true;
	return r6;
	label$6d7dd97_15_9:
	r6 = false;
	return r6;
}

bool flixel_util_FlxSave_isEmpty(flixel__util__FlxSave r0) {
	hl__types__ArrayObj r4;
	bool r2;
	vdynamic *r1;
	int r3, r5;
	r1 = r0->data;
	if( !r1 ) goto label$6d7dd97_16_12;
	r1 = r0->data;
	r4 = Reflect_fields(r1);
	if( r4 == NULL ) hl_null_access();
	r3 = r4->length;
	r5 = 0;
	if( r3 == r5 ) goto label$6d7dd97_16_10;
	r2 = false;
	goto label$6d7dd97_16_11;
	label$6d7dd97_16_10:
	r2 = true;
	label$6d7dd97_16_11:
	return r2;
	label$6d7dd97_16_12:
	r2 = true;
	return r2;
}

