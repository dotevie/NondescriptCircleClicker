// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <flixel/util/FlxTimer.h>
void flixel_util_FlxTimerManager_add(flixel__util__FlxTimerManager,flixel__util__FlxTimer);
#include <hl/natives.h>
void flixel_util_FlxTimerManager_remove(flixel__util__FlxTimerManager,flixel__util__FlxTimer);
extern flixel__util__$FlxTimer g$_flixel_util_FlxTimer;

void flixel_util_FlxTimer_destroy(flixel__util__FlxTimer r0) {
	vclosure *r1;
	r1 = NULL;
	r0->onComplete = r1;
	return;
}

flixel__util__FlxTimer flixel_util_FlxTimer_start(flixel__util__FlxTimer r0,double* r1,vclosure* r2,int* r3) {
	bool r8;
	flixel__util__FlxTimerManager r7;
	double r4, r9;
	int r5, r10, r11;
	if( r1 ) goto label$3620244_2_3;
	r4 = 1.;
	goto label$3620244_2_4;
	label$3620244_2_3:
	r4 = *r1;
	label$3620244_2_4:
	if( r3 ) goto label$3620244_2_7;
	r5 = 1;
	goto label$3620244_2_8;
	label$3620244_2_7:
	r5 = *r3;
	label$3620244_2_8:
	r7 = r0->manager;
	if( !r7 ) goto label$3620244_2_17;
	r8 = r0->_inManager;
	if( r8 ) goto label$3620244_2_17;
	r7 = r0->manager;
	if( r7 == NULL ) hl_null_access();
	flixel_util_FlxTimerManager_add(r7,r0);
	r8 = true;
	r0->_inManager = r8;
	label$3620244_2_17:
	r8 = true;
	r0->active = r8;
	r8 = false;
	r0->finished = r8;
	r9 = hl_math_abs(r4);
	r0->time = r9;
	r11 = 0;
	if( r5 >= r11 ) goto label$3620244_2_28;
	r11 = -1;
	r10 = r5 * r11;
	r5 = r10;
	label$3620244_2_28:
	r0->loops = r5;
	r0->onComplete = r2;
	r9 = 0.;
	r0->_timeCounter = r9;
	r10 = 0;
	r0->_loopsCounter = r10;
	return r0;
}

flixel__util__FlxTimer flixel_util_FlxTimer_reset(flixel__util__FlxTimer r0,double* r1) {
	flixel__util__FlxTimer r5;
	vclosure *r6;
	double r2, r3, r4;
	int *r8;
	int r7;
	if( r1 ) goto label$3620244_3_3;
	r2 = -1.;
	goto label$3620244_3_4;
	label$3620244_3_3:
	r2 = *r1;
	label$3620244_3_4:
	r4 = 0.;
	if( !(r2 < r4) ) goto label$3620244_3_8;
	r3 = r0->time;
	r2 = r3;
	label$3620244_3_8:
	r3 = r2;
	r1 = &r3;
	r6 = r0->onComplete;
	r7 = r0->loops;
	r8 = &r7;
	r5 = flixel_util_FlxTimer_start(r0,r1,r6,r8);
	return r0;
}

void flixel_util_FlxTimer_cancel(flixel__util__FlxTimer r0) {
	bool r1;
	flixel__util__FlxTimerManager r3;
	r1 = true;
	r0->finished = r1;
	r1 = false;
	r0->active = r1;
	r3 = r0->manager;
	if( !r3 ) goto label$3620244_4_13;
	r1 = r0->_inManager;
	if( !r1 ) goto label$3620244_4_13;
	r3 = r0->manager;
	if( r3 == NULL ) hl_null_access();
	flixel_util_FlxTimerManager_remove(r3,r0);
	r1 = false;
	r0->_inManager = r1;
	label$3620244_4_13:
	return;
}

void flixel_util_FlxTimer_update(flixel__util__FlxTimer r0,double r1) {
	bool r4;
	double r2, r3;
	int r5, r6;
	r2 = r0->_timeCounter;
	r2 = r2 + r1;
	r0->_timeCounter = r2;
	label$3620244_5_3:
	r2 = r0->_timeCounter;
	r3 = r0->time;
	if( !(r2 >= r3) ) goto label$3620244_5_27;
	r4 = r0->active;
	if( !r4 ) goto label$3620244_5_27;
	r4 = r0->finished;
	if( r4 ) goto label$3620244_5_27;
	r2 = r0->_timeCounter;
	r3 = r0->time;
	r2 = r2 - r3;
	r0->_timeCounter = r2;
	r5 = r0->_loopsCounter;
	++r5;
	r0->_loopsCounter = r5;
	r5 = r0->loops;
	r6 = 0;
	if( r6 >= r5 ) goto label$3620244_5_26;
	r5 = r0->_loopsCounter;
	r6 = r0->loops;
	if( r5 < r6 ) goto label$3620244_5_26;
	r4 = true;
	r0->finished = r4;
	label$3620244_5_26:
	goto label$3620244_5_3;
	label$3620244_5_27:
	return;
}

void flixel_util_FlxTimer_onLoopFinished(flixel__util__FlxTimer r0) {
	bool r2;
	vclosure *r3;
	r2 = r0->finished;
	if( !r2 ) goto label$3620244_6_3;
	flixel_util_FlxTimer_cancel(r0);
	label$3620244_6_3:
	r3 = r0->onComplete;
	if( !r3 ) goto label$3620244_6_8;
	r3 = r0->onComplete;
	if( r3 == NULL ) hl_null_access();
	r3->hasValue ? ((void (*)(vdynamic*,flixel__util__FlxTimer))r3->fun)((vdynamic*)r3->value,r0) : ((void (*)(flixel__util__FlxTimer))r3->fun)(r0);
	label$3620244_6_8:
	return;
}

double flixel_util_FlxTimer_get_timeLeft(flixel__util__FlxTimer r0) {
	double r1, r2;
	r1 = r0->time;
	r2 = r0->_timeCounter;
	r1 = r1 - r2;
	return r1;
}

double flixel_util_FlxTimer_get_elapsedTime(flixel__util__FlxTimer r0) {
	double r1;
	r1 = r0->_timeCounter;
	return r1;
}

int flixel_util_FlxTimer_get_loopsLeft(flixel__util__FlxTimer r0) {
	int r1, r2;
	r1 = r0->loops;
	r2 = r0->_loopsCounter;
	r1 = r1 - r2;
	return r1;
}

int flixel_util_FlxTimer_get_elapsedLoops(flixel__util__FlxTimer r0) {
	int r1;
	r1 = r0->_loopsCounter;
	return r1;
}

double flixel_util_FlxTimer_get_progress(flixel__util__FlxTimer r0) {
	double r1, r2;
	r1 = r0->time;
	r2 = 0.;
	if( !(r2 < r1) ) goto label$3620244_11_7;
	r1 = r0->_timeCounter;
	r2 = r0->time;
	r1 = r1 / r2;
	return r1;
	label$3620244_11_7:
	r1 = 0.;
	return r1;
}

void flixel_util_FlxTimer_new(flixel__util__FlxTimer r0,flixel__util__FlxTimerManager r1) {
	bool r2;
	flixel__util__FlxTimerManager r5;
	flixel__util__$FlxTimer r6;
	double r4;
	int r3;
	r2 = false;
	r0->_inManager = r2;
	r3 = 0;
	r0->_loopsCounter = r3;
	r4 = 0.;
	r0->_timeCounter = r4;
	r2 = false;
	r0->finished = r2;
	r2 = false;
	r0->active = r2;
	r3 = 0;
	r0->loops = r3;
	r4 = 0.;
	r0->time = r4;
	if( !r1 ) goto label$3620244_12_17;
	r5 = r1;
	goto label$3620244_12_19;
	label$3620244_12_17:
	r6 = (flixel__util__$FlxTimer)g$_flixel_util_FlxTimer;
	r5 = r6->globalManager;
	label$3620244_12_19:
	r0->manager = r5;
	return;
}

