// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <flixel/path/FlxDiagonalPathfinder.h>
extern hl_type t$flixel_path_FlxTypedPathfinderData;
void flixel_path_FlxTypedPathfinderData_new(flixel__path__FlxTypedPathfinderData,flixel__tile__FlxBaseTilemap,int,int);
extern hl_type t$fun_33f832c;
void flixel_path_FlxTypedPathfinder_new(flixel__path__FlxTypedPathfinder,vclosure*);
bool hl_types_ArrayBytes_Int_contains(hl__types__ArrayBytes_Int,int);
bool flixel_path_FlxDiagonalPathfinder_canGo(flixel__path__FlxDiagonalPathfinder,flixel__path__FlxTypedPathfinderData,int,int*);
int hl_types_ArrayBytes_Int_push(hl__types__ArrayBytes_Int,int);
#include <hl/natives.h>
hl__types__ArrayBytes_Int hl_types_ArrayBase_allocI32(vbyte*,int);
int flixel_path_FlxDiagonalPathfinder_getInBoundDirections(flixel__path__FlxDiagonalPathfinder,flixel__path__FlxTypedPathfinderData,int);
extern hl_type t$ctx_c086e47;
extern hl_type t$fun_0909804;
int flixel_util__FlxDirectionFlags_FlxDirectionFlags_Impl__fromBools(bool,bool,bool,bool);
int flixel_tile_FlxBaseTilemap_getTileByIndex(flixel__tile__FlxBaseTilemap,int);
int flixel_tile_FlxBaseTilemap_getTileCollisions(flixel__tile__FlxBaseTilemap,int);

flixel__path__FlxTypedPathfinderData flixel_path_FlxDiagonalPathfinder_new__$1(flixel__tile__FlxBaseTilemap r0,int r1,int r2) {
	flixel__path__FlxTypedPathfinderData r3;
	r3 = (flixel__path__FlxTypedPathfinderData)hl_alloc_obj(&t$flixel_path_FlxTypedPathfinderData);
	flixel_path_FlxTypedPathfinderData_new(r3,r0,r1,r2);
	return r3;
}

void flixel_path_FlxDiagonalPathfinder_new(flixel__path__FlxDiagonalPathfinder r0,int* r1) {
	vclosure *r4;
	int r2;
	static vclosure cl$0 = { &t$fun_33f832c, flixel_path_FlxDiagonalPathfinder_new__$1, 0 };
	if( r1 ) goto label$82c6499_2_3;
	r2 = 0;
	goto label$82c6499_2_4;
	label$82c6499_2_3:
	r2 = *r1;
	label$82c6499_2_4:
	r4 = &cl$0;
	flixel_path_FlxTypedPathfinder_new(((flixel__path__FlxTypedPathfinder)r0),r4);
	r0->diagonalPolicy = r2;
	return;
}

bool flixel_path_FlxDiagonalPathfinder_getNeighbors__$1(venum* r0,bool r1,int r2,int r3) {
	bool r4;
	flixel__path__FlxDiagonalPathfinder r8;
	hl__types__ArrayBytes_Int r5;
	flixel__path__FlxTypedPathfinderData r6;
	int *r10;
	int r7, r9;
	if( !r1 ) goto label$82c6499_3_16;
	r6 = ((Enumt$ctx_c086e47*)r0)->p0;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->excluded;
	if( r5 == NULL ) hl_null_access();
	r4 = hl_types_ArrayBytes_Int_contains(r5,r2);
	if( r4 ) goto label$82c6499_3_16;
	r8 = ((Enumt$ctx_c086e47*)r0)->p2;
	if( r8 == NULL ) hl_null_access();
	r6 = ((Enumt$ctx_c086e47*)r0)->p0;
	r9 = r3;
	r10 = &r9;
	r4 = flixel_path_FlxDiagonalPathfinder_canGo(r8,r6,r2,r10);
	if( !r4 ) goto label$82c6499_3_16;
	r4 = true;
	goto label$82c6499_3_17;
	label$82c6499_3_16:
	r4 = false;
	label$82c6499_3_17:
	if( !r4 ) goto label$82c6499_3_21;
	r5 = ((Enumt$ctx_c086e47*)r0)->p1;
	if( r5 == NULL ) hl_null_access();
	r7 = hl_types_ArrayBytes_Int_push(r5,r2);
	label$82c6499_3_21:
	return r4;
}

hl__types__ArrayBytes_Int flixel_path_FlxDiagonalPathfinder_getNeighbors(flixel__path__FlxDiagonalPathfinder r0,flixel__path__FlxTypedPathfinderData r1,int r2) {
	venum *r17;
	bool r7, r10, r12, r14, r19;
	hl__types__ArrayBytes_Int r3;
	flixel__tile__FlxBaseTilemap r18;
	vclosure *r16;
	int r5, r6, r8, r9, r11, r13, r15, r20, r21;
	vbyte *r4;
	r5 = 0;
	r4 = hl_alloc_bytes(r5);
	r5 = 0;
	r5 = 0;
	r3 = hl_types_ArrayBase_allocI32(r4,r5);
	r5 = flixel_path_FlxDiagonalPathfinder_getInBoundDirections(r0,r1,r2);
	r6 = 256;
	r8 = r5 & r6;
	if( r8 == r6 ) goto label$82c6499_4_11;
	r7 = false;
	goto label$82c6499_4_12;
	label$82c6499_4_11:
	r7 = true;
	label$82c6499_4_12:
	r8 = 4096;
	r9 = r5 & r8;
	if( r9 == r8 ) goto label$82c6499_4_17;
	r10 = false;
	goto label$82c6499_4_18;
	label$82c6499_4_17:
	r10 = true;
	label$82c6499_4_18:
	r9 = 1;
	r11 = r5 & r9;
	if( r11 == r9 ) goto label$82c6499_4_23;
	r12 = false;
	goto label$82c6499_4_24;
	label$82c6499_4_23:
	r12 = true;
	label$82c6499_4_24:
	r11 = 16;
	r13 = r5 & r11;
	if( r13 == r11 ) goto label$82c6499_4_29;
	r14 = false;
	goto label$82c6499_4_30;
	label$82c6499_4_29:
	r14 = true;
	label$82c6499_4_30:
	r17 = hl_alloc_enum(&t$ctx_c086e47,0);
	((Enumt$ctx_c086e47*)r17)->p0 = (flixel__path__FlxTypedPathfinderData)r1;
	((Enumt$ctx_c086e47*)r17)->p1 = (hl__types__ArrayBytes_Int)r3;
	((Enumt$ctx_c086e47*)r17)->p2 = (flixel__path__FlxDiagonalPathfinder)r0;
	r16 = hl_alloc_closure_ptr(&t$fun_0909804,flixel_path_FlxDiagonalPathfinder_getNeighbors__$1,r17);
	if( r1 == NULL ) hl_null_access();
	r18 = r1->map;
	if( r18 == NULL ) hl_null_access();
	r13 = r18->widthInTiles;
	if( r16 == NULL ) hl_null_access();
	r15 = r2 - r13;
	r20 = 256;
	r19 = r16->hasValue ? ((bool (*)(vdynamic*,bool,int,int))r16->fun)((vdynamic*)r16->value,r7,r15,r20) : ((bool (*)(bool,int,int))r16->fun)(r7,r15,r20);
	r7 = r19;
	r15 = r2 + r13;
	r20 = 4096;
	r19 = r16->hasValue ? ((bool (*)(vdynamic*,bool,int,int))r16->fun)((vdynamic*)r16->value,r10,r15,r20) : ((bool (*)(bool,int,int))r16->fun)(r10,r15,r20);
	r10 = r19;
	r20 = 1;
	r15 = r2 - r20;
	r20 = 1;
	r19 = r16->hasValue ? ((bool (*)(vdynamic*,bool,int,int))r16->fun)((vdynamic*)r16->value,r12,r15,r20) : ((bool (*)(bool,int,int))r16->fun)(r12,r15,r20);
	r12 = r19;
	r20 = 1;
	r15 = r2 + r20;
	r20 = 16;
	r19 = r16->hasValue ? ((bool (*)(vdynamic*,bool,int,int))r16->fun)((vdynamic*)r16->value,r14,r15,r20) : ((bool (*)(bool,int,int))r16->fun)(r14,r15,r20);
	r14 = r19;
	r15 = r0->diagonalPolicy;
	r20 = 0;
	if( r15 == r20 ) goto label$82c6499_4_109;
	if( !r7 ) goto label$82c6499_4_65;
	if( !r12 ) goto label$82c6499_4_65;
	r19 = true;
	goto label$82c6499_4_66;
	label$82c6499_4_65:
	r19 = false;
	label$82c6499_4_66:
	r15 = r2 - r13;
	r20 = 1;
	r15 = r15 - r20;
	r20 = 256;
	r21 = 1;
	r20 = r20 | r21;
	r19 = r16->hasValue ? ((bool (*)(vdynamic*,bool,int,int))r16->fun)((vdynamic*)r16->value,r19,r15,r20) : ((bool (*)(bool,int,int))r16->fun)(r19,r15,r20);
	if( !r7 ) goto label$82c6499_4_77;
	if( !r14 ) goto label$82c6499_4_77;
	r19 = true;
	goto label$82c6499_4_78;
	label$82c6499_4_77:
	r19 = false;
	label$82c6499_4_78:
	r15 = r2 - r13;
	r20 = 1;
	r15 = r15 + r20;
	r20 = 256;
	r21 = 16;
	r20 = r20 | r21;
	r19 = r16->hasValue ? ((bool (*)(vdynamic*,bool,int,int))r16->fun)((vdynamic*)r16->value,r19,r15,r20) : ((bool (*)(bool,int,int))r16->fun)(r19,r15,r20);
	if( !r10 ) goto label$82c6499_4_89;
	if( !r12 ) goto label$82c6499_4_89;
	r19 = true;
	goto label$82c6499_4_90;
	label$82c6499_4_89:
	r19 = false;
	label$82c6499_4_90:
	r15 = r2 + r13;
	r20 = 1;
	r15 = r15 - r20;
	r20 = 4096;
	r21 = 1;
	r20 = r20 | r21;
	r19 = r16->hasValue ? ((bool (*)(vdynamic*,bool,int,int))r16->fun)((vdynamic*)r16->value,r19,r15,r20) : ((bool (*)(bool,int,int))r16->fun)(r19,r15,r20);
	if( !r10 ) goto label$82c6499_4_101;
	if( !r14 ) goto label$82c6499_4_101;
	r19 = true;
	goto label$82c6499_4_102;
	label$82c6499_4_101:
	r19 = false;
	label$82c6499_4_102:
	r15 = r2 + r13;
	r20 = 1;
	r15 = r15 + r20;
	r20 = 4096;
	r21 = 16;
	r20 = r20 | r21;
	r19 = r16->hasValue ? ((bool (*)(vdynamic*,bool,int,int))r16->fun)((vdynamic*)r16->value,r19,r15,r20) : ((bool (*)(bool,int,int))r16->fun)(r19,r15,r20);
	label$82c6499_4_109:
	return r3;
}

int flixel_path_FlxDiagonalPathfinder_getInBoundDirections(flixel__path__FlxDiagonalPathfinder r0,flixel__path__FlxTypedPathfinderData r1,int r2) {
	bool r9, r11, r13, r14;
	double r6, r7;
	flixel__tile__FlxBaseTilemap r5;
	int r3, r4, r8, r10, r12;
	if( r1 == NULL ) hl_null_access();
	r5 = r1->map;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->widthInTiles;
	r3 = r4 == 0 ? 0 : r2 % r4;
	r6 = (double)r2;
	r5 = r1->map;
	if( r5 == NULL ) hl_null_access();
	r4 = r5->widthInTiles;
	r7 = (double)r4;
	r6 = r6 / r7;
	r4 = (int)r6;
	r10 = 0;
	if( r3 > r10 ) goto label$82c6499_5_16;
	r9 = false;
	goto label$82c6499_5_17;
	label$82c6499_5_16:
	r9 = true;
	label$82c6499_5_17:
	r5 = r1->map;
	if( r5 == NULL ) hl_null_access();
	r10 = r5->widthInTiles;
	r12 = 1;
	r10 = r10 - r12;
	if( r3 < r10 ) goto label$82c6499_5_25;
	r11 = false;
	goto label$82c6499_5_26;
	label$82c6499_5_25:
	r11 = true;
	label$82c6499_5_26:
	r10 = 0;
	if( r4 > r10 ) goto label$82c6499_5_30;
	r13 = false;
	goto label$82c6499_5_31;
	label$82c6499_5_30:
	r13 = true;
	label$82c6499_5_31:
	r5 = r1->map;
	if( r5 == NULL ) hl_null_access();
	r10 = r5->heightInTiles;
	r12 = 1;
	r10 = r10 - r12;
	if( r4 < r10 ) goto label$82c6499_5_39;
	r14 = false;
	goto label$82c6499_5_40;
	label$82c6499_5_39:
	r14 = true;
	label$82c6499_5_40:
	r8 = flixel_util__FlxDirectionFlags_FlxDirectionFlags_Impl__fromBools(r9,r11,r13,r14);
	return r8;
}

bool flixel_path_FlxDiagonalPathfinder_canGo(flixel__path__FlxDiagonalPathfinder r0,flixel__path__FlxTypedPathfinderData r1,int r2,int* r3) {
	bool r5;
	flixel__tile__FlxBaseTilemap r7, r8;
	int r4, r6, r9;
	if( r3 ) goto label$82c6499_6_3;
	r4 = 4369;
	goto label$82c6499_6_4;
	label$82c6499_6_3:
	r4 = *r3;
	label$82c6499_6_4:
	if( r1 == NULL ) hl_null_access();
	r7 = r1->map;
	if( r7 == NULL ) hl_null_access();
	r8 = r1->map;
	if( r8 == NULL ) hl_null_access();
	r6 = flixel_tile_FlxBaseTilemap_getTileByIndex(r8,r2);
	r6 = flixel_tile_FlxBaseTilemap_getTileCollisions(r7,r6);
	r9 = 0;
	if( r6 == r9 ) goto label$82c6499_6_15;
	r5 = false;
	goto label$82c6499_6_16;
	label$82c6499_6_15:
	r5 = true;
	label$82c6499_6_16:
	return r5;
}

int flixel_path_FlxDiagonalPathfinder_getDistance(flixel__path__FlxDiagonalPathfinder r0,flixel__path__FlxTypedPathfinderData r1,int r2,int r3) {
	bool r11;
	double r8, r9, r10;
	flixel__tile__FlxBaseTilemap r6;
	int r4, r5, r7;
	r4 = r0->diagonalPolicy;
	r5 = 0;
	if( r4 == r5 ) goto label$82c6499_7_32;
	if( r1 == NULL ) hl_null_access();
	r6 = r1->map;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->widthInTiles;
	r4 = r5 == 0 ? 0 : r2 % r5;
	r6 = r1->map;
	if( r6 == NULL ) hl_null_access();
	r7 = r6->widthInTiles;
	r5 = r7 == 0 ? 0 : r3 % r7;
	if( r4 == r5 ) goto label$82c6499_7_32;
	r8 = (double)r2;
	r6 = r1->map;
	if( r6 == NULL ) hl_null_access();
	r4 = r6->widthInTiles;
	r9 = (double)r4;
	r8 = r8 / r9;
	r4 = (int)r8;
	r9 = (double)r3;
	r6 = r1->map;
	if( r6 == NULL ) hl_null_access();
	r5 = r6->widthInTiles;
	r10 = (double)r5;
	r9 = r9 / r10;
	r7 = (int)r9;
	if( r4 != r7 ) goto label$82c6499_7_30;
	r11 = false;
	goto label$82c6499_7_31;
	label$82c6499_7_30:
	r11 = true;
	label$82c6499_7_31:
	goto label$82c6499_7_33;
	label$82c6499_7_32:
	r11 = false;
	label$82c6499_7_33:
	if( !r11 ) goto label$82c6499_7_43;
	r4 = r0->diagonalPolicy;
	switch(r4) {
		default:
			goto label$82c6499_7_43;
		case 0:
			r4 = 0;
			return r4;
		case 1:
			r4 = 1;
			return r4;
		case 2:
			r4 = 2;
			return r4;
	}
	label$82c6499_7_43:
	r4 = 1;
	return r4;
}

