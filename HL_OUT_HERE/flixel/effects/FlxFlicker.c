// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <flixel/effects/FlxFlicker.h>
#include <flixel/FlxG.h>
bool flixel_effects_FlxFlicker_isFlickering(flixel__FlxObject);
void flixel_effects_FlxFlicker_stopFlickering(flixel__FlxObject);
extern flixel__effects__$FlxFlicker g$_flixel_effects_FlxFlicker;
vdynamic* haxe_ds_ObjectMap_get(haxe__ds__ObjectMap,vdynamic*);
extern flixel__$FlxG g$_flixel_FlxG;
flixel__effects__FlxFlicker flixel_util_FlxPool_flixel_effects_FlxFlicker_get(flixel__util__FlxPool_flixel_effects_FlxFlicker);
void flixel_effects_FlxFlicker_start(flixel__effects__FlxFlicker,flixel__FlxObject,double,double,bool,vclosure*,vclosure*);
void haxe_ds_ObjectMap_set(haxe__ds__ObjectMap,vdynamic*,vdynamic*);
bool haxe_ds_ObjectMap_exists(haxe__ds__ObjectMap,vdynamic*);
void flixel_effects_FlxFlicker_stop(flixel__effects__FlxFlicker);
#include <flixel/util/FlxTimerManager.h>
extern hl_type t$flixel_util_FlxTimer;
void flixel_util_FlxTimer_new(flixel__util__FlxTimer,flixel__util__FlxTimerManager);
void flixel_effects_FlxFlicker_flickerProgress(flixel__effects__FlxFlicker,flixel__util__FlxTimer);
extern hl_type t$fun_9a43f95;
flixel__util__FlxTimer flixel_util_FlxTimer_start(flixel__util__FlxTimer,double*,vclosure*,int*);
void flixel_util_FlxTimer_cancel(flixel__util__FlxTimer);
void flixel_effects_FlxFlicker_release(flixel__effects__FlxFlicker);
bool haxe_ds_ObjectMap_remove(haxe__ds__ObjectMap,vdynamic*);
void flixel_util_FlxPool_flixel_effects_FlxFlicker_put(flixel__util__FlxPool_flixel_effects_FlxFlicker,flixel__effects__FlxFlicker);

flixel__effects__FlxFlicker flixel_effects_FlxFlicker_flicker(flixel__FlxObject r0,double* r1,double* r2,bool* r3,bool* r4,vclosure* r5,vclosure* r6) {
	haxe__ds__ObjectMap r14;
	bool r9, r10, r12;
	flixel__$FlxG r19;
	flixel__effects__$FlxFlicker r15;
	double r7, r8, r17, r18;
	vdynamic *r13;
	flixel__util__FlxPool_flixel_effects_FlxFlicker r20;
	flixel__effects__FlxFlicker r16;
	if( r1 ) goto label$2c4f3bb_1_3;
	r7 = 1.;
	goto label$2c4f3bb_1_4;
	label$2c4f3bb_1_3:
	r7 = *r1;
	label$2c4f3bb_1_4:
	if( r2 ) goto label$2c4f3bb_1_7;
	r8 = 0.040000000000000001;
	goto label$2c4f3bb_1_8;
	label$2c4f3bb_1_7:
	r8 = *r2;
	label$2c4f3bb_1_8:
	if( r3 ) goto label$2c4f3bb_1_11;
	r9 = true;
	goto label$2c4f3bb_1_12;
	label$2c4f3bb_1_11:
	r9 = *r3;
	label$2c4f3bb_1_12:
	if( r4 ) goto label$2c4f3bb_1_15;
	r10 = true;
	goto label$2c4f3bb_1_16;
	label$2c4f3bb_1_15:
	r10 = *r4;
	label$2c4f3bb_1_16:
	r12 = flixel_effects_FlxFlicker_isFlickering(r0);
	if( !r12 ) goto label$2c4f3bb_1_27;
	if( !r10 ) goto label$2c4f3bb_1_21;
	flixel_effects_FlxFlicker_stopFlickering(r0);
	goto label$2c4f3bb_1_27;
	label$2c4f3bb_1_21:
	r15 = (flixel__effects__$FlxFlicker)g$_flixel_effects_FlxFlicker;
	r14 = r15->_boundObjects;
	if( r14 == NULL ) hl_null_access();
	r13 = haxe_ds_ObjectMap_get(r14,((vdynamic*)r0));
	r16 = (flixel__effects__FlxFlicker)r13;
	return r16;
	label$2c4f3bb_1_27:
	r18 = 0.;
	if( !(r18 >= r8) ) goto label$2c4f3bb_1_32;
	r19 = (flixel__$FlxG)g$_flixel_FlxG;
	r17 = r19->elapsed;
	r8 = r17;
	label$2c4f3bb_1_32:
	r15 = (flixel__effects__$FlxFlicker)g$_flixel_effects_FlxFlicker;
	r20 = r15->_pool;
	if( r20 == NULL ) hl_null_access();
	r16 = flixel_util_FlxPool_flixel_effects_FlxFlicker_get(r20);
	if( r16 == NULL ) hl_null_access();
	flixel_effects_FlxFlicker_start(r16,r0,r7,r8,r9,r5,r6);
	r15 = (flixel__effects__$FlxFlicker)g$_flixel_effects_FlxFlicker;
	r14 = r15->_boundObjects;
	if( r14 == NULL ) hl_null_access();
	haxe_ds_ObjectMap_set(r14,((vdynamic*)r0),((vdynamic*)r16));
	return r16;
}

bool flixel_effects_FlxFlicker_isFlickering(flixel__FlxObject r0) {
	haxe__ds__ObjectMap r2;
	bool r1;
	flixel__effects__$FlxFlicker r3;
	r3 = (flixel__effects__$FlxFlicker)g$_flixel_effects_FlxFlicker;
	r2 = r3->_boundObjects;
	if( r2 == NULL ) hl_null_access();
	r1 = haxe_ds_ObjectMap_exists(r2,((vdynamic*)r0));
	return r1;
}

void flixel_effects_FlxFlicker_stopFlickering(flixel__FlxObject r0) {
	haxe__ds__ObjectMap r2;
	flixel__effects__$FlxFlicker r3;
	vdynamic *r1;
	flixel__effects__FlxFlicker r4;
	r3 = (flixel__effects__$FlxFlicker)g$_flixel_effects_FlxFlicker;
	r2 = r3->_boundObjects;
	if( r2 == NULL ) hl_null_access();
	r1 = haxe_ds_ObjectMap_get(r2,((vdynamic*)r0));
	r4 = (flixel__effects__FlxFlicker)r1;
	if( !r4 ) goto label$2c4f3bb_3_8;
	if( r4 == NULL ) hl_null_access();
	flixel_effects_FlxFlicker_stop(r4);
	label$2c4f3bb_3_8:
	return;
}

void flixel_effects_FlxFlicker_destroy(flixel__effects__FlxFlicker r0) {
	flixel__FlxObject r1;
	flixel__util__FlxTimer r2;
	vclosure *r3;
	r1 = NULL;
	r0->object = r1;
	r2 = NULL;
	r0->timer = r2;
	r3 = NULL;
	r0->completionCallback = r3;
	r3 = NULL;
	r0->progressCallback = r3;
	return;
}

void flixel_effects_FlxFlicker_start(flixel__effects__FlxFlicker r0,flixel__FlxObject r1,double r2,double r3,bool r4,vclosure* r5,vclosure* r6) {
	flixel__util__FlxTimerManager r9;
	flixel__util__FlxTimer r8, r12;
	vclosure *r14;
	double r7, r11;
	int *r16;
	double *r13;
	int r15;
	r0->object = r1;
	r0->duration = r2;
	r0->interval = r3;
	r0->completionCallback = r5;
	r0->progressCallback = r6;
	r0->endVisibility = r4;
	r8 = (flixel__util__FlxTimer)hl_alloc_obj(&t$flixel_util_FlxTimer);
	r9 = NULL;
	flixel_util_FlxTimer_new(r8,r9);
	r7 = r0->duration;
	r11 = r0->interval;
	r7 = r7 / r11;
	r11 = r0->interval;
	r13 = &r11;
	r14 = hl_alloc_closure_ptr(&t$fun_9a43f95,flixel_effects_FlxFlicker_flickerProgress,r0);
	r15 = (int)r7;
	r16 = &r15;
	r12 = flixel_util_FlxTimer_start(r8,r13,r14,r16);
	r0->timer = r12;
	return;
}

void flixel_effects_FlxFlicker_stop(flixel__effects__FlxFlicker r0) {
	bool r3;
	flixel__FlxObject r4;
	flixel__util__FlxTimer r2;
	r2 = r0->timer;
	if( r2 == NULL ) hl_null_access();
	flixel_util_FlxTimer_cancel(r2);
	r4 = r0->object;
	if( r4 == NULL ) hl_null_access();
	r3 = true;
	r3 = ((bool (*)(flixel__FlxObject,bool))r4->$type->vobj_proto[6])(r4,r3);
	flixel_effects_FlxFlicker_release(r0);
	return;
}

void flixel_effects_FlxFlicker_release(flixel__effects__FlxFlicker r0) {
	haxe__ds__ObjectMap r2;
	bool r1;
	flixel__FlxObject r4;
	flixel__effects__$FlxFlicker r3;
	flixel__util__FlxPool_flixel_effects_FlxFlicker r6;
	r3 = (flixel__effects__$FlxFlicker)g$_flixel_effects_FlxFlicker;
	r2 = r3->_boundObjects;
	if( r2 == NULL ) hl_null_access();
	r4 = r0->object;
	r1 = haxe_ds_ObjectMap_remove(r2,((vdynamic*)r4));
	r3 = (flixel__effects__$FlxFlicker)g$_flixel_effects_FlxFlicker;
	r6 = r3->_pool;
	if( r6 == NULL ) hl_null_access();
	flixel_util_FlxPool_flixel_effects_FlxFlicker_put(r6,r0);
	return;
}

void flixel_effects_FlxFlicker_flickerProgress(flixel__effects__FlxFlicker r0,flixel__util__FlxTimer r1) {
	bool r2;
	flixel__FlxObject r3, r4;
	vclosure *r6;
	int r7, r8;
	r3 = r0->object;
	if( r3 == NULL ) hl_null_access();
	r4 = r0->object;
	if( r4 == NULL ) hl_null_access();
	r2 = r4->visible;
	r2 = !r2;
	r2 = ((bool (*)(flixel__FlxObject,bool))r3->$type->vobj_proto[6])(r3,r2);
	r6 = r0->progressCallback;
	if( !r6 ) goto label$2c4f3bb_8_12;
	r6 = r0->progressCallback;
	if( r6 == NULL ) hl_null_access();
	r6->hasValue ? ((void (*)(vdynamic*,flixel__effects__FlxFlicker))r6->fun)((vdynamic*)r6->value,r0) : ((void (*)(flixel__effects__FlxFlicker))r6->fun)(r0);
	label$2c4f3bb_8_12:
	if( r1 == NULL ) hl_null_access();
	r7 = r1->loops;
	r8 = 0;
	if( r8 >= r7 ) goto label$2c4f3bb_8_31;
	r7 = r1->loops;
	r8 = r1->_loopsCounter;
	r7 = r7 - r8;
	r8 = 0;
	if( r7 != r8 ) goto label$2c4f3bb_8_31;
	r3 = r0->object;
	if( r3 == NULL ) hl_null_access();
	r2 = r0->endVisibility;
	r2 = ((bool (*)(flixel__FlxObject,bool))r3->$type->vobj_proto[6])(r3,r2);
	r6 = r0->completionCallback;
	if( !r6 ) goto label$2c4f3bb_8_30;
	r6 = r0->completionCallback;
	if( r6 == NULL ) hl_null_access();
	r6->hasValue ? ((void (*)(vdynamic*,flixel__effects__FlxFlicker))r6->fun)((vdynamic*)r6->value,r0) : ((void (*)(flixel__effects__FlxFlicker))r6->fun)(r0);
	label$2c4f3bb_8_30:
	flixel_effects_FlxFlicker_release(r0);
	label$2c4f3bb_8_31:
	return;
}

void flixel_effects_FlxFlicker_new(flixel__effects__FlxFlicker r0) {
	return;
}

