// Generated by HLC 4.3.1 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <sys/io/_Process/Stdout.h>
#include <hl/natives.h>
haxe__io__Bytes haxe_io_Bytes_alloc(int);
#include <haxe/io/Error.h>
int sys_io__Process_Stdout_readBytes(sys__io___Process__Stdout,haxe__io__Bytes,int,int);
extern venum* g$haxe_io_Error_Blocked;
int haxe_io_Bytes_get(haxe__io__Bytes,int);
#include <haxe/io/BytesDataImpl.h>
#include <haxe/io/Eof.h>
extern hl_type t$haxe_io_BytesDataImpl;
void haxe_io_BytesDataImpl_new(haxe__io__BytesDataImpl,vbyte*,int);
extern hl_type t$haxe_io_Eof;
void haxe_io_Eof_new(haxe__io__Eof);

void sys_io__Process_Stdout_new(sys__io___Process__Stdout r0,hl_process* r1,bool r2) {
	haxe__io__Bytes r3;
	int r4;
	r0->p = r1;
	r0->out = r2;
	r4 = 1;
	r3 = haxe_io_Bytes_alloc(r4);
	r0->buf = r3;
	return;
}

int sys_io__Process_Stdout_readByte(sys__io___Process__Stdout r0) {
	venum *r4;
	haxe__io__Bytes r2;
	int r1, r3;
	r2 = r0->buf;
	r1 = 0;
	r3 = 1;
	r1 = sys_io__Process_Stdout_readBytes(r0,r2,r1,r3);
	r3 = 0;
	if( r1 != r3 ) goto label$c8b6ad2_2_8;
	r4 = (venum*)g$haxe_io_Error_Blocked;
	hl_throw((vdynamic*)r4);
	label$c8b6ad2_2_8:
	r2 = r0->buf;
	if( r2 == NULL ) hl_null_access();
	r1 = 0;
	r1 = haxe_io_Bytes_get(r2,r1);
	return r1;
}

int sys_io__Process_Stdout_readBytes(sys__io___Process__Stdout r0,haxe__io__Bytes r1,int r2,int r3) {
	bool r5;
	hl_process *r6;
	haxe__io__BytesDataImpl r8;
	haxe__io__Eof r11;
	vbyte *r7;
	int r4, r10;
	r5 = r0->out;
	if( !r5 ) goto label$c8b6ad2_3_11;
	r6 = r0->p;
	r8 = (haxe__io__BytesDataImpl)hl_alloc_obj(&t$haxe_io_BytesDataImpl);
	if( r1 == NULL ) hl_null_access();
	r7 = r1->b;
	r4 = r1->length;
	haxe_io_BytesDataImpl_new(r8,r7,r4);
	r7 = r8->bytes;
	r4 = hl_process_stdout_read(r6,r7,r2,r3);
	goto label$c8b6ad2_3_19;
	label$c8b6ad2_3_11:
	r6 = r0->p;
	r8 = (haxe__io__BytesDataImpl)hl_alloc_obj(&t$haxe_io_BytesDataImpl);
	if( r1 == NULL ) hl_null_access();
	r7 = r1->b;
	r4 = r1->length;
	haxe_io_BytesDataImpl_new(r8,r7,r4);
	r7 = r8->bytes;
	r4 = hl_process_stderr_read(r6,r7,r2,r3);
	label$c8b6ad2_3_19:
	r10 = 0;
	if( r4 >= r10 ) goto label$c8b6ad2_3_24;
	r11 = (haxe__io__Eof)hl_alloc_obj(&t$haxe_io_Eof);
	haxe_io_Eof_new(r11);
	hl_throw((vdynamic*)r11);
	label$c8b6ad2_3_24:
	return r4;
}

